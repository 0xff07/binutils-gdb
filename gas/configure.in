# This file is configure.in
#
#   Copyright (C) 1987-1992 Free Software Foundation, Inc.
#   
#  This file is part of GAS, the GNU Assembler.
#   
#   GAS is free software; you can redistribute it and/or modify
#   it under the terms of the GNU General Public License as published by
#   the Free Software Foundation; either version 2, or (at your option)
#   any later version.
#   
#   GAS is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.
#   
#   You should have received a copy of the GNU General Public License
#   along with GAS; see the file COPYING.  If not, write to
#   the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */
#

# This file was written, and is maintained by K. Richard Pixley
# <rich@cygnus.com>.

# This file is a shell script that supplies the information necessary
# to tailor a template configure script into the configure script
# appropriate for this directory.  For more information, check any
# existing configure script.

srctrigger=as.c
srcname="gas"
need_bfd=
configdirs=doc

# per-host:

gas_host=generic

case "${host}" in
  a29k-*-* | rs6000-*-* | vax-*-*)  
    gas_host=${host_cpu} 
    ;;	
  mips-dec-ultrix) 
    gas_host=decstation 
    ;;
  i386-ibm-aix)	
    gas_host=i386aix
    ;;
  m68k-sun-sunos*)
    gas_host=sun3 
    ;;
  i386-sun-sunos*)
    gas_host=sun386  
    ;;
  sparc-sun-sunos*)
    gas_host=sun4 
    ;;
  sparc-sun-solaris2)
    gas_host=sysv
    ;;
  *-*-ansi | *-*-ultrix | *-*-hpux | *-*-sysv*)
    gas_host=${host_os} 
    ;;
esac

# per-target:

# assign cpu type
emulation=generic

cpu_type=${target_cpu}

# check for architecture variants
case ${target_cpu} in
  sparclite)    cpu_type=sparc ;;
  sparc64)	cpu_type=sparc obj_format=aout ;;
  m680[01234]0) cpu_type=m68k ;;
  m683?2)       cpu_type=m68k ;;
esac

gas_target=${cpu_type}

# assign object format
case ${target} in
  a29k-amd-udi)
    obj_format=coffbfd
    need_bfd="./../bfd/libbfd.a"
    gas_target=ebmon29k
    ;;
  a29k-amd-ebmon)
    obj_format=coffbfd
    need_bfd="./../bfd/libbfd.a"
    gas_target=ebmon29k
    ;;
  a29k-amd-ebmonold)
    obj_format=coff
    need_bfd="./../bfd/libbfd.a"
    gas_target=ebmon29k
    ;;
  i[34]86-ibm-aix*)
    obj_format=coff
    gas_target=i386aix
    emulation=i386aix
    ;;
  i[34]86-*-bsd*) 
    obj_format=aout 
    emulation=i386bsd	
    ;;
  i[34]86-*-coff | i[34]86-*-sysv* | i[34]86-*-sco*)
    obj_format=coffbfd
    need_bfd="./../bfd/libbfd.a"
    gas_target=i386coff
    ;; 
  i960-wrs-vxworks)
    obj_format=bout 
    ;;
  i960-*-coff)
    obj_format=coff
    emulation=ic960 
    ;;
  m68k-wrs-vxworks)
    obj_format=aout
    emulation=sun3
    ;;    
  m68k-ericsson-[Oo][Ss][Ee])
    obj_format=aout
    emulation=sun3
    ;;
  m68k-*-coff)
    obj_format=coffbfd
    need_bfd="./../bfd/libbfd.a"
    gas_target=m68kcoff
    ;;
  sparclite-fujitsu-none)
    obj_format=aout
    ;;
  *-*-aout | *-*-scout)
    obj_format=aout
    ;;
  *-*-bout* | *-*-nindy*)
    obj_format=bout 
    ;;
  *-*-bsd* | *-*-sunos*) 
    obj_format=aout 
    emulation=sun3	
    ;;
  *-*-generic)
    obj_format=generic 
    ;;
  *-*-xray | *-*-hms)
    obj_format=coffbfd
    need_bfd="./../bfd/libbfd.a"
    ;;
  *-*-sysv32)
    obj_format=coff
    emulation=sysv32
    ;;
  *-*-sim)	
    obj_format=coffbfd
    need_bfd="./../bfd/libbfd.a"
    ;;
  *-*-coff* | *-sysv* | *-*-sco*)
    obj_format=coff
    case ${target_vendor} in
      bull)  emulation=dpx2 ;;
      sun)   emulation=sun3 ;;
    esac
    ;;
  *-*-vxworks)
    obj_format=aout 
    ;;
  *-*-coff)
    obj_format=coff
    ;;
esac

# assign floating point type
case ${target_cpu} in
  ns32k) atof=ns32k ;;
  vax)	 atof=vax ;;
  *)	 atof=ieee ;;
esac

# and target makefile frag

target_makefile_frag=config/${gas_target}.mt

files="config/ho-${gas_host}.h config/tc-${cpu_type}.c \
	config/tc-${cpu_type}.h config/te-${emulation}.h \
	config/obj-${obj_format}.h config/obj-${obj_format}.c \
	config/atof-${atof}.c"

links="host.h targ-cpu.c targ-cpu.h targ-env.h obj-format.h obj-format.c atof-targ.c"

# end of gas/configure.in
