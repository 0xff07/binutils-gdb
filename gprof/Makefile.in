#	@(#)Makefile	5.17 (Berkeley) 5/11/90

srcdir = .

prefix = /usr/local

program_prefix =
exec_prefix = $(prefix)
bindir = $(exec_prefix)/bin
libdir = $(exec_prefix)/lib
tooldir = $(libdir)

datadir = $(prefix)/lib

INSTALL = install -c
INSTALL_PROGRAM = $(INSTALL)
INSTALL_DATA = $(INSTALL)

#### host and target dependent Makefile fragments come in here.
###

PROG=	gprof
SRCS=	gprof.c arcs.c dfn.c lookup.c ${MACHINE}.c hertz.c \
	printgprof.c printlist.c
LIBS = ../bfd/libbfd.a ../libiberty/libiberty.a

OBJS=	gprof.o arcs.o dfn.o lookup.o ${MACHINE}.o hertz.o \
	printgprof.o printlist.o

CFLAGS=	
.c.o:
	$(CC) -c $(CFLAGS) -I$(srcdir) -I$(srcdir)/../include -DMACHINE_H=\"${MACHINE}.h\" ${TCFLAGS} ${HCFLAGS} $<

all:	${PROG}

.PHONY: check
check:

install: all
	$(INSTALL_DATA) ${srcdir}/gprof.flat ${DESTDIR}$(datadir)
	$(INSTALL_DATA) ${srcdir}/gprof.callg ${DESTDIR}$(datadir)
	$(INSTALL_PROGRAM) $(PROG) ${DESTDIR}$(bindir)

$(PROG):	$(OBJS)
	$(CC) $(CFLAGS) $(OBJS) -o $(PROG) $(LIBS)

clean:
	-rm -f $(OBJS) core gprof nohup.out
# These get around a bug in Sun Make in SunOS 4.1.1 and Solaris 2
gprof.o: gprof.c
arcs.o: arcs.c
dfn.o: dfn.c
lookup.o: lookup.c
${MACHINE}.o: ${MACHINE}.c
hertz.o: hertz.c
printgprof.o: printgprof.c
printlist.o: printlist.c
