CFLAGS = -Wall -Werror -I../../common -I../../../include -g

check: bits32m0.ok bits32m31.ok bits64m0.ok bits64m63.ok

clean:
	rm -f *.o
	rm -f *.ok
	rm -f bits32m0 bits32m31 bits64m0 bits64m63 bits-gen
	rm -f tmp-*

.SUFIXES: .ok
%.ok: %
	./$<
	touch $<.ok

all: bits32m0 bits32m31 bits64m0 bits64m63

bits32m0.c: bits-gen bits-tst.c
	./bits-gen 32 0 > tmp-bits32m0.c
	cat bits-tst.c >> tmp-bits32m0.c
	mv tmp-bits32m0.c bits32m0.c
bits32m31.c: bits-gen bits-tst.c
	./bits-gen 32 31 > tmp-bits32m31.c
	cat bits-tst.c >> tmp-bits32m31.c
	mv tmp-bits32m31.c bits32m31.c
bits64m0.c: bits-gen bits-tst.c
	./bits-gen 64 0 > tmp-bits64m0.c
	cat bits-tst.c >> tmp-bits64m0.c
	mv tmp-bits64m0.c bits64m0.c
bits64m63.c: bits-gen bits-tst.c
	./bits-gen 64 63 > tmp-bits64m63.c
	cat bits-tst.c >> tmp-bits64m63.c
	mv tmp-bits64m63.c bits64m63.c
