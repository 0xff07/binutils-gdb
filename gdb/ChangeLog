Mon Dec 14 14:46:13 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* monitor.c (monitor_expect, monitor_printf_noecho,
 	monitor_printf): Always compile EXTRA_RDEBUG code.
	(RDEBUG): Ditto.

	From Michael Meissner <meissner@cygnus.com>:
	* ppcbug-rom.c (init_ppc_cmds): Cleanup formatting.

1998-12-08  Michael Meissner  <meissner@cygnus.com>

	* monitor.c (monitor_printable_string): New function to convert a
	string into a printable representation.
	(monitor_error): Call error after converting string into printable
	format.
	(monitor_printf{,_noecho}): If EXTRA_RDEBUG is defined, convert
	string into printable form before printing.
	(monitor_expect): Ditto.
	(monitor_read_memory{,_single}): Call monitor_error, not error.
	(monitor_read_memory): Return immediately if length is 0.

	* ppcbug-rom.c (init_ppc_cmds): Fill in dump_registers field,
 	which is now required.

Mon Dec 14 11:01:39 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* gdbarch.h, gdbarch.c: Consolidate the semi-dynamic target system
 	dependant GDB parameters.
	(set_gdbarch_from_file): Combine set_architecture_from_file and
 	set_byte_order_from_file.
	* top.c, defs.h, printcmd.c: Delete them from here.
	* Makefile.in: Add gdbarch.[ch].
	* exec.c (exec_file_command): Call set_gdbarch_from_file.

Sun Dec 13 09:52:51 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* defs.h (TARGET_PRINT_INSN_INFO, TARGET_PRINT_INSN): Define.
	(TARGET_ARCHITECTURE, TARGET_ARCHITECTURE_AUTO): Define.
	(TARGET_BYTE_ORDER_AUTO): Define.
	(TARGET_BYTE_ORDER_SELECTABLE_P): Provide default. Replaces
 	TARGET_BYTE_ORDER_SELECTABLE. Handle compat issues.
	(BITS_BIG_ENDIAN): Simplify.
	(TARGET_FLOAT_FORMAT): Ditto.
	(TARGET_DOUBLE_FORMAT): 

	* remote-e7000.c, sh-tdep.c, printcmd.c, gdbtk-cmds.c,
 	remote-sim.c, remote-rdi.c, sparc-tdep.c: Update.
	
	* config/powerpc/tm-ppcle-eabi.h, config/rs6000/tm-rs6000.h,
 	config/powerpc/tm-ppc-eabi.h, config/mn10300/tm-mn10300.h:
 	Convert.

Sat Dec 12 09:28:13 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* frame.h (struct frame_info): Add CORE_ADDR *saved_regs and
 	struct frame_extra_info *extra_info.
	(frame_obstack_alloc, frame_saved_regs_zalloc): Prototype.
	(SIZEOF_FRAME_SAVED_REGS): Provide default.
	(FRAME_INIT_SAVED_REGS): Provide default.
	(struct frame_saved_regs): Deprecate.
	(EXTRA_FRAME_INFO): Deprecate.
	
	* blockframe.c (frame_obstack_alloc, frame_saved_regs_zalloc): New
 	function.
	(generic_get_saved_register): Use FRAME_INIT_SAVED_REGS and
 	frame->saved_regs.
	(frame_cache_obstack): Make static.
	(get_frame_saved_regs): Deprecate. Copy the saved regs into the
 	frame buffer.

	* stack.c (frame_info): Rewrite using frame->saved_regs and
 	FRAME_INIT_SAVED_REGS.
	* findvar.c (find_saved_register): Ditto.

	* config/mn10300/tm-mn10300.h (EXTRA_FRAME_INFO): Delete.
	(FRAME_FIND_SAVED_REGS): Replace with FRAME_INIT_SAVED_REGS. No-op.
	* mn10300-tdep.c: Update.
 	(analyze_dummy_frame): New function.
	(struct frame_extra_info): Define.
	(mn10300_init_extra_frame_info): Update.
	
	* config/rs6000/tm-rs6000.h: (EXTRA_FRAME_INFO): Delete.
 	(FRAME_FIND_SAVED_REGS): Replace with FRAME_INIT_SAVED_REGS.
	(FRAME_ARGS_ADDRESS): Replace with function.

	* rs6000-tdep.c (frame_get_saved_regs): Rename from
 	frame_get_cache_fsr.
	(rs6000_init_extra_frame_info): New function.
	(rs6000_frame_init_saved_regs): Call frame_get_saved_regs.
	(FUNCTION_START_OFFSET): Delete references, was ZERO.
	(rs6000_frame_args_address): New function.
	(frame_initial_stack_address): Update
	
	* config/mips/tm-mips.h (EXTRA_FRAME_INFO): Remove saved_regs.
	(FRAME_INIT_SAVED_REGS): Rename FRAME_FIND_SAVED_REGS, update.
	* mips-tdep.c (mips_find_saved_regs, read_next_frame_reg,
 	init_extra_frame_info, mips_pop_frame): Update.
	* config/alpha/tm-alpha.h (FRAME_INIT_SAVED_REGS,
 	EXTRA_FRAME_INFO), alpha-tdep.c (alpha_find_saved_regs,
 	alpha_pop_frame, init_extra_frame_info): Ditto.
	
	* i960-tdep.c, m88k-tdep.c, h8300-tdep.c: Update.
	* config/sparc/tm-sparc.h, config/a29k/tm-a29k.h: Define
 	FRAME_INIT_SAVED_REGS as no-op.

	* z8k-tdep.c (z8k_init_frame_saved_regs): Rename
 	get_frame_saved_regs.
	(examine_frame, z8k_skip_prologue): Update.
	* config/z8k/tm-z8k.h (FRAME_INIT_SAVED_REGS): Define.

1998-12-11  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	From J.T. Conklin  <jtc@redbacknetworks.com>:
	* i386-stub.c (handle_exception): Add support for 'P' command.
	(NUMREGS): New macro.

start-sanitize-sky
1998-12-11  Jeff Law (law@cygnus.com)

        * txvu-tdep.c (set_vxtu_prompt): Rename set_prompt.

        * configure.in (with-sim-gpu2): Do not emit a -L argument without
        an associated pathname.  Link in the math library after the gpu2
        library.

end-sanitize-sky
Fri Dec 11 09:07:05 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* i386b-nat.c: Include "expression.h".

	* symtab.h: Don't include "gnu-regex.h".
	
	* solib.c (solib_add_common_symbols): Cast parameters passed to
 	make_cleanup to use the new make_cleanup_func typedef.

	* inftarg.c: Include "wait.h" after, rather than before, <wait.h>.
  	"wait.h" was defining all WIF* macro's instead of filling in those
 	that <wait.h> missed.

Fri Dec 11 09:52:04 1998  Andrew Cagney  <cagney@chook>

	* gdbtk-cmds.c, mipsm3-nat.c, hppah-nat.c, infptrace.c,
 	i386gnu-nat.c, hppab-nat.c, core-aout.c, arm-xdep.c, alpha-nat.c,
 	altos-xdep.c, pyr-xdep.c, remote-st.c, remote-os9k.c,
 	tahoe-tdep.c, pyr-tdep.c, vax-tdep.c: Replace reg_name with
 	REGISTER_NAME.

Thu Dec 10 15:19:40 1998  David Taylor  <taylor@texas.cygnus.com>

	The following changes were made by Jim Blandy <jimb@cygnus.com>,
 	Edith Epstein <eepstein@cygnus.com>, Elena Zannoni
 	<ezannoni@cygnus.com> Stan Shebs <shebs@cygnus.com>, and David
 	Taylor <taylor@cygnus.com>, as part of the project to merge in
 	changes originally made by HP; HP did not create ChangeLog
 	entries.
	
	* annotate.c: (annotate_catchpoint): New function.

	* annotate.h: (annotate_catchpoint): declare it; add new includes
 	(symtab.h and gdbtypes.h).

	* buildsym.h: added external var processing_hp_compilation.

	* coff-solib.h: 
	(SOLIB_REMOVE_INFERIOR_HOOK): new macro. defined to 0.
	functionality not implemented for coff.
	(SOLIB_CREATE_CATCH_LOAD_HOOK): New macro; generate error msg for coff.
	(SOLIB_CREATE_CATCH_UNLOAD_HOOK): ditto.
	(SOLIB_HAVE_LOAD_EVENT): ditto.
	(SOLIB_LOADED_LIBRARY_PATHNAME): ditto.
	(SOLIB_HAVE_UNLOAD_EVENT): ditto.
	(SOLIB_UNLOADED_LIBRARY_PATHNAME): ditto.
	(SOLIB_IN_DYNAMIC_LINKER): ditto.
	(SOLIB_RESTART): ditto.

	* complaints.h: add ifdef...endif pair at beginning and end of file.

	* dstread.c (dst_symfile_read): the parameter to fileno
	must be of type FILE *. So cast abfd->iostream in the 
	call to fileno must be cast as a FILE *, not a GDB_FILE *.
	This will work because abfd->iostream is declared and 
	given a value in bdf and bfd will continue to use FILE 
	rather than GDB_FILE.

	* dwarf2read.c (dwarf_bool_name): change parameter from bool
	to mybool.  sigh.

	* expression.h: include symtab.h
	
	* frame.h (print_only_stack_frame, show_stack_frame,
	show_frame_info): add prototypes.

	* gdbcmd.h (togglelist, stoplist): declare.

	* gdbcore.h (read_memory_string): declare it.
	(exec_file_attach): add prototype.

	* inflow.c (terminal_is_ours): make non static.

	* minsyms.c: minor spacing change.

	* parser-defs.h (parse_nested_classes_for_hpacc): add prototype.
	(find_template_name_end): add prototype.

	* scm-lang.c (scm_unpack): cast svalue to (int).

	* top.h: declare it.
	
	* valprint.h: (print_binary_chars): new prototype definition.
	(print_octal_chars): new prototype definition.
	(print_decimal_chars): new prototype definition.

Thu Dec 10 07:14:56 1998  Andrew Cagney  <cagney@chook>

	* config/arm/tm-arm.h, arm-tdep.c: Replace REGISTER_NAMES with
 	REGISTER_NAME.
	* mn10300-tdep.c, config/mn10300/tm-mn10300.h: Ditto.
	* sh-tdep.c, config/sh/tm-sh.h: Ditto.

	* defs.h (REGISTER_NAME): Provide default for old targets.
	* defs.h, infcmd.c: Rename reg_names to gdb_register_names.
	
	* tracepoint.c, target.c, parse.c, infcmd.c, remote-udi.c,
 	expprint.c, infcmd.c, printcmd.c, eval.c, stack.c, findvar.c,
 	remote-udi.c, config/alpha/tm-alpha.h, remote-sim.c, d30v-tdep.c,
 	config/mips/tm-mips.h, config/mips/tm-txvu.h, txvu-tdep.c,
 	hppa-tdep.c: Use REGISTER_NAME.

1998-12-08  James E Wilson  <wilson@wilson-pc.cygnus.com>

	* config/i960/mon960.mt (SIM_OBJS, SIM): Define.

Tue Dec  8 16:49:24 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* NEWS: Add mentions of newly-added configurations.

1998-12-08  Philippe De Muyter  <phdm@macqel.be>

        * config/xm-aix4.h (SIGWINCH_HANDLER): Function `aix_resize_window'
        must accept a signal number as parameter.
        * config/rs6000/xm-rs6000.h (SIGWINCH_HANDLER): Ditto.
        * utils.c (initialize_utils): Give a parameter to `SIGWINCH_HANDLER'.

        * inferior.h (register_valid): Variable's type is `SIGNED char', not
        `char'.
        * findvar.c (register_valid): Ditto.

        * defs.h (make_cleanup_func): Protect parameter list by `PARAMS'.
        * gdbthread.h (unbind_target_thread_vector): Likewise. 

Tue Dec  8 15:09:44 1998  Edith Epstein  <eepstein@sophia.cygnus.com>

        Merged in m68k-linux patch from Andreas Schwab
 
        1998-12-01  Andreas Schwab  <schwab@issan.cs.uni-dortmund.de>
 
        * Makefile.in, configure.host, configure.tgt: Add support for
        m68k-linux.
        * config/m68k/linux.mh: New file.
        * config/m68k/linux.mt: New file.
        * config/m68k/nm-linux.h: New file.
        * config/m68k/tm-linux.h: New file.
        * config/m68k/xm-linux.h: New file.
        * gdb/m68klinux-nat.c: New file.
        * gdbserver/low-linux.c: Add support for m68k-linux.
        * gdb/config/m68k/tm-m68k.h (NUM_FREGS): New macro.

1998-12-07  Jason Molenda  (jsm@bugshack.cygnus.com)

	* config/i386/xm-cygwin.h: Remove REQUEST_QUIT definition.
	* config/powerpc/xm-cygwin.h: Ditto.

1998-12-07  Jim Blandy  <jimb@zwingli.cygnus.com>

	* rs6000-tdep.c (pop_frame): Correctly find the registers saved in
	the stack frame.  Their offset from the previous stack frame is in
	fdata.gpr_offset and fdata.fpr_offset, not fdata.offset.
	(gdb.base/return.exp)
	* config/rs6000/tm-rs6000.h: Doc fixes.

1998-12-03  Jason Molenda  (jsm@bugshack.cygnus.com)

        * monitor.c (monitor_read_memory): Zero out pattern buffers
        before calling re_search.
        (parse_register_dump): Ditto.

Thu Dec  3 10:37:22 EST 1998  Zdenek Radouch   (radouch@cygnus.com)

	FR30 updates - still very preliminary.
	* configure.tgt
	* fr30-tdep.c
	* config/fr30/tm-fr30.h
	
Thu Dec  3 16:30:35 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* ax-gdb.c: Include target.h.

Tue Dec  3 10:59:00 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* ax-gdb.c (_initialize_ax_gdb), i960-tdep.c (pop_frame),
 	monitor.c (flush_monitor_dcache, longlongendswap), remote-array.c
 	(hexword2ascii), w89k-rom.c (init_w89k_cmds), z8k-tdep.c
 	(init_frame_pc, extract_return_value): Make return type void.
	* monitor.c (monitor_write_even_block): Make return type explicit.
	(monotor_read_memory_block): Delete function.
	* monitor.h: Update.
	* remote.c (remote_get_threadlist, remote_update_threads),
 	remote-array.c (array_get_packet), remote-rdi.c (Fail): Always
 	return a value.
	* m32r-tdep.c (m32r_fix_call_dummy): From Michael Snyder, void
 	function.
	* jv-valprint.c (java_val_print): From Stu Grossman. Return 0 by
 	default.
	
Wed Dec  2 15:11:38 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c: Move default definition of 
	TARGET_VIRTUAL_FRAME_POINTER from here to target.h.
	* target.h: Add default definition of TARGET_VIRTUAL_FRAME_POINTER.
	* ax-gdb.c (gen_frame_args_address, gen_frame_locals_address):
	use TARGET_VIRTUAL_FRAME_POINTER to determine frame pointer.
	(gen_trace_for_expr): new argument, address of tracepoint, 
	gets passed to new_agent_expr and added to struct agent_expr.
	(is_nontrivial_conversion): call to new_agent_expr now requires
	a dummy argument.  (agent_command): use get_current_frame() to
	get current PC scope; pass it to gen_trace_for_expr.
	* ax-general.c (new_agent_expr): new argument, address of 
	tracepoint; store it in new field of struct agent_expr.
	* ax.h (struct agent_expr): add new field for tracepoint address.
	* ax-gdb.h: change prototypes to match above changes.

	* m32r-tdep.c (decode_prologue): If no branch or push fp is found,
	but there's a stack adjust, then use that as the end of prologue.
	(m32r_skip_prologue): don't skip past the first line if there is 
	line info.  (m32r_virtual_frame_pointer): new function.
	(m32r_fix_call_dummy): no return value needed.
	
Tue Dec  1 10:59:00 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* ocd.c (remote_timeout), (BDM_BREAKPOINT), monitor.c (readchar),
 	remote.c: Cleanup closing of open comments.

Mon Nov 30 16:04:03 1998  Doug Evans  <devans@canuck.cygnus.com>

	* config/fr30/tm-fr30.h (INNER_THAN): Add parameters.

Mon Nov 30 11:18:48 1998  Andrew Cagney  <cagney@chook>

	* frame.h (FRAME_CHAIN_VALID): Default to
 	default_frame_chain_valid.
	* blockframe.c (default_frame_chain_valid): New function.
	
	* frame.h (FRAME_CHAIN_VALID_ALTERNATIVE): Delete references
	* blockframe.c (alternate_frame_chain_valid): New function.
	* config/mips/tm-mipsv4.h, config/m88k/tm-delta88v4.h,
 	config/m68k/tm-monitor.h, config/m68k/tm-m68kv4.h,
 	config/i386/tm-i386v4.h, config/i386/tm-i386nw.h,
 	config/h8300/tm-h8300.h: Update.

	* blockframe.c (nonnull_frame_chain_valid): New function.
	* config/m68k/tm-os68k.h, config/m68k/tm-vx68.h,
 	config/m68k/tm-apollo68b.h, config/i960/tm-vx960.h,
 	config/arc/tm-arc.h: Update FRAME_CHAIN_VALID.

	* hppa-tdep.c (frame_chain_valid, hppa_frame_chain_valid),
 	remote-vx29k.c (get_fp_contents, vx29k_frame_chain_valid),
 	arm-tdep.c (frame_chain_valid, arm_frame_chain_valid): Rename
 	functions so that they are name space clean.
	* config/pa/tm-hppa.h, config/a29k/tm-vx29k.h,
 	config/arm/tm-arm.h: Update FRAME_CHAIN_VALID.
	
	* gould-tdep.c (gould_frame_chain_valid), d30v-tdep.c
 	(d30v_frame_chain_valid), d10v-tdep.c (d10v_frame_chain_valid):
 	New functions.
	* config/gould/tm-np1.h, config/gould/tm-pn.h,
 	config/d30v/tm-d30v.h, config/d10v/tm-d10v.h: Update
 	FRAME_CHAIN_VALID.

Sun Nov 29 11:18:37 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* z8k-tdep.c (z8k_addr_bits_remove), w65-tdep.c
 	(w65_addr_bits_remove), h8500-tdep.c (h8500_addr_bits_remove),
 	m88k-tdep.c (m88k_addr_bits_remove): Function to clean up an
 	address.
	* config/z8k/tm-z8k.h, config/w65/tm-w65.h, config/m88k/tm-m88k.h,
 	config/h8500/tm-h8500.h: Define ADDR_BITS_REMOVE to call targets
 	corresponding function.
	* z8k-tdep.c (saved_pc_after_call): Update.

Sat Nov 28 12:24:31 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/z8k/tm-z8k.h, config/w65/tm-w65.h, config/vax/tm-vax.h,
 	config/v850/tm-v850.h, config/tahoe/tm-tahoe.h,
 	config/sparc/tm-sparc.h, config/sh/tm-sh.h,
 	config/rs6000/tm-rs6000.h, config/pyr/tm-pyr.h,
 	config/pa/tm-hppa.h, config/ns32k/tm-umax.h,
 	config/ns32k/tm-merlin.h, config/none/tm-none.h,
 	config/mn10300/tm-mn10300.h, config/mn10200/tm-mn10200.h,
 	config/mips/tm-mips.h, config/m88k/tm-m88k.h,
 	config/m68k/tm-m68k.h, config/m32r/tm-m32r.h,
 	config/i960/tm-i960.h, config/i386/tm-i386.h,
 	config/h8500/tm-h8500.h, config/h8300/tm-h8300.h,
 	config/gould/tm-pn.h, config/gould/tm-np1.h, config/arm/tm-arm.h,
 	config/convex/tm-convex.h, config/d10v/tm-d10v.h,
 	config/alpha/tm-alpha.h, config/a29k/tm-a29k.h: Add parameters to
 	macro INNER_THAN.

	* valops.c (push_word, value_push, call_function_by_hand),
 	breakpoint.c (bpstat_stop_status), blockframe.c
 	(generic_push_dummy_frame, generic_frame_chain_valid), inferior.h
 	(PC_IN_CALL_DUMMY), infrun.c (wait_for_inferior): Update use of
 	INNER_THAN.

Fri Nov 27 11:00:25 1998  Andrew Cagney  <cagney@chook>

	* target.h (one_stepped): Move global from here.
	* infrun.c (singlestep_breakpoints_inserted_p): To here. Rename.
  	Make static.
	(wait_for_inferior): Update.
	(resume): Update. Set variable after call to SOFTWARE_SINGLE_STEP.
	
	* target.h (NO_SINGLE_STEP): Replace with SOFTWARE_SINGLE_STEP_P
 	and SOFTWARE_SINGLE_STEP.
	* config/sparc/tm-sparc.h, config/rs6000/tm-rs6000.h,
 	config/arc/tm-arc.h: Update.
	* rs6000-tdep.c (rs6000_software_single_step), sparc-tdep.c
 	(sparc_software_single_step), arc-tdep.c (arc_single_step): New
 	functions. Replace function single_step.
	
	* config/mips/tm-mips.h (STEP_SKIPS_DELAY_P): Define.
	* infrun.c (proceed): Cleanup.
start-sanitize-sky
	* config/mips/tm-txvu.h (STEP_SKIPS_DELAY), txvu-tdep.c
 	(txvu_step_skips_delay): Change macro to function.

end-sanitize-sky
Thu Nov 26 11:19:15 1998  Andrew Cagney  <cagney@amy.cygnus.com>

	* config/alpha/tm-alpha.h (ABOUT_TO_RETURN): Replace macro.
	* alpha-tdep.c (alpha_about_to_return): With new function.
	(heuristic_proc_start): Update.
	* config/mips/tm-mips.h (ABOUT_TO_RETURN), mips-tdep.c
 	(heuristic_proc_start, mips_about_to_return): Ditto.
	* config/ns32k/tm-merlin.h (ABOUT_TO_RETURN),
 	config/ns32k/tm-umax.h (ABOUT_TO_RETURN), ns32k-tdep.c
 	(ns32k_about_to_return, ns32k_get_enter_addr): Ditto.

	* config/z8k/tm-z8k.h, config/w65/tm-w65.h, config/vax/tm-vax.h,
 	config/tahoe/tm-tahoe.h, config/sparc/tm-sparc.h,
 	config/sh/tm-sh.h, config/rs6000/tm-rs6000.h, config/pyr/tm-pyr.h,
 	config/pa/tm-hppa.h, config/m88k/tm-m88k.h, config/m68k/tm-m68k.h,
 	config/i960/tm-i960.h, config/i386/tm-i386.h,
 	config/h8500/tm-h8500.h, config/h8300/tm-h8300.h,
 	config/gould/tm-pn.h, config/gould/tm-np1.h,
 	config/convex/tm-convex.h, config/arm/tm-arm.h,
 	config/arc/tm-arc.h, config/a29k/tm-a29k.h: Delete macro
 	ABOUT_TO_RETURN.
	* config/w65/tm-w65.h (RTL, RTS): Delete macros.
	* h8500-tdep.c (about_to_return): Delete function.

Thu Nov 26 11:19:15 1998  Andrew Cagney  <cagney@chook.cygnus.com>

	* rs6000-tdep.c (rs6000_breakpoint_from_pc): Change big_breakpoint
 	and little_breakpoint to char[] from char*.
	* remote-array.c (array_insert_breakpoint): Change bp_addr to
 	CORE_ADDR type.

Wed Nov 25 00:13:06 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* vx-share/xdr_ld.c (xdr_ldtabl): Cast second arg to char**
 	instead of char*.

	* configure.tgt (v850): Only build v850ice when cygwin and gui.
	* configure.in: Add parameter to --enable-build-warnings.
	* configure: Re-build.

	* c-exp.y (parse_number): Rewrite shift to pacify GCC.

	* config/i960/tm-i960.h (BREAKPOINT): Delete definition - simply
 	wrong.

	* monitor.c (compile_pattern): Make val const char*.
	(monitor_wait_cleanup): Make old_timeout void*, pointing at
 	old_timeout.
	(monitor_wait): Update.

	* remote-udi.c, remote-sim.c, remote-e7000.c, hppa-tdep.c,
 	remote-mips.c, sparcl-tdep.c, xcoffread.c: Cast parameters passed
 	to make_cleanup to use the new make_cleanup_func typedef.

	* alpha-tdep.c (MASK): Use LONGEST to avoid arithmetic overflow.

	* config/a29k/tm-a29k.h (TRANSPARENT): Rename macro to
 	TRANSPARENT_FRAME. Avoid name-space clash.
	* a29k-tdep.c (init_frame_info): Update.

Wed Nov 25 20:37:00 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* rs6000-tdep.c (rs6000_breakpoint_from_pc): Change big_breakpoint
 	and little_breakpoint to char[] from char*.
	* mem-break.c (memory_insert_breakpoint,
 	memory_remove_breakpoint): Pass address of bplen.
	* remote-array.c (array_insert_breakpoint): Change bp_addr to
 	CORE_ADDR type.

start-sanitize-vr4xxx
1998-11-24  Gavin Romig-Koch  <gavin@cygnus.com>

	* configure.tgt: Handle mips64*vr4xxx.

end-sanitize-vr4xxx
Tue Nov 24 15:46:33 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* config/mn10300/tm-mn10300.h (TARGET_VIRTUAL_FRAME_POINTER):
	new target macro.
	* mn10300-tdep.c (mn10300_virtual_frame_pointer): new function.
	* tracepoint.c (encode_actions): Use the new target macro to
	determine the virtual frame pointer, for collecting locals/args.
	(add_local_symbols, collect_symbol): add a register/offset pair of
	arguments so that the virtual frame pointer can be passed in.

1998-11-24  Felix Lee  <flee@cygnus.com>

	* procfs.c (procfs_wait): handle syscall events first.
	
	* procfs.c (GDB_GREGSET_TYPE, GDB_FPREGSET_TYPE): new macros.
	* config/sparc/xm-sun4sol2.h: use them.
	* core-sol2.c: don't #undef gregset_t and fpregset_t.
	* sol-thread.c: ditto.
	* sparc-tdep.c: ditto.
	
Tue Nov 24 14:13:10 1998  Andrew Cagney  <cagney@chook>

	* breakpoint.c (memory_breakpoint_size): Delete global.
	(read_memory_nobpt): Determine real breakpoint address and size
 	using BREAKPOINT_FROM_PC.

	* defs.h (breakpoint_from_pc_fn): BREAKPOINT_FROM_PC function
 	template.
	* target.h, mem-break.c (memory_breakpoint_from_pc):
 	Rewrite. Always define.  Return NULL when memory breakpoints are
 	not supported.
	(memory_insert_breakpoint, memory_remove_breakpoint): Call
 	BREAKPOINT_FROM_PC.
	* target.h (BREAKPOINT_FROM_PC): Provide default.
	* gdbint.texinfo (BREAKPOINT_FROM_PC): Document.

	* config/rs6000/tm-rs6000.h (BREAKPOINT): Delete macro.
 	(BREAKPOINT_FROM_PC): Define.
 	({BIG,LITTLE}_BREAKPOINT): Move macros from here.
	* rs6000-tdep.c: To here.
 	(rs6000_breakpoint_from_pc): New function.

	* config/mn10300/tm-mn10300.h (BREAKPOINT): Delete macro.
 	(BREAKPOINT_FROM_PC): Define, call.
	* mn10300-tdep.c (mn10300_breakpoint_from_pc): New function.

	* config/mips/tm-mips.h ({BIG,LITTLE}_BREAKPOINT,
 	IDT_{BIG,LITTLE}_BREAKPOINT, PMON_{BIG,LITTLE}_BREAKPOINT,
 	MIPS16_{BIG,LITTLE}_BREAKPOINT): Move macros from here.
	* mips-tdep.c: To here.
start-sanitize-sky
	* txvu-tdep.c (core_break_insn): Delete variable.
	(txvu_insert_breakpoint): Update, use BREAKPOINT_FROM_PC.
end-sanitize-sky

	* config/arm/tm-arm.h ({BIG,LITTLE}_BREAKPOINT): Delete macros.
 	({ARM,THUMB}_{BE,LE}_BREAKPOINT): Move macros from here.
	* arm-tdep.c: To here.
	
	* remote-array.c (memory_breakpoint_size): Delete variable.
	(array_insert_breakpoint): Obtain breakpoint size using
 	BREAKPOINT_FROM_PC.
	* remote-st.c (memory_breakpoint_size, st2000_insert_breakpoint):
 	Ditto.
	* remote-os9k.c (memory_breakpoint_size,
 	rombug_insert_breakpoint): Ditto.
	* remote-e7000.c (memory_breakpoint_size): Ditto.

Mon Nov 23 11:38:40 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* symfile.c (deduce_language_from_filename): rewrite so as to 
	work from a table of filename extensions, modifiable by the user.
	(filename_language_table): new data structure.
	(set_ext_lang_command): new function for new command, "set
	extension-language".  (info_extension_language_command): new
	function for new command "info extension-languages".
	(add_filename_language, init_filename_language_table): new
	support functions for the above.
	* language.c (language_enum): new function.  Support for above.

Mon Nov 23 10:47:54 1998  Andrew Cagney  <cagney@chook.cygnus.com>

	* config/sh/tm-sh.h, config/mn10200/tm-mn10200.h,
 	config/m32r/tm-m32r.h, config/arm/tm-arm.h, config/i960/tm-i960.h,
 	config/gould/tm-np1.h, config/d10v/tm-d10v.h,
 	config/v850/tm-v850.h, config/pa/tm-hppa.h, config/a29k/tm-a29k.h,
 	config/mn10300/tm-mn10300.h, config/mips/tm-mips.h
 	(USE_STRUCT_CONVENTION): Cleanup, define macro as function.
	
	* sh-tdep.c (sh_use_struct_convention), mn10200-tdep.c
 	(mn10200_use_struct_convention), i960-tdep.c
 	(i960_use_struct_convention), gould-tdep.c
 	(gould_use_struct_convention), d10v-tdep.c
 	(d10v_use_struct_convention), v850-tdep.c
 	(v850_use_struct_convention), hppa-tdep.c
 	(hpha_use_struct_convention), m32r-tdep.c
 	(m32r_use_struct_convention), arm-tdep.c
 	(arm_use_struct_convention), mn10300-tdep.c
 	(mn10300_use_struct_convention), a29k-tdep.c
 	(a29k_use_struct_convention), mips-tdep.c
 	(mips_use_struct_convention): New functions

	* value.h, values.c (generic_use_struct_convention): New function,
 	replace macro.
	* values.c (USE_STRUCT_CONVENTION): Macro defaults to function
 	generic_use_struct_convention.

Sat Nov 21 17:15:40 1998  Philippe De Muyter  <phdm@macqel.be>

	* breakpoint.c (bpstat_stop_status): Do not increment hit_count
	of breakpoint if condition is not true. 

	* coffread.c (coff_symtab_read): Discard C_LABEL's that are not
	function entry points, to avoid getting them in the stack dump
	instead of the actual function.

	* config/m68k/delta68.mh (NAT_FILE): Undo 1998-08-18 change;
 	without NAT_FILE definition, configure will assume that GDB cannot
 	run native.
	* config/m68k/nm-delta68.h (KERNEL_U_SIZE): New macro.
	* delta68-nat.c (kernel_u_size): New function.

Fri Nov 20 10:13:03 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* buildsym.c (end_symtab): Cleanup PROCESS_LINENUMBER_HOOK.

Thu Nov 19 15:21:04 1998  Geoffrey Noer  <noer@cygnus.com>

	* rdi-share/host.h: if compiling under Cygwin, make sure new
	preprocessor define is defined.  Define it if not.
	* rdi-share/hostchan.h: ditto
	* rdi-share/aclocal.m4: regenerate
	* rdi-share/configure: regenerate

Thu Nov 19 14:43:44 1998  Geoffrey Noer  <noer@cygnus.com>

	* configure.in: switch back to checking __CYGWIN32__
	* configure: regenerate

Thu Nov 19 09:53:00 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* exec.c (exec_file_command): Cleanup. Replace #if
 	NEED_TEXT_START_END with if().
	* config/pa/nm-hppah.h (NEED_TEXT_START_END): Redefine to be 1.
	* config/convex/tm-convex.h (NEED_TEXT_START_END): Ditto.
	* config/gould/tm-np1.h (NEED_TEXT_START_END): Ditto.
	* config/a29k/tm-a29k.h (NEED_TEXT_START_END): Ditto.

Thu Nov 19 13:06:22 1998  Geoffrey Noer  <noer@cygnus.com>

	* main.c: Wait until more time has passed before calling
	new cygwin_ funcs, revert back to the cygwin32_ ones for now.
	* win32-nat.c: Ditto.

Wed Nov 18 15:03:17 1998  Andrew Cagney  <cagney@chook.cygnus.com>

	* 29k-share/udi/udip2soc.c (UDIConnect): Replace sys_errlist with
 	strerror.

Mon Nov 16 14:17:05 1998  Geoffrey Noer  <noer@cygnus.com>

	* defs.h: if compiling under Cygwin, define __CYGWIN__ if
	__CYGWIN32__ is defined and __CYGWIN__ isn't for backwards
	compatibility.

Fri Nov 13 00:15:08 1998  Geoffrey Noer  <noer@cygnus.com>

	Changes to account for name change from cygwin32 to cygwin and
	clean up Win32-related ifdefs.
	
	* configure.tgt: check for cygwin* instead of cygwin32.
	New cygwin gdb_target variable loses the "32".
	* configure.host: check for cygwin* instead of cygwin32.
	New cygwin gdb_host variable loses the "32".
	* configure.in: test __CYGWIN__ instead of __CYGWIN32__,
	rename gdb_cv_os_cygwin32 variable to drop the "32".  Call
	AM_EXEEXT instead of AC_EXEEXT since that isn't in a released
	autoconf yet.
	* configure: regenerate.

	* main.c: drop "32" from cygwin_ funcs, include sys/cygwin.h where
	cygwin path conv protos live, instead of adding a proto here for
	them here.
        * {main.c, ser-tcp.c, ser-unix.c, top.c}: check __CYGWIN__
	instead of __CYGWIN32__.
	* source.c: thoughout, check _WIN32 instead of WIN32.
	
	* config/i386/cygwin32.mh: delete.
	* config/i386/cygwin.mh: new file, was cygwin32.mh.
	* config/i386/cygwin32.mt: delete.
	* config/i386/cygwin.mt: new file, was cygwin32.mt.
	* config/i386/tm-cygwin32.h: delete.
	* config/i386/tm-cygwin.h: new file, was tm-cygwin32.h.
	* config/i386/xm-cygwin32.h: delete.
	* config/i386/xm-cygwin.h: new file, was xm-cygwin32.h.
	* config/i386/xm-windows.h: #include xm-cygwin.h now.
	* config/powerpc/cygwin32.mh: delete.
	* config/powerpc/cygwin.mh: new file, was cygwin32.mh.
	* config/powerpc/cygwin32.mt: delete.
	* config/powerpc/cygwin.mt: new file, was cygwin32.mt.
	* config/powerpc/tm-cygwin32.h: delete.
	* config/powerpc/tm-cygwin.h: new file, was tm-cygwin32.h.
	* config/powerpc/xm-cygwin32.h: delete.
	* config/powerpc/xm-cygwin.h: new file, was xm-cygwin32.h.

	* rdi-share/aclocal.m4: regenerate with aclocal.
	* rdi-share/configure: regenerate with autoconf.
	* rdi-share/{host.h, hostchan.c, hostchan.h, serdrv.c, serpardr.c,
	unixcomm.c}: check __CYGWIN__ instead of __CYGWIN32__.

Thu Nov 12 17:19:43 1998  John Metzler  <jmetzler@cygnus.com>

        * remote.c (remote_get_threadinfo) : Support for remote
        multithread debugging.
        (remote_get_threadlist) : get a partial list of threads
        (remote_threadlist_iterator) : Step through all the threads
        (init_remote_threadtests) : Optional builtin unit test commands.

        * thread.c (bind_target_thread_vector) : Implementa a more dynamic
        way of accessing target specific thread info functions than 
        FIND_NEW_THREADS.
        (target_thread_info) : Function to get extended thread information.

        * gdbthread.h : Export internal data structures corresponding to
        external detailed thread info response. This is more like a 'ps'
        command than what might be expected of host based threads. This
        is for embedded systems.

Wed Nov 11 15:47:00 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* procfs.c (proc_set_exec_trap): don't set PR_ASYNC or PR_FORK
        in the child process for UnixWare (causes processes forked by 
        the debuggee to hang).

Mon Nov  9 12:00:36 1998  Dave Brolley  <brolley@cygnus.com>

	* config/fr30/fr30.mt: New file.
	* config/fr30/tm-fr30.h: New file.

1998-11-05  Jim Wilson  <wilson@cygnus.com>

	* remote-vx.c (net_read_registers, net_write_registers, 
	vx_xver_memory, vx_resume, vx_attach, vx_detach, vx_kill): 
	Change errno to errno_num.
	* vx-share/xdr_ptrace.c (xdr_ptrace_return): Likewise.
	* vx-share/xdr_ptrace.h (struct ptrace_return): Likewise.

Thu Nov  5 08:41:33 1998  Christopher Faylor <cgf@cygnus.com>

	* top.c (gdb_readline): Allow CRLF line termination on systems
	which define CRLF_SOURCE_FILES.
	* win32-nat.c: 1) Add thread support, 2) fix ability to attach to
	a running process, and 3) implement limited support for cygwin
	signals.
	(thread_rec): New function.
	(child_add_thread): Ditto.
	(child_init_thread_list): Ditto.
	(child_delete_thread): Ditto.
	(do_child_fetch_inferior_registers): Ditto.
	(do_child_store_inferior_registers): Ditto.
	(handle_output_debug_string): Ditto.
	(child_fetch_inferior_registers): Use do_* function to perform
	operation.
	(child_store_inferior_registers): Ditto.
	(child_continue): Ditto.
	(child_thread_alive): Ditto.
	(cygwin_pid_to_str): Ditto.
	(handle_load_dll): Reorganize, add first attempt at reading
	dll names from attached processes.  Change info messages to provide
	more information when dll is already loaded.
	(handle_exception): Changes mandated by new thread-aware structures.
	(child_wait): Track thread creation/destruction.  Handle cygwin
	signals.
	(child_create_inferior): Ditto.
	(child_resume): Ditto.
	(child_kill_inferior): Ditto.  Close child process handle to avoid a
	handle leak.
	(child_ops): Fill out child_ops fields that deal with threads.
	* config/i386/tm-cygwin32.h: Declare function and macro needed
	for converting a cygwin "pid" to a string.
	* config/i386/xm-cygwin32.h: define HAVE_SIGSETMASK as 0 since
	sigsetmask is not defined in cygwin.

Thu Nov  5 08:38:18 1998  Christopher Faylor <cgf@cygnus.com>

	* win32-nat.c: Remove obsolete PPC conditionals.

Wed Nov  4 18:44:31 1998  Dave Brolley  <brolley@cygnus.com>

	* configure.tgt: Add fr30-*-elf*.

1998-11-03  Jim Wilson  <wilson@cygnus.com>

	* c-exp.y (parse_number): Check TARGET_LONG_LONG_BIT when setting
	high_bit to avoid undefined negative shift.

Mon Nov  2 15:26:33 1998  Geoffrey Noer  <noer@cygnus.com>

        * configure.in: Check cygwin* instead of cygwin32*.
	* configure: regenerate

Thu Oct 29 10:04:20 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	[Support for trace debugging: registers that were not collected.]
	* remote.c (remote_fetch_registers): accept 'xxxx' in the register
	packet, with the meaning "register value is not available".
	Set register_valid to -1, which will connote "no value available".
	* findvar.c (read_relative_register_raw_bytes): return failure if
	register_valid == -1.  (value_of_register): return failure if 
	register_valid == -1.  (read_var_value): return error if 
	value_of_register fails for a register variable.
	(value_from_register): return failure if register_valid == -1.
	* eval.c (evaluate_subexp_standard): return error if 
	value_of_register fails for a register used in an expression.
	* infcmd.c (do_registers_info): display "value not available"
	for registers for which register_valid == -1.

	* tracepoint.c (set_raw_tracepoint): just save the filename as is
	from the symbol table, rather than trying to prepend the dir name.
	Also save the bfd section.  (tracepoints_info): use the section
	when looking up the function name.
	* tracepoint.h: add section field to tracepoint struct.

start-sanitize-sky
Wed Oct 28 12:33:52 EST 1998  Frank Ch. Eigler <fche@cygnus.com>

	* configure.in: Accept both -skyb- and -sky- for
	--with-sim-funit/gpu2 options.
	* configure: Rebuilt.

end-sanitize-sky
Wed Oct 28 08:01:38 1998  Mark Alexander  <marka@cygnus.com>

	* sparcl-tdep.c (send_resp, sparclite_serial_start,
	sparclite_serial_write): Use remote_timeout instead of hardcoded
	two second timeout.
	(download): Fix adjustment of a.out load addresses.

Wed Oct 28 12:32:58 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* configure.in (--enable-build-warnings): Finish rename from
 	--enable-warnings.
	(enable-build-warnings): Add -Wpointer-arth, allow =* for
 	sim/common compatibility.
	* configure: Re-generate.

Wed Oct 21 08:44:30 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* 29k-share/udi/udip2soc.c: Replace sys_errlist with strerror().

Thu Oct 22 09:56:55 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/rs6000/aix4.mh (NATDEPFILES): Move xcoffread.o from here.
	* config/rs6000/aix4.mt (TDEPFILES): To here.

Wed Oct 21 10:02:31 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* rdi-share/unixcomm.c: Provide definitions of SERPORT and PARPORT
 	on BSD hosts.

1998-10-19  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in (AM_EXEEXT): Use AC_EXEEXT instead.
	* configure: Regenerated.

Sat Oct 17 17:39:23 1998  Felix Lee  <flee@cygnus.com>

	* core-sol2.c: #include <sys/types.h>, for sol2.7 weirdness.

Fri Oct 16 15:31:38 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* m32r-tdep.c (decode_prologue): Return failure if we reach 
	the end of the function without finding the end of the prologue.

1998-10-16  Jason Molenda  (jsm@bugshack.cygnus.com)

	* command.c copying.c copying.awk core-aout.c core-regset.c
	  corelow.c dcache.c i386-tdep.c i386v4-nat.c i387-tdep.c
	  infcmd.c infptrace.c infrun.c remote.c solib.c symfile.c
	  symmisc.c valarith.c: Add prototypes.

	* defs.h: Add prototype for utils.c::do_run_cleanups.

	* gdbtypes.c: Add prototypes.
	(make_pointer_type): Add braces to remove nested if-else ambiguity.
	(make_reference_type): Ditto.

	* printcmd.c (printf_command): Initialize 'f' and 'string' at 
	function startup to suppress possibly-used-before-initialized warning.

	* remote-utils.c: Add prototypes.
	(sr_pollchar): Add braces to remove nested if-else ambiguity.

	* ser-tcp.c: Add prototypes.
	(wait_for): Add braces to remove nested if-else ambiguity.
	(tcp_readchar): Ditto.

	* ser-unix.c: Add prototypes.
	(get_tty_state): Don't define errno here.
	(hardwire_readchar): Only define 't' if we are compiling in a Cygwin
	environment.

	* symtab.c: Add prototypes.
	(find_methods): Add braces to remove nested if-else ambiguity.
	(search_symbols): Set 'i' to an initial value to suppress a
	possibly-used-before-initialized warning.

	* valops.c: Add prototypes.
	(value_cast): Set 'eltype2' to an initial value to suppress a
	possibly-used-before-initialized warning.
	(value_of_variable): Add braces to remove nested if-else ambiguity.
	(value_of_this): Ditto.

	* valprint.c: Add prototypes.
	(print_floating): Add braces to remove nested if-else ambiguity.

Thu Oct 15 19:50:48 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* tm-sp64.h (SETUP_ARBITRARY_FRAME, FRAME_SPECIFICATION_DYADIC):
	Remove, nevermore used.

Thu Oct 15 16:55:00 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* command.c: Include "wait.h" after, rather than before, <wait.h>.
  	"wait.h" was defining all WIF* macro's instead of filling in those
 	that <wait.h> missed.

1998-10-14  Jason Molenda  (jsm@bugshack.cygnus.com)

	* defs.h: Move _initialize_printcmd, _initialize_stack,
 	_initialize_blockframe out of here and in to their respective .c
 	files.
	* blockframe.c: Move _initialize_blockframe prototype to here.
	* printcmd.c: Move _initialize_printcmd prototype to here.
	* stack.c: Move _initialize_stack prototype to here.

	* source.c, symtab.h: Move _initialize_source prototype to the .c
	file.
	* values.c, value.h: Move _initialize_values prototype to the .c file.
	* gdbthread.h, thread.c: Move _initialize_thread prototype to the .c 
	file.
	* breakpoint.c, breakpoint.h: Move _initialize_breakpoint prototype 
        to the .c file.

	* abug-rom.c alpha-nat.c alpha-tdep.c annotate.c ax-gdb.c bcache.c:
	Standardize comments for the prototype section of these files.

	* configure.in: Look in libc for wctype before looking for it in libc.

Tue Oct 13 18:56:51 1998  Felix Lee  <flee@cygnus.com>

	* sol-thread.c (ps_pstop, etc): simple test for proc_service.h
 	version didn't work for sol2.6; pushed it to autoconf.
	* configure.in (gdb_cv_proc_service_is_old): new test.
	* acconfig.h (PROC_SERVICE_IS_OLD): new define.
	* configure, config.in: regenerate.

1998-10-13  Jason Molenda  (jsm@bugshack.cygnus.com)

	* blockframe.c (find_pc_sect_partial_function): Add braces to avoid
	possible nested-if confusion.
	* breakpoint.c (breakpoint_here_p): Ditto.
	(breakpoint_inserted_here_p): Ditto.
	(breakpoint_thread_match): Ditto.

	* gnu-regex.c: Define _REGEX_RE_COMP only if it isn't already defined.
	* gnu-regex.h: Define _REGEX_RE_COMP to pick up old compatability 
	prototypes.

	* symtab.h: Add prototype for _initialize_source.
	* value.h: Add prototype for _initialize_value.

	* defs.h: Include sys/types.h or stddef.h to get size_t.
	(make_cleanup): Add make_cleanup_func typedef and switch to using 
        a prototype for this function.
	(mfree): Add prototypes for mmalloc, mrealloc, mfree if we aren't
	using mmalloc.

	* ax-gdb.c breakpoint.c coffread.c corelow.c dbxread.c dwarf2read.c 
        dwarfread.c elfread.c eval.c exec.c gdbtk-cmds.c gdbtk.c infcmd.c 
        infrun.c mipsread.c nlmread.c os9kread.c parse.c printcmd.c symfile.c 
        symmisc.c symtab.c thread.c top.c tracepoint.c typeprint.c valops.c:   
        Cast parameters passed to make_cleanup to use the new 
        make_cleanup_func typedef.

Tue Oct 13 00:51:48 1998  Felix Lee  <flee@cygnus.com>

	* sol-thread.c (ps_pstop, etc): different solaris versions have
 	slightly different prototypes in proc_service.h; compensate.

1998-10-12  Jason Molenda  (jsm@bugshack.cygnus.com)

        * Makefile.in (AWK): Unused; remove.
        * configure.in: Remove unused autoconf checks for MINIX, memcpy,
        poll, select, strings.h.
        * config.in: Regenerated.
        * configure: Regenerated.

1998-10-12  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in: Check for sys/debugreg.h, asm/debugreg.h.
	* i386v-nat.c: Include asm/debugreg.h, sys/debugreg.h if it is not
	present.

Sun Oct 11 12:08:07 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* dwarf2read.c (dwarf2_build_psymtabs_hard):  Do not adjust the
	address range of a compilation unit without children.

	* mdebugread.c (parse_partial_symbols):  Fix handling of stabs
	continuations, use xmalloc and xrealloc.

Fri Oct  9 18:14:43 1998  Mark Alexander  <marka@cygnus.com>

	* rs6000-tdep.c: Don't include tm.h twice.

1998-10-08  Keith Seitz  <keiths@cygnus.com>

	* main.c (main): Remove calls to {pre,post}_add_symbol_hooks.
	There should be sufficient information/hooks now to eliminate
	this hack.

	* exec.c (file_command): Add a new hook here to inform ui's
	when the exec file has changed. Adding it here allows the
	ui to be informed after symbol reading.

	* gdbcore.h: Add declaration of file_changed_hook.

Thu Oct  8 08:40:42 1998  Mark Alexander  <marka@cygnus.com>

	* rs6000-tdep.c (get_saved_register): Define only if
	USE_GENERIC_DUMMY_FRAMES is defined.

start-sanitize-carp
Tue Oct  6 21:35:10 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* configure.in (--enable-targets): New config option.  Code taken
 	from ../opcode/configure.in.
start-sanitize-cygnus
	(--enable-carp): New config option. Overrides configure.tgt and
 	sets gdb_target + gdb_target_cpu to carp. XXX - this is tempoary.
end-sanitize-cygnus
	* configure: Re-generate.

	* Makefile.in (DEPFILES): Add TARGET_OBS.
	(TARGET_OBS): Defined by configure.

start-sanitize-cygnus
	* config/carp/carp.mt, config/carp/tm-carp.h: Pseudo configuration
 	for carp target. XXX - this is tempoary.
end-sanitize-cygnus

end-sanitize-carp
1998-10-06  Jason Molenda  (jsm@bugshack.cygnus.com)

 	Eliminate a few warnings from the compiler.
	* breakpoint.h: Add prototype.
	* breakpoint.c (do_enable_breakpoint): cast mem_cnt, i to (void).
	* configure.in: Check if strdup declaration is necessary.
	* configure: Regenerated.
	* defs.h: Add prototypes.
	* gdb_string.h: Only define strdup if necessary.
	* gdbthread.h: Add prototypes.
	* printcmd.c: Add prototyptes.
	(disassemble_command): Remove unused variable 'section'.
	* symtab.c: Add prototypes.
	* symtab.h: Include gnu-regex.h, add prototype.
	* thread.c: Add prototype.

Mon Oct  5 19:44:39 1998  Stan Shebs  <shebs@andros.cygnus.com>

	From David Purves  <purves@apogee.com>:
	* stabsread.c (rs6000_builtin_type): Create a complex float instead
	of an error.
	(read_sun_floating_type): Similarly.
	(read_range_type): Create a complex float if self_subrange is
 	true.

Fri Oct  2 19:42:31 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* c-lang.c (emit_char c_printchar c_printstr), c-lang.h (c_printstr)
	ch-lang.c (chill_printstr chill_printchar) c-valprint.c (c_val_print)
	ch-valprint.c (chill_val_print) expprint.c (print_subexp) f-lang.c
	(f_printstr f_printchar emit_char) f-valprint.c (f_val_print) 
	jv-lang.c (java_printchar java_emit_char) jv-valprint.c 
	(java_value_print java_val_print) language.c (unk_lang_printchar 
	unk_lang_printstr unk_lang_emit_char) language.h (struct 
	language_defn LA_PRINT_STRING LA_EMIT_CHAR) m2-lang.c (m2_printstr 
	m2_printchar emit_char) printcmd.c (print_formatted) scm-lang.c 
	(scm_printstr) valprint.c (val_print_string) value.h 
	(val_print_string):  Add emit_char routines to language_desc struct 
	to allow finer control over language specific character output issues.
  	Add character width arg to printstr routines to allow handling of 
	wchar_t/Unicode strings.  Fix c_printstr to handle wide characters.
  	Supply width argument to LA_PRINT_STRING and val_print_string.

	* jv-lang.c (java_object_type dynamics_objfile java_link_class_type
	get_dynamics_objfile get_java_object_type) jv-lang.h
	(get_java_object_type):  Make lots of things static.

	* expprint.c (dump_prefix_expression dump_subexp):  Move opcode name
	printing to common routine (op_name).
	* (dump_subexp):  Add support for OP_SCOPE.

Fri Oct  2 16:25:54 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* configure.host (i[3456]86-*-windows): Remove, no longer used.
	* mswin: Remove directory, no longer used.

Fri Oct  2 18:52:20 1998  Fernando Nasser  <fnasser@cygnus.com>

	* sol-thread.c: Fixed prototypes and calls to supply_fpregset and
 	fill_fpregset

1998-10-02  Keith Seitz  <keiths@cygnus.com>

	* remote.c (remote_interrupt): Rewrite to use remote_stop.
	(remote_interrupt_twice): Remove. remote_stop now handles it.
	(remote_stop): New function which handles interrupting the
	remote target so that CLUI and GUI use the same core functions
	to achieve the same goal.
	(remote_wait): Change to handle remote_stop properly.
	[interrupted_already]: New static global to help remote_stop.
	[remote_ops, extended_remote_ops]: Add remote_stop for to_stop member.

	* target.c: Rename static function "ignore" to "target_ignore" and
	export it so that gdb can determin if some target vector member is
	actually not defined. Replace all occurances of ignore.

	* target.h: Export target_ignore.

Fri Oct  2 03:51:48 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* target.c (target_xfer_memory):  Handle requests with zero
	transfer length right away.

	* values.c (unpack_double):  Set up code, length and signedness of
	type _after_ checking for typedef.

Thu Oct  1 15:39:27 EDT 1998 Frank Ch. Eigler <fche@cygnus.com>

	* breakpoint.c (bpstat_stop_status): Do not consider an
	untripped watchpoint as a "hit".

Thu Oct  1 20:52:39 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* exec.c (exec_file_command), convex-tdep.c (exec_file_command),
 	arm-xdep.c (exec_file_command), remote-rdp.c
 	(remote_rdp_create_inferior), remote-os9k.c
 	(rombug_create_inferior), remote-mm.c (mm_create_inferior),
 	remote-eb.c (eb_create_inferior), remote-es.c
 	(es1800_create_inferior), remote-rdi.c (arm_rdi_create_inferior),
 	remote-sim.c (gdbsim_create_inferior), remote-utils.c
 	(gr_create_inferior), remote-st.c (st2000_create_inferior),
 	remote-nindy.c (nindy_create_inferior), remote-hms.c
 	(hms_create_inferior), remote-e7000.c (e7000_create_inferior),
 	remote-array.c (array_create_inferior), remote-adapt.c
 	(adapt_create_inferior): Replace "exec" with "executable" in
 	messages.

1998-09-25  Keith Seitz  <keiths@cygnus.com>

        * rdi-share/unixcomm.c: If using cygwin32, also use the SERPORT and
        PARPORT defines for win32.
        (Unix_MatchValidSerialDevice): For cygwin32, valid serial port names
        start with "com", not "/dev/tty".
        (Unix_OpenSerial): Do not use O_NONBLOCK on cygwin32.

        * rdi-share/devsw.c (DevSW_Close): Free the device's state 
        (SwitcherState) so that the device may be reopened.

        * remote-rdi.c (mywritec): Send all output through gdb's *_unfiltered
        functions, ignoring non-ASCII chars, so that non-tty UI's can snarf
        the output from fputs_hook.
        (mywrite): Ditto.
        (arm_rdi_open): Set inferior_pid.
        (arm_rdi_detach): Pop the target off the target stack so that
        users can attach and detach multiple times.
        (arm_rdi_close): Close the opened device and reset inferior_pid, too.

1998-09-24  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in: Change --enable-warnings to --enable-build-warnings.
	* configure: Updated.

1998-09-24  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in (WARN_CFLAGS): Add -Wmissing-prototypes.
	* configure: Regenerated.

1998-09-24  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in: Add --enable-warnings.
	Adjust whitespace of other --with and --enable options so that
	configure --help lines up correctly.
	* aclocal.m4: Ditto.
	* Makefile.in (WARN_CFLAGS): Add.  Set by configure.
	* configure: Regenerated.

Thu Sep 24 15:44:34 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-rdi.c: Fix formatting, remove some commented-out code.
	(init_rdi_ops): Omit needless initializations.

Wed Sep 23 18:21:03 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote.c (remote_address_masked): New function - mask address
 	according to REMOTE_ADDRESS_SIZE.
	(remote_address_size): New global.
	(hexnumstr): New function - convert arbitrary unsigned to hex.
	(remote_write_bytes, remote_read_bytes): Use hexnumstr to
 	construct packet address.  Mask address when necessary.
	(_initialize_remote): Add "set remoteaddresssize" command, set
 	REMOTE_ADDRESS_SIZE variable.

	* NEWS: Update.

Wed Sep 23 18:08:52 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote.c (_initialize_remote, packet_command, print_packet):
	Pretty print code.

Wed Sep 23 12:32:54 1998    <cagney@amy.cygnus.com>

	* remote.c (packet_command): Test REMOTE_DESC to determine if
 	remote connection is open.

Tue Sep 22 22:27:24 1998  Mark Alexander  <marka@cygnus.com>

	Patch from Dawn Perchik <dawn@cygnus.com>:
	* rs6000-tdep.c (pop_frame): Handle generic dummy frames.
	(push_arguments): Likewise.
	(frame_saved_pc): Likewise.
	(rs6000_frame_chain): Likewise.
	(ppc_push_return_address): New function.
	(get_saved_register): New function.
	* config/powerpc/tm-ppc-eabi.h: Add generic dummy frame macros.

Mon Sep 21 19:29:32 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* defs.h utils.c (fputc_filtered):  New function.  Does the obvious...
	* jv-lang.c (java_printchar):  Fix output of chars > 0xff.  Fold
	java_emit_char into java_printchar.
	* language.h (PRINT_LITERAL_FORM):  Reformat for readability.

Mon Sep 21 14:38:03 1998  Catherine Moore <clm@cygnus.com>

	* config/arm/tm-arm.h (*_BREAKPOINT): Define both little endian
	and big endian breakpoint patterns.

	* arm-tdep.c (arm_break_point_from_pc):  Insert either big endian
	or little endian breakpoints depending upon target byte order.

start-sanitize-sky
Sun Sep 20 23:11:41 1998  Ron Unrau  <runrau@cygnus.com>

	* incorporate SKY-B changes (makes dual maintenance easier).
	* txvu-tdep.c (check_overlap): new function to guarantee that 
	  overlays are either mapped or unmapped in their entirety.
	* txvu-tdep.c (compress_blockvector): compress blockvectors correctly

end-sanitize-sky
Fri Sep 18 07:53:08 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* sol-thread.c (sol_thread_notice_signals):  Use PIDGET when
	passing pid down to procfs_notice_signals.

Wed Sep 16 14:57:14 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* stabsread.c (resolve_symbol_reference):  Return 1 on success, 0 on
	failure.
	* (define_symbol):  Check return value from resolve_symbol_reference,
	and drop symbol if it fails.

Tue Sep 15 15:24:16 1998  Stu Grossman  <grossman@fencer.cygnus.com>

	* stabsread.c:  Make all complaints static.
	* Fix formatting of live range splitting code.
	* (resolve_symbol_reference define_symbol resolve_live_range):  Change
	errors to complaints so that bad live range symbols won't abort the
	entire symbol table.  Handle errors by aborting just the current
	symbol.
	* (ref_init):  Goes away.  Folded into ref_add().
	* (REF_MAP_SIZE):  Put parens around parameter so that args like
	`1 + 2' get handled correctly (yes, this was a real bug).
	* (ref_add):  Remove check for allocation failures.  Not necessary
	when using xrealloc().  Fix pointer arithmetic problem when clearing
	memory.  This and the previous patch prevent random SEGV's when there
	are lots of live range symbols.

Tue Sep 15 14:02:01 1998  Nick Clifton  <nickc@cygnus.com>

	* remote-rdi.c: Prevent multiple attempts to close the remote
	connection. 

Tue Sep 15 10:24:17 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* printcmd.c (examine_i_type): New static - type for instructions.
	(do_examine): For "i" format, specify examine_i_type.
	(do_examine): Call value_at_lazy instead of value_at so that
 	examine data is only fetched if it is used.
	(x_command): If examine data was not fetched, set convenience
 	variable "__" to void.
	(_initialize_printcmd): Initialize examine_i_type.

Sun Sep 13 01:34:59 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

 	* blockframe.c (find_pc_sect_partial_function): use bfd section 
	  of msymbol for end of section comparison.

Fri Sep 11 14:02:49 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c: clean up several unused variables and such.

Fri Sep 11 12:38:34 EDT 1998  Zdenek Radouch   (radouch@cygnus.com)

	* arm-tdep.c (arm_push_arguments): fixed frame construction

Thu Sep 10 20:51:23 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* mn10300-tdep.c (mn10300_analyze_prologue): guard against NULL.

Wed Sep  9 19:37:36 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* dbxread.c (IGNORE_SYMBOL): Remove definition, is never used.
	* os9kread.c: Remove comment mentioning IGNORE_SYMBOL.

Wed Sep  9 11:39:05 1998  Ron Unrau  <runrau@cygnus.com>

	* blockframe.c(find_pc_sect_partial_function): look for min syms in
	  the same section when trying to guess the end of a function.
	* symfile.c(list_overlays_command): use print_address_numeric
	* remote-sim.c: export simulator_command
start-sanitize-r5900
	* tm-r5900.h: add COP0 registers
end-sanitize-r5900
start-sanitize-sky
	* txvu-tdep.c: printvector and printvector-order commands
	* tm-txvu.h: add COP0 registers
	* mips-tdep.c: use NUM_CORE_REGS
end-sanitize-sky

1998-09-08  Jason Molenda  (jsm@bugshack.cygnus.com)

	* breakpoint.c (bpstat_stop_status):  Declare a bp match if the
	current fp matches the bp->fp OR if the current fp is less than
	the bp->fp if we're looking at a bp_step_resume breakpoint.

Tue Sep  8 19:42:58 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* symtab.h (struct symtab): Remove EXTRA_SYMTAB_INFO hook,
	not currently used.
	* symfile.c (allocate_symtab): Deprecate use of
	INIT_EXTRA_SYMTAB_INFO here.

Fri Sep  4 15:33:25 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* README: Update remote debugging and testsuite info.

Thu Sep  3 13:50:20 1998  Mark Alexander  <marka@cygnus.com>

	* config/mn10300/tm-mn10300.h (FP_REGNUM): Redefine to be a
	pseudo-register, not the same as a3.
	(D2_REGNUM, D3_REGNUM, A2_REGNUM, A3_REGNUM): Define.
	* mn10300-tdep.c (fix_frame_pointer): New function.
	(set_movm_offsets): Use register number macros instead of
	hard-coded constants.
	(mn10300_analyze_prologue): Fix to handle redefinition of FP_REGNUM.
	(mn10300_frame_chain):  Fix to handle redefinition of FP_REGNUM;
	use register number macros instead of hard-coded constants;
	add missing parameter to call of mn10300_analyze_prologue.
	(mn10300_frame_saved_pc): Use register number macros instead of
	hard-coded constants.

Tue Sep  1 12:04:57 EDT 1998  Zdenek Radouch   (radouch@cygnus.com)

	Changes to support/fix ARM/ELF port.  Use MAKE_MSYMBOL_SPECIAL for
	both ELF and COFF;
	* elfread.c (elf_symtab_read): use ELF specific macro
	* coffread.c (coff_symtab_read): use COFF_MAKE_MSYMBOL_SPECIAL()
	* arm-tdep.c: separate COFF and ELF thumb processing
			disable --mapcs-float processing
	* dwarf2read.c: Disabled building of minimal symbols
	* config/arm/tm-arm.h: new macros for distinguishing arm/thumb
	* config/mips/tm-mips.h: use ELF specific macro

Mon Aug 31 15:42:10 1998  Tom Tromey  <tromey@cygnus.com>

	* top.c (context_hook): Define.

Tue Aug 25 13:21:58 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* ax-gdb.c (gen_var_ref): Allow for typedef types.
	(gen_cast, gen_bitfield_ref, gen_expr, gen_deref): ditto.

Mon Aug 24 18:29:03 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (collect_symbol): Handle register doubles that
	are stored in two registers.

Mon Aug 24 14:39:08 1998  Mark Alexander  <marka@cygnus.com>

	* sh-stub.c (undoSStep): Improve comment.
	* sparc-tdep.c (sparc_extract_struct_value_address): Simplify to use
	same method on both 32-bit and 64-bit machines.
	* sparcl-tdep.c (sparclite_check_watch_resources): Simulator doesn't
	support hardware breakpoints.
	* config/sparc/tm-sparc.h (CALL_DUMMY): Improve comments.

1998-08-20  Jason Molenda  (jsm@bugshack.cygnus.com)

        * rdi-share/Makefile.am (INCLUDES): Fix typeo.
        * rdi-share/Makefile.in: Regenerated.

1998-08-19  Jason Molenda  (jsm@bugshack.cygnus.com)

        * rdi-share/Makefile.am: Use just `INCLUDES' not `libname_INCLUDES'.
        * rdi-share/Makefile.in: Regenerated.

1998-08-19  Keith Seitz  <keiths@cygnus.com>

	* v850ice.c (v850ice_stop): New function to stop the ICE.
	(v850ice_load) Pass filename to ICE DLL.
	(ice_stepi, ice_nexti, ice_cont): Do not directly call the gdb
	commands -- let the GUI do it so that it can retain control
	of the display.

Wed Aug 19 15:53:52 1998  Anthony Green  <green@hoser.cygnus.com>

	* i386v4-nat.c: Include sys/reg.h if present.

Wed Aug 19 03:07:53 1998  Richard Henderson  <rth@cygnus.com>

	* config/alpha/alpha-linux (XDEPFILES): Build ser-tcp.

1998-08-18  Fernando Nasser  <fnasser@totem.to.cygnus.com>

        * symtab.c (decode_line_1): For minimal symbol, SKIP_PROLOG to
        make sure we stop after the frame pointer is locaded and backtrace
        prints an accurate stack.  Complements changes made on Mon Jul 27
        10:45:56 1998
        (decode_line_2): Replaced the whitespace after ">" in a prompt
        which has been taken away by changes made on Sun Jul 19 02:11:45
        1998

1998-08-18  Keith Seitz  <keiths@cygnus.com>

	* stack.c: Define new hook, selected_frame_level_changed_hook, which
	will be called whenever the selected stack level changes.
	(select_frame): Call the selected_frame_level_changed_hook.

Tue Aug 18 18:03:42 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-rdi.c (arm_rdi_open): Pass serial device name to
 	Adp_OpenDevice, and include it in error reports.

1998-08-18  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in: Add more header files to AC_CHECK_HEADERS.
	* configure: Regenerated.

	* command.c: Include wait.h or sys/wait.h if present.
	* inftarg.c: Ditto.
	* core-aout.c: Include ptrace.h or sys/ptrace.h if present, based
	on autoconf test.
	* infptrace.c: Ditto.

	* expprint.c: Include ctype.h for isprint prototype.
	* i386aix-nat.c: Include sys/reg.h if autoconf says it is present.
	* i386v-nat.c: Include ptrace.h, sys/ptrace.h, and sys/reg.h if 
	present, based on autoconf test.  

	* utils.c: Include curses.h and term.h if present.
	(puts_debug): Change 'carriage_return' local variable to return_p
	to avoid name clash.

	* config/m68k/nm-apollo68b.h: Don't define PTRACE_IN_WRONG_PLACE,
	determine it with autoconf.
        * config/i386/nm-linux.h: Don't define NO_SYS_REG_H, determine it
        with autoconf.
	* config/i386/nm-i386sco.h: Don't define NO_PTRACE_H, determine it 
	with autoconf.
	* config/i386/nm-i386v.h: Ditto.
	* config/i386/nm-symmetry.h: Ditto.
	* config/m88k/xm-cxux.h: Ditto.
	* config/m88k/xm-dgux.h: Ditto.

	* config/m68k/delta68.mh (NAT_FILE): nm-delta68.h no longer necessary.
	* config/m68k/nm-delta68.h: Removed.

Fri Aug 14 11:14:03 1998  Jeffrey A Law  (law@cygnus.com)

	* mn10300-tdep.c (set_movm_offsets): Change second argument to
	be the actual args to movm itself.  All callers changed.  Only set
	fi->fsr.regs[x] if reg X is saved by the movm instruction.

Fri Aug 14 04:18:23 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* sol-thread.c (lwp_to_thread):  Fix error message for failing
	td_ta_map_lwp2thr call.
	(ps_lgetLDT):  Mask off upper bits in GS register when comparing
	with selector.

Wed Aug 12 16:30:01 1998  Frank Ch. Eigler  <fche@cygnus.com>
 
	* remote-sim.c (simulator_command): Reset register cache after
	simulator command.

Wed Aug 12 09:00:26 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* expprint.c (dump_prefix/postfix_expression):  Don't try to print
	type expressions.

Tue Aug 11 11:33:25 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* c-typeprint.c (c_print_type):  Don't crash if varstring is null.
	* expprint.c expression.h (dump_expression):  Rename to
	dump_prefix_expression. 
	* Print out the expression in normal form.  Call print_longest
	instead of trying to do it ourselves.
	* (dump_postfix_expression):  New function, prints out the expression
	with indentation and better formatting and interpretation.
	* parse.c (parse_exp_1):  Put calls to dump expressions under ifdef
	MAINTENANCE_CMDS and expressiondebug variable.

Thu Aug 6 13:20:02 1998  Ron Unrau  <runrau@cygnus.com>

	* infrun.c (wait_for_inferior): use stop_func_name instead of 
	  stop_func_start to decide that no debug info exists.

start-sanitize-sky
Thu Aug 6 13:15:05 1998  Ron Unrau  <runrau@cygnus.com>

	* txvu-tdep.c: add VU0/1 control registers
	* config/mips/tm-txvu.h: ditto

Tue Aug 4 11:02:50 1998  Ron Unrau  <runrau@cygnus.com>

	* txvu-tdep.c (txvu_insert_breakpoint): make sure CPU context is
	  set to correct VU memory space.
	  (txvu_remove_breakpoint): use this instead of txvu_breakpoint_from_pc
	* config/tm-txvu.h: use new track-table address
	  Do note define BREAKPOINT_FROM_PC anymore

Fri Jul 31 16:06:05 1998  Ron Unrau  <runrau@cygnus.com>

	* config/tm-txvu.h: use NUM_CORE_REGS instead of NUM_R5900_REGS
	* mips-tdep.c: use NUM_CORE_REGS
	* txvu-tdep.c: use NUM_CORE_REGS, add function prototypes
	(txvu_insert_breakpoints): use VIF interrupt bit

end-sanitize-sky
Thu Jul 30 13:53:50 1998  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (mask_address_p): New variable.
	(mips_addr_bits_remove): Test mask_address_p to decide whether
	to mask off the upper 32 bits of addresses.
	(_initialize_mips_tdep): Add command to set mask_address_p.
	(mips_call_dummy_address): New function.
	* config/mips/tm-mips.h (CALL_DUMMY_ADDRESS): Redefine to
	call mips_call_dummy_address.

1998-07-29  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* symfile.c (add_symbol_file_command): Test for the from_tty
	parameter and avoid query when not interactive.

start-sanitize-am33
Wed Jul 29 10:39:29 1998  Jeffrey A Law  (law@cygnus.com)

	* mn10300-tdep.c (set_movm_offsets): Do nothing for the am33
	registers if we are not in am33 mode.
	(mn10300_frame_chain, mn10300_frame_saved_pc): Similarly.
	(set_machine_hook): Keep track of whether or not we're in am33 mode.

end-sanitize-am33
Mon Jul 27 16:11:42 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (remote_set_transparent_ranges): new function.
	Send the start and end addresses of all loadable read-only
	sections down to the trace target, so that it can treat them
	as "transparent" (ie. don't care if they were collected or not).

Mon Jul 27 15:38:07 1998  Mark Alexander  <marka@cygnus.com>

	* mn10300-tdep.c (mn10300_analyze_prologue): Undo previous fix
	for setting frame address in optimized code; made unnecessary
	by compiler fixes.

Mon Jul 27 10:45:56 1998  Martin M. Hunt  <hunt@cygnus.com>

	* symtab.c (decode_line_1): For minimal symbol, call 
	find_pc_sect_line() to make sure the line number gets set 
	properly.
	(print_symbol_info): Redeclare function void.

1998-07-27  Jason Molenda  (jsm@bugshack.cygnus.com)

	* config/d10v/tm-d10v.h (REGISTER_NAMES): sp -> r15.  The
	stack pointer et al are synthesized from the SP_REGNUM (etc)
	defines and should not be mentioned in REGISTER_NAMES.

start-sanitize-am33
Mon Jul 27 08:54:41 1998  Jeffrey A Law  (law@cygnus.com)

	* mn10300-tdep.c (mn10300_frame_chain): Account for space saved
	by am33 register saves.
	(mn10300_frame_saved_pc): Similarly.

end-sanitize-am33
Fri Jul 24 14:41:19 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (encode_actions): Treat register names and simple
	variable names as special cases and don't convert them to byte-
	codes: these things can be collected far more efficiently 
	without invoking the bytecode interpreter.

Fri Jul 24 13:32:46 1998  Mark Alexander  <marka@cygnus.com>

	* config/i386/tm-i386.h (STORE_STRUCT_RETURN): Make it
	work on hosts of any endianness.
	* config/i386/tm-i386v.h: Ditto.

Fri Jul 24 07:41:12 1998  Mark Alexander  <marka@cygnus.com>

	* mn10300-tdep.c (set_movm_offsets): New helper function
	for mn10300_analyze_prologue.
	(mn10300_analyze_prologue): Simplify by factoring out common code.
	Fix bugs in setting frame address for optimized code.
	Use read_memory_nobpt instead of target_read_memory.

Thu Jul 23 17:01:17 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (collect_symbol): handle LOC_ARG case.

Thu Jul 23 15:07:40 1998  Dawn Perchik  <dawn@cygnus.com>

	* sparc-tdep.c (sparc_init_extra_frame_info): Recognize when we're
	in a function prologue before the SAVE instruction.
	(sparc_frame_saved_pc): Ditto.
	* config/sparc/tm-sparc.h (EXTRA_FRAME_INFO): Add in_prologue flag.

Thu Jul 23 14:58:09 1998  Dawn Perchik  <dawn@cygnus.com>

	* i386-tdep.c (i386_get_frame_setup): Recognize function
	prologues in code compiled with -fcheck-stack.

Thu Jul 23 14:49:27 1998  Dawn Perchik  <dawn@cygnus.com>

	* remote-mips.c (remote_mips_insert_hw_breakpoint,
	remote_mips_remove_hw_breakpoint): New functions for hardware
	breakpoints on LSI targets.
	* config/mips/tm-embed.h (target_remove_hw_breakpoint,
	target_insert_hw_breakpoint): Define to call
	remote_mips_insert_hw_breakpoint and remote_mips_remove_hw_breakpoint,
	respectively.

start-sanitize-sky
Thu Jul 23 13:00:28 1998  Ian Carmichael  <iancarm@cygnus.com>

        * txvu-tdep.c: (VU0_MEM0_WINDOW_START, VU1_MEM0_WINDOW_START)
        Changed to use addresses in kseg1 range.

end-sanitize-sky
1998-07-21  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* source.c (print_source_lines): Print "No such file or directory"
	just once.
	(directory_command): same as above; resets if user issues dir.

Sun Jul 19 02:11:45 1998  Martin M. Hunt  <hunt@cygnus.com>

	* symtab.c (decode_line_2): Instead of printing a prompt
	and calling command_line_input() without a prompt, just
	call it with the proper args.  This makes the GUI work too.

Fri Jul 17 9:26:50 1998  Ron Unrau  <runrau@cygnus.com>

	* blockframe.c (find_pc_sect_partial_function): allow for the possi-
	  bility of multiple symbols at the same address when finding high.
	* breakpoint.c (resolve_sal_pc): if the function based section lookup
	  fails, try getting the section from the minimal symbol table.
	* parse.c (write_exp_msymbol): use symbol_overlayed_address to get
	  the LMA of a minimal symbol if unmapped.
	* symtab.c (find_line_symtab): change interface to return symtab 
	  containing the best linetable found.
	  (decode_line_1): use find_line_symtab to set val.symtab. This should
	  improve support for source files with multiple symtabs.
start-sanitize-sky
	* tm-txvu.h: include tm-mips64.h instead of starting from scratch.
end-sanitize-sky

Wed Jul 15 11:51:33 1998  Keith Seitz  <keiths@cygnus.com>

	* main.c (main): Fix violations of GNU coding standard.

	* breakpoint.c: Export delete_command.

	* infcmd.c: Export continue_command, stepi_command, and nexti_command.

	* Makefile.in: Add target for v850ice.o.

	* configure.tgt: Add cygwin32 dependencies for v850 ice.

Wed Jul 15 10:58:29 1998  Nick Clifton  <nickc@cygnus.com>

	* tracepoint.c (set_raw_tracepoint): Cope with symbols that do not
	have an associated directory.

Mon Jul 13 15:21:04 1998  Mark Alexander  <marka@cygnus.com>

	* utils.c (puts_debug): Display non-printable characters in hex
	instead of octal.

Thu Jul  9 16:16:47 1998  Jeffrey A Law  (law@cygnus.com)

	* mn10300-tdep.c (mn10300_generic_register_names): New variable.
	(set_machine_hook): New function.  Copy the appropriate register
	names into reg_names.
	(_initialize_mn10300_tdep): Set up to call set_machine_hook.
	* tm-mn10300 (NUM_REGS): Bump to 32.
	(REGISTER_NAMES): Updated accordingly.

start-sanitize-am33
	* mn10300-tdep.c (am33_register_names): New variable.
	(mn10300_analyze_prologue): Handle regs saved by am33 prologues.
	* tm-mn10300.h (E0_REGNUM): Define.
end-sanitize-am33

Tue Jul 7 7:40:13 1998  Ron Unrau  <runrau@cygnus.com>

	* symtab.c (find_pc_sect_psymbol): allow case where textlow is 0

Thu Jul  2 15:57:58 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* breakpoint.c (resolve_sal_pc): Accept absence of innermost
	Lexical block for breakpoint resolution.

Thu Jul 2 10:22:00 1998  Dawn Perchik  <dawn@cygnus.com>

	* mdebugread.c (parse_partial_symbols): Go ahead and read the .mdebug
	section, but just don't add a 2nd minimal symbol if this is an .mdebug 
	section in an ELF file.

1998-07-01  Jim Blandy  <jimb@zwingli.cygnus.com>

	* Makefile.in (ax-general.o): Depend on $(defs_h) too.
	(ax_h): Bother to define this.

Mon Jun 29 19:01:18 1998  Jim Wilson  <wilson@cygnus.com>

        * gnu-regex.c (re_comp): Add cast to char * before gettext calls.

Sun Jun 28 11:35:48 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	Improve support for SunPro F77.
	* dbxread.c (end_psymtab, process_one_symbol):  Handle minimal
	symbols with trailing underscore names.
	* minsyms.c (find_stab_function_addr):  Ditto.
	* dbxread.c (process_one_symbol):  Ignore N_ALIAS for now.
	* partial-stab.h (case N_ALIAS):  Ditto.
	* stabsread.c (read_sun_builtin_type):  Handle boolean types.

Fri Jun 26 14:03:01 1998  Keith Seitz  <keiths@cygnus.com>

	* symtab.h (enum namespace): Add new namespaces FUNCTIONS_NAMESPACE,
	TYPES_NAMESPACE, METHODS_NAMESPACE, and VARIABLES_NAMESPACE used by
	new search_symbols.
	Add prototype for search_symbols and free_search_symbols.

	* symtab.c (list_symbols): Rewrite to use new search_symbols.
	(file_matches): New helper function for search_symbols.
	(free_search_symbols): New function which frees data returned from
	search_symbols.
	(print_symbol_info): New helper function which prints info about a
	matched symbol to stdout. Extracted from old list_symbols.
	(print_msymbol_info): New helper function which prints info about
	a matched msymbol to stdout. Extracted from old list_symbols.
	(symtab_symbol_info): Extracted from old list_symbols.
	(variables_info): Use symtab_symbol_info.
	(functions_info): Use symtab_symbol_info.
	(types_info): Use symtab_symbol_info.
	(rbreak_command): Rewrite to use new search_symbols.

Thu Jun 25 22:38:32 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* mips-tdep.c (mips_push_arguments): Use 128-bit stack frame
	alignment for inferior calls.

Wed Jun 24 23:17:12 1998  Mark Alexander  <marka@cygnus.com>

	* mn10200-tdep.c (mn10200_analyze_prologue): Fix calculation
	of jsr target address.

Tue Jun 23 19:37:46 1998  Mark Alexander  <marka@cygnus.com>

	* config/mn10200/tm-mn10200.h (SAVED_PC_AFTER_CALL):  Don't
	zero upper byte of address.

Tue Jun 23 17:32:26 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* rs6000-tdep.c (pop_dummy_frame): use memcpy. 
	(push_arguments): use memset.
	(various other places): fix up indentation and long lines.

Tue Jun 23 11:58:35 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* configure.in: s/lXext/-lXext/ for Jillian's change.

Tue Jun 23 11:14:04 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* source.c (find_source_lines): fix indentation.

	* config/mips/tm-irix5.h: Modify to work better on irix 6, by
	making FP registers 8 bytes instead of 4.
	REGISTER_BYTES: redefine.  REGISTER_BYTE(): redefine.
	REGISTER_VIRTUAL_TYPE: redefine.  MIPS_LAST_ARG_REGNUM: redefine.
	* irix5-nat.c (fetch_core_registers): read 8 bytes per FP register.
	* mips-tdep.c (FP_REGISTER_DOUBLE): new macro to distinguish 
	targets with 8-byte FP registers (don't use TARGET_MIPS64).
	(STACK_ARGSIZE): new macro, how much space is taken up on the
	stack for each function argument (don't use TARGET_MIPS64).
	(mips_push_arguments): modify logic to work better on Irix 6
	(n32 ABI).

Tue Jun 23 12:29:53 1998  Jillian Ye  <jillian@cygnus.com>

        * configure.in: Add -lXext to mips_extra_libs
	* configure: Regenerated.
   
Sun Jun 21 09:31:12 1998  Ron Unrau  (runrau@cygnus.com)

	* symtab.c (find_line_pc): assumed that a PC of 0 is illegal.
	  Changed to pass PC as arg and return 1 if valid (0 otherwise).
	  symtab.h: change prototype to match
	  symtab.c (find_line_pc_range): use new interface
	  breakpoint.c (resolve_sal_pc): ditto
	  gdbtk.c (gdb_set_bp): ditto

Wed Jun 17 15:50:00 1998  Ron Unrau  (runrau@cygnus.com)

	* parse.c (target_map_name_to_register): Check target specific 
	  aliases *first* so that it can over-ride architectural names

Wed Jun 17 17:13:38 1998  Said Ziouani  (saidz@park-street.cygnus.com)

	* remote-sds.c (sds_start_remote): Fix printf call.

Tue Jun 16 16:32:08 1998  Mark Alexander  <marka@cygnus.com>

	* mn10200-tdep.c (mn10200_analyze_prologue): Fix null pointer
	crash when in "start".

Tue Jun 16 14:38:40 1998  Ron Unrau  (runrau@cygnus.com)

	* dbxread.c: reset function_start_offset after a finishing N_FUN 
	  is seen.
	* remote-sim.c: allow TARGET_REDEFINE_DEFAULT_OPS to override
	  target vectors as needed.

Sun Jun 14 08:46:25 1998  Ron Unrau  (runrau@cygnus.com)

	* partial-stab.h: 'F' and 'f' type N_FUN psymbols should pass
	  CUR_SYMBOL_VALUE as CORE_ADDR instead of long
	* buildsym.[ch]: export pending_blocks list

Sat Jun 13 13:02:32 1998  Dawn Perchik (dawn@cygnus.com)

	* remote.c: Fix remote help string to match that of help.exp.

Fri Jun 12 14:22:55 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* configure.in (LIBS): Add -lw to the list of libraries if needed.

Thu Jun 11 15:05:10 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* btowc.c: Removed.
	* configure.in: Don't see if we need to replace btowc().
	* Makefile.in: Don't include LIBOBJS.
	* configure: Regenerated.
	* gnu-regex.c (regex_compile): Only support i18n [:foo:] if
	we have btowc().

Wed Jun 10 15:39:14 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* c-exp.y:  Fix problems with parsing "'foo.bar'::func".  
	Some languages allow symbols with dots.

	* gdbtypes.c (check_stub_method):  Cosmetic.  Use more descriptive
	names for parameters.

start-sanitize-java
	* jv-exp.y:  Parser now accepts primitive types.
	* (parse_number):  Use correct ifdef for scanf long double support.
	* jv-lang.c (java_array_type):  Initial cut at array support.

end-sanitize-java
	* language.c language.h (set_language):  Now returns previous language.

	* symtab.c (find_methods):  Make static.  Cosmetic changes, including
	indentation, and adding descriptive comments.  Move local variable 
	defs into the block they are used in.
	* Don't call check_stub_method any more.  Use gdb_mangle_name to
	generate the full method name.  find_method doesn't need all the other
	goobldegook that check_stub_method does.
	* (gdb_mangle_name):  Use more descriptive names for parameters.  Fix
	comment.
start-sanitize-java
	* (lookup_partial_symbol lookup_block_symbol):  Check for java to
	ensure we can find mangled names.
end-sanitize-java
	* (decode_line_1):  Move local variable defs into the block they are
	used in.  (Improves code readability.)

Wed Jun 10 18:04:35 1998  Frank Ch. Eigler  <fche@cygnus.com>
 
	* gdbtypes.c (get_discrete_bounds): Assign unsigned type flag for
	all-positive enum.
	(create_set_type): Ditto for all-positive set values.
	* values.c (unpack_field_as_long): Check for typedef in struct
	field unpacking.

Wed Jun 10 14:06:05 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* configure.in: Add some tests for gnu-regex.c's benefit.
	See if btowc() function is provided in C library.
	* configure, config.in: Regenerated.
	* Makefile.in (CLIBS, CDEPS): Add @LIBOBJS@ to build btowc.c
	if necessary.
	* btowc.c: New file.

	* gnu-regex.c: Reorder wchar.h and wctype.h includes for Solaris'
	benefit.
	Drop namespace preserving defines for now.

Wed Jun 10 11:53:42 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* gnu-regex.c: Include "gnu-regex.h", not "regex.h".

Wed Jun 10 11:34:07 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* gnu-regex.c, gnu-regex.h: Change LGPL license to GPL license
	to stay consistent with the rest of GDB.

Wed Jun 10 11:27:39 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* gnu-regex.c, gnu-regex.h: Update to current FSF (glibc) versions.

Wed Jun 10 10:58:18 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* printcmd.c (disassemble_command): move overlay mapping code
	"up" into find_pc_partial_function.
	* blockframe.c (find_pc_partial_function): adjust start address
	and end address for overlays (mapped vs. unmapped addresses),
	so that all callers of this function may benefit.
	* m32r-tdep.c (m32r_skip_prologue): adjust indentation.

Mon Jun  8 16:08:10 1998  Ron Unrau  <runrau@cygnus.com>

	* objfiles.c (add_to_objfile_sections): All targets to define
	  TARGET_KEEP_SECTION to permit them to retain bfd sections that
	  GDB would otherwise have discarded.

Fri Jun  5 13:56:19 1998  Doug Evans  <devans@canuck.cygnus.com>

	* dbxread.c (read_dbx_symtab): Don't lower texthigh for last psymtab.

Thu Jun  4 18:35:04 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* remote.c (init_extended_remote_ops): Make extended_remote_ops
	by copying from remote_ops, move it and init_remote_ops to
	usual place at end of file, remove "void" from arg lists.

Thu Jun  4 17:51:06 1998  Mark Alexander  <marka@cygnus.com>

	* sparc-tdep.c (sparc_fix_call_dummy): Byte-swap the call dummy
	on bi-endian machines.
	(sparc_extract_return_value): Handle values smaller than int on
	machines with little-endian data.
	(sparc_target_architecture_hook): Set bi_endian flag.

Thu Jun  4 12:14:48 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* printcmd.c (disassemble_command): Fix off-by-one error for
	disassembling functions in unmapped overlay sections.

Thu Jun  4 10:15:03 1998  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* remote.c: merged.

        - Jim Blandy  <jimb@zwingli.cygnus.com>
	(print_packet, remote_packet_command): New functions.
        (_initialize_remote): Register the remote-packet command.
        - David Taylor  <taylor@texas.cygnus.com> 
        (_initialize_remote): remote-compare is now
        compare-sections.
        - Elena Zannoni  <ezannoni@kwikemart.cygnus.com>
         (remote_compare_command): added warning, issued in case
        of mismatch only.

Thu Jun  4 08:25:38 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* remote.c (remote_compare_command): New function, new command.
	Compare object file binary image with corresponding memory on
	remote target.  Report differences.

Tue Jun  2 19:05:04 1998  Mark Alexander  <marka@cygnus.com>

	* sparc-tdep.c (sparc_target_architecture_hook): Set target
	byte order only when it's selectable.

Tue Jun  2 02:01:56 1998  Mark Alexander  <marka@cygnus.com>

	* sparc-tdep.c (sparc_target_architecture_hook): New function to
	set endianness based on machine type.
	(_initialize_sparc_tdep): Initialize target_architecture_hook.
	(sparc_print_register_hook): Print PSR and FPSR in fancy format
	on 32-bit machines.
	* config/sparc/tm-sparc.h (PRINT_REGISTER_HOOK): Redefine to
	call sparc_print_register_hook instead of using inline code.
	* config/sparc/tm-sp64.h (PRINT_REGISTER_HOOK): Remove.

Thu May 28 17:19:14 1998  Keith Seitz  <keiths@cygnus.com>

	* main.c (main): Check for NULL from getenv on CYGWIN32.

Thu May 28 09:41:44 1998  Nick Clifton  <nickc@cygnus.com>

	* monitor.c (monitor_vsprintf): Handle %%.  Patch courtesy of
	Felix Lee (flee@cygnus.com)

Thu May 28 00:27:35 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* mips-tdep.c (mips_push_dummy_frame):  Fix calculation of
	PROC_REG_OFFSET and PROC_FREG_OFFSET.

Mon Apr 27 14:37:49 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/v850/tm-v850.h (REGISTER_BYTE): FP_REGNUM and
 	FP_RAW_REGNUM use the same register location.

	* v850-tdep.c (v850_scan_prologue): Use FP_RAW_REGNUM instead of
 	FP_REGNUM.
	(v850_frame_chain): Ditto.

	* config/v850/tm-v850.h (REGISTER_NAMES): Add "fp".
	(NUM_REGS): Update.
	(FP_REGNUM): Update.
	(FP_RAW_REGNUM): Define.

Wed May 27 14:22:31 1998  Keith Seitz  <keiths@cygnus.com>

	* main.c (main): Convert the path returned from getenv to a posix
	path on cygwin32 hosts.

Mon May 25 13:31:27 1998  Keith Seitz  <keiths@cygnus.com>

	* remote.c (remote_open_1): If an error occurs starting the remote, 
	pop the target AND return.

Sat May 23 02:23:09 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* dwarf2read.c (read_subroutine_type):  Set TYPE_FLAG_PROTOTYPED
	on C++ functions.
	* valops.c (value_arg_coerce):  Add new argument to indicate whether
	the function has a prototype, handle integer and float promotions
	accordingly.
        (call_function_by_hand):  Always call value_arg_coerce, pass down
	prototype information.

Fri May 22 10:56:36 1998  John Metzler  <jmetzler@cygnus.com>

	* remote.c (_initialize_remote): Typo extended__remote

Thu May 21 13:14:25 1998  John Metzler  <jmetzler@cygnus.com>

	* gnu-nat.c (init_gnu_ops): Initialization of target ops by assignment.
	(_initialize_gnu_nat): Call new init
	* mac-nat.c (init_child_ops): Ditto.
	(_initialize_mac_nat): Ditto.
	* monitor.c (init_base_monitor_ops): Ditto.
	(_initialize_remote_monitors): Ditto.
	* ppc-bdm.c (init_bdm_ppc_ops): Ditto.
	(_initialize_bdm_ppc): Ditto.
	* remote-adapt.c (init_adapt_ops): Ditto.
	(_initialize_remote_adapt): Ditto.
	* remote-array.c (init_array_ops): Ditto.
	(_initialize_array): Ditto.
	* remote-bug (init_bug_ops): Ditto.
	(_initialize_remote_bug): Ditto.
	* remote-e7000.c (init_e7000_ops): Ditto.
	(_initialize_remote_e7000): Ditto.
	* remote-eb.c (init_eb_ops): Ditto.
	(_initialize_remote_eb): Ditto.
	* remote-es.c (init_es1800_ops): Ditto.
	(init_es1800_child_ops): Ditto.
	(_initialize_es1800): Ditto.
	* remote-hms.c (init_hms_ops): Ditto.
	(_initialize_remote_hms): Ditto.
	* remote-mm.c (init_mm_ops): Ditto.
	(_initialize_remote_mm): Ditto.
	* remote-nindy.c (init_nindy_ops): Ditto.
	(_initialize_nindy): Ditto.
	* remote_nrom.c (init_nrom_ops): Ditto.
	(_initialize_remote_nrom): Ditto.
	* remote-os9k (init_rombug_ops): Ditto.
	(_initialize_remote_os9k): Ditto.
	* remote-rdi.c (init_rdi_ops): Ditto.
	(_initialize_remote_rdi): Ditto.
	* remote-rdp.c (init_remote_rdp_ops): Ditto.
	(_initialize_remote_rdp): Ditto.
	* remote-sds.c (init_sds_ops): Ditto.
	(_initialize_remote_sds): Ditto.
	* remote-sim.c (init_gdbsim_ops): Ditto.
	(_initialize_remote_sim): Ditto.
	* remote-st.c (init_st2000_ops): Ditto.
	(_initialize_remote_st2000): Ditto.
	* remote-udi.c (init_udi_ops): Ditto.
	(_initialize_remote_udi): Ditto.
	* remote-vx.c (init_vx_ops): Ditto.
	(init_vx_run_ops): Ditto.
	(_initialize_vx): Ditto.
	* remote.c (init_remote_ops): Ditto.
	(init_extended_remote_ops): Ditto.
	(_initialize_remote): Ditto.
	* sparcl-tdep.c (init_sparclite_ops): Ditto.
	(_initialize_sparcl_tdep): Ditto.
	* v850ice.c (init_850ice_ops): Ditto.
	(_initialize_v850ice): Ditto.
	* win32-nat.c: (init_child_ops): Ditto.
	(_initialize_inftarg): Ditto.

1998-05-21  Jim Blandy  <jimb@zwingli.cygnus.com>

	* ax-gdb.c (const_var_ref): Don't handle function names.  I don't
	want to implement all the "usual unary conversion" rules for
	constants.
	(gen_usual_unary): Turn "function" values into "pointer to
	function" values, in accordance with ANSI.
	(gen_deref): Don't do the usual unary conversions here.  Let the
	caller do it.  Note that dereferencing a function pointer yields
	a function designator, which we call an rvalue, not an lvalue.
	(gen_address_of): Handle functions specially.
	(gen_struct_ref): Perform the usual unary conversions before
	calling gen_deref.
	(gen_expr): In case for the prefix '*' operator, call
	gen_usual_unary manually.

Wed May 20 15:29:41 1998  Gavin Koch  <gavin@cygnus.com>

	* mips/tm-tx39.h (MIPS_DEFAULT_FPU_TYPE): Defined as MIPS_FPU_NONE.
	* mips/tm-tx39l.h: Same.

Wed May 20 10:12:11 1998  John Metzler  <jmetzler@cygnus.com>

	* m32r-tdep.c: (decode_prologue): Handle frames compiled with -Os.
        Split out as separate function called by skip prologue and scan
        prologue. new formula handles optimization in which the prologue
        is interleaved with the body of the function. Also recognizes new
        variations of prologue encoding.  Use of frame pointer is
        essential to debugging, -fno-omit-frame-pointer
        (m32r_skip_prologue): Call decode prologue, ignore line info
        (m32r_scan_prologue): Call decode prologue, ignore line info.

Tue May 19 17:23:54 1998  John Metzler  <jmetzler@cygnus.com>

	* w89k-rom.c (_initialize_w89k): Call new init function
	(init_w89k_cmds): Convert to dynamic initialization of monitor_ops 
        data structure for forward compatability with additions to the
        data structure.
	* dbug-rom.c (_initialize_dbug_rom): ditto
        (init_dbug_cmds): ditto
	* m32r-rom.c (_initialize_m32r_rom): ditto
	(init_m32r_cmds): ditto

Tue May 19 14:54:11 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (memrange_cmp): use const void * args to avoid
	ANSI compiler warnings.

1998-05-19  Jim Blandy  <jimb@zwingli.cygnus.com>

	* ax-gdb.c (gen_fetch, gen_var_ref, gen_deref, find_field,
	gen_bitfield_ref, gen_expr): Call error, not abort.
	* ax-general.c (read_const, generic_ext, ax_trace_quick,
 	ax_label, ax_const_d, ax_reg, ax_print): Same.

	* tracepoint.c: Remove the $(...) syntax for memranges.
	(validate_actionline, encode_actions, trace_dump_command): Remove
	clauses for the $(...) syntax.
	(parse_and_eval_memrange): Function deleted.
	(_initialize_tracepoint): Update function description. 

	* gdbtk.c (struct wrapped_call_objs): Change the `func' member to
 	be a Tcl_ObjCmdProc, not an Tcl_CmdProc, since it accepts a vector
 	of objects as arguments.  Change the object vector to be const,
	since that's what all the users of this structure seem to expect.
	(call_obj_wrapper): Cast clientData properly before storing it in
	the wrapped_args structure.

	* ax-gdb.c (_initialize_ax_gdb): Make the "agent" command a
 	subcommand of "maintenance", as it should have been from the
	beginning.  #include "gdbcmd.h", to get the declaration for
	maintenancelist.
	* Makefile.in: Document that dependency.

Tue May 19 12:00:58 1998  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* tracepoint.c (get_tracepoint_by_number): new function, to access
	traceframe_number for use of the GUI.

	* tracepoint.h: added prototype for get_traceframe_number.

Mon May 18 13:34:27 1998  Keith Seitz  <keiths@cygnus.com>

        * dbxread.c (process_one_symbol): If block addresses are relative to
        function start addresses, reset function_start_address whenever a new
        source file is seen.

Mon May 18 13:04:27 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (get_tracepoint_by_number): make sure to advance
	arg pointer even if we fail to parse a useful number.  Otherwise,
	since this function is called in a loop, it may loop forever!
	Also change strtol call to allow arbitrary radix.
	(map_args_over_tracepoints (and other places)): add QUIT; call
	to loop, to allow breakout using control-C.  Not all loops were
	analyzed to make sure they could terminate cleanly, but even
	terminating with a messed-up tracepoint list would be better 
	than not terminating at all!
	(tdump_command): check to see if we're connected to a trace-
	capable target (currently only "remote") before doing anything 
	else.

Sat May 16 22:21:48 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* config/d30v/tm-d30v.h (INIT_FRAME_PC_FIRST): Fill in PC into
 	frame struct before extracting saved register offsets.

Fri May 15 22:47:45 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (encode_actions): fix typo in printf format string.

1998-05-15  Jim Blandy  <jimb@zwingli.cygnus.com>

	Implement a few more tracing operators: ^ | & ~ !
	* ax-gdb.c (gen_integral_promotions, gen_logical_not,
	gen_complement): New functions.
	(gen_binop): New argument MAY_CARRY, indicating whether we need to
	correct the upper bits of the value after performing the
	operation.  Callers changed.
	(gen_expr): Handle BINOP_BITWISE_AND, BINOP_BITWISE_IOR, and
	BINOP_BITWISE_XOR here as well, by calling gen_binop.  Handle
	UNOP_LOGICAL_NOT, UNOP_COMPLEMENT.

	* ax-gdb.c (gen_conversion): Reworked to avoid some unnecessary
	sign extension.

	* ax-gdb.c (gen_usual_arithmetic): Renamed from gen_usual_binary,
	to match the ANSI C standard better.  Callers changed.

	* ax-gdb.c (gen_traced_pop): Add prototyped declaration.

Fri May 15 18:18:38 1998  David Taylor  <taylor@texas.cygnus.com>

	* tracepoint.c (stringify_collections_list): return a collection
	of strings rather than a single string.
	(free_actions_list): new function.
	(encode_actions): process collection of strings returned by
	stringify_collections_list.

1998-05-15  Jim Blandy  <jimb@zwingli.cygnus.com>

	* ax-gdb.c (gen_traced_pop): New function.
	(gen_expr): Call it for comma operator.
	(gen_trace_for_expr): Call it, instead of writing it out.

	Add facilities for sending arbitrary packets to the remote agent.
	There are a bunch of improvements to make (make it generic; handle
	'O' replies properly), but I just want to get this onto the branch.
	* remote.c (print_packet, remote_packet_command): New functions.
	(_initialize_remote): Register the remote-packet command.

Thu May 14 17:52:31 1998  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* tracepoint.c: move actionline_type definition to tracepoint.h.
	(validate_actionline): make non static.

	* tracepoint.h: move actioline_type definition  from tracepoint.c.
        (validate_actionline) moved prototype from tracepoint.c.

Thu May 14 11:49:18 1998  David Taylor  <taylor@texas.cygnus.com>

	* tracepoint.c (validate_actionline): add additional error
	checking, remove some dead code.
	(encode_actions): additional cleanups.
	(trace_find_command): remove some dead code.
	(trace_find_pc_command): ditto.
	(trace_find_tracepoint_command): ditto.
	(trace_find_line_command): ditto.
	(trace_find_range_command): ditto.
	(trace_find_outside_command): ditto.

Thu May 14 5:51:00 1998  Ron Unrau  <runrau@cygnus.com>

	* symtab.c (decode_line_1): set section for "break *<addr>"

Wed May 13 20:58:02 1998  Mark Alexander  <marka@cygnus.com>

	* corefile.c (reopen_exec_file): Reopen the exec file if
	it has changed.

Wed May 13 15:22:02 1998  Mark Alexander  <marka@cygnus.com>

	* sparc-tdep.c (fetch_instruction): New function.
	(single_step, sparc_init_extra_frame_info, examine_prologue):
	Use fetch_instruction instead of read_memory_integer
	to ensure that instructions are always read as big-endian.

Wed May 13 14:42:21 1998  Ian Lance Taylor  <ian@cygnus.com>

	* configure.in: Add AC_FUNC_ALLOCA.
	* defs.h: Check HAVE_ALLOCA_H rather than sparc.  Add _AIX pragma
	alloca.
	* configure: Rebuild.
start-sanitize-java
	* Makefile.in (jv-lang.o, jv-typeprint.o, jv-valprint.o): New
	targets.
end-sanitize-java

Wed May 13 11:19:08 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (trace_command): Remove old diagnostic code that was
	preventing tracepoints from being defined with a full-path filename.

Tue May 12 13:17:35 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* stabsread.c (read_one_struct_field): Check for typedef in type
 	tree before clearing bitfield information.

1998-05-11  Jim Blandy  <jimb@zwingli.cygnus.com>

	* ax-gdb.c (gen_binop): New function, based on gen_mul, to replace
	gen_mul and gen_div, and handle `%' op as well.  Correctly tests
	type of arguments.
	(gen_expr): Factor out common code in binary arithmetic operators.
	Add support for `%'.
	(gen_mul, gen_div): Removed.

Thu May  7 14:49:38 1998  Bob Manson  <manson@charmed.cygnus.com>

	* config/sparc/tm-sp64.h (CALL_DUMMY): Store and retrieve
	%o0-%o5 as 64-bit values; compensate for stack bias.
	(USE_STRUCT_CONVENTION): We only pass pointers to structs
	if they're larger than 32 bytes.
	(REG_STRUCT_HAS_ADDR): Ditto.

	* sparc-tdep.c (sparc_init_extra_frame_info): Use read_sp()
 	instead of read_register. If the target is a sparc64 and the frame
 	pointer is odd, compensate for the stack bias.
	(get_saved_register): Use read_sp().
	(DUMMY_STACK_REG_BUF_SIZE): Use FP_REGISTER_BYTES.
	(sparc_push_dummy_frame): Use read_sp()/write_sp(). On sparc64,
 	save the PC, NPC, CCR, FSR, FPRS, Y and ASI registers.
	(sparc_frame_find_saved_regs): Use read_sp(). Read the PC, NPC,
 	CCR, FSR, FPRS, Y and ASI registers from the frame, if it's a
 	dummy frame.
	(sparc_pop_frame): Use write_sp(). If the target is a sparc64 and
 	the FP is odd, compensate for stack bias.
	(sparc_store_return_value): Right-justify the return value before
 	writing it to %o0.
	(sparc_fix_call_dummy): Don't NOP out part of the call dummy on
 	sparc64.
	(sparc64_read_sp, sparc64_read_fp, sparc64_write_sp,
 	sparc64_write_fp, sp64_push_arguments,
 	sparc64_extract_return_value): New functions to support the
 	sparc64 ABI.

	* dwarfread.c (handle_producer): Set processing_gcc_compilation to
 	the right version number.

	* dwarf2read.c (read_file_scope): Assume we're processing
	GCC2 output.

Wed May  6 16:34:03 1998  Jeffrey A Law  (law@cygnus.com)

	* somsolib.c: Include gdb_stat.h.

Mon May  4 18:34:01 1998  David Taylor  <taylor@texas.cygnus.com>

	* ax-gdb.c (gen_mul): new function; (gen_div): new function;
	(gen_expr): add support for * and / operators, call gen_mul and
	gen_div as appropriate.

Mon May  4 16:24:22 1998  Mark Alexander  <marka@cygnus.com>

	* defs.h (make_run_cleanup): Declare.
	* solib.c (find_solib): Pass correct number of arguments to
	make_run_cleanup.

Mon May  4 07:08:25 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (trace_actions_command): actions command must set
	step_count to zero (in case previous actions have set it but the
	new set does not).

Sat May  2 09:35:07 1998  Stu Grossman  <grossman@babylon-5.cygnus.com>

	* ocd.h:  Add new flags, function codes, and processor types to 
	support new Wiggler capabilities.
	* (ocd_write_bytes_size):  New function to allow atomic writes of
 	memory in sizes larger than a byte.

	* ser-unix.c (baudtab):  Add 57600, 115200, 230400, and 460800 baud.

Fri May  1 19:51:32 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* stabsread.c (read_one_struct_field): Do not override supplied
 	bitfield size for a range type value.

	* gdbtypes.c (create_range_type): For a range with positive 
	lower limit, declare range type as unsigned.

Fri May  1 10:58:34 1998  John Metzler  <jmetzler@cygnus.com>

	* monitor.c: Turn off debug

Fri May  1 09:29:56 1998  Peter Schauer  <pes@regent.e-technik.tu-muenchen.de>

	* breakpoint.c (delete_command):  Skip internal breakpoints when
	all breakpoints are requested.

	* stabsread.c (define_symbol):  Record parameter types from Sunpro
	function stabs in the TYPE_FIELDS of the function type.

Thu Apr 30 15:59:54 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* Makefile.in (config-check-targets, config-check-hosts): Removed.

1998-04-30  Paul Eggert  <eggert@twinsun.com>

        * Makefile.in (maintainer-clean):
        Don't get ahead of yourself and delete Makefile
        before running `make'.
        (local-maintainer-clean, do-maintainer-clean): New rules.

Wed Apr 29 14:02:59 1998  David Taylor  <taylor@texas.cygnus.com>

	* ax-gdb.c (gen_add): when adding a pointer and an int, use
	the size of the pointer, not the int (typo) to decide how
	to extend the result.

Wed Apr 29 10:20:40 1998  John Metzler  <jmetzler@cygnus.com>
start-sanitize-vr4111

	* nec4102rom.c: New file implements ROM monitor adapter for
        nec-vr4102 board.  This board hosts the vr4111 chip.  This file
        required extensions to the monitor_ops structure, hooks for wait
        filter, new flags. This version does not support more than one
        breakpoint and resuming after a breakpoint in 16 bit mode is
        completely disfunctional.  
end-sanitize-vr4111

	* monitor.h: Defined additional hooks for dmpregs, configure_hooks
	and wait_filter. These additions require that all ROM monitor
	interfaces be recoded to initialize monitor ops using assignments
	rather than static structure initialization.  Added new bits to
	flags MO_EXACT_DUMPADDR, MO_HAS_BLOCKWRITES.

        * monitor.c (RDEBUG): Conditional tracing throughout the file.
        (fromhex): Now recognized upper cse hex digits
        (monitor_printf_noecho):
        (monitor_readchar): Tracing interferes with input timing.
        (monitor_open): Register different memory write functions with
        dcache_init if MO_HAS_BLOCKWRITES.
        (flush_monior_dcache): Added as an additional utilty.
        (monitor-resume): Call continue hook if one has been supplied.
        (monitor_wait_filter): New function Factored out of monitor wait
        and used if alternate wait-filter has not been provided.
        (monitor_wait): call alternate wait filter if provided.  Call
        monitor_dump_regs, a new function factored out from inline code.
        (monitor_dump_block): A new function used as a utility when
        monitors must dump several blocks of registers using different
        commands.
        (monitor_dump_regs): Call alternate function if provided. Uses new
        hook in monitor.h.
        (monitor_write_memory): Engage previouly added hook
        MO_FILL_USES_ADDR.
        (monitor_write_even_block): new function supports writing long
        blocks of 4byte words.
        (longlongendswap): new internal function
        (monitor_write_memory_longlongs): new function writes large blocks
        using command to enter a long long.
        (monitor_write-memory_block): new Function figures out which block
        mod to use.
        (monitor_read_memory): Can now handle dump formats in which the bytes 
        preceeding the requested data is not printed.

Tue Apr 28 19:41:33 1998  Tom Tromey  <tromey@cygnus.com>

	* Makefile.in (GDBTKLIBS): New macro.
	(INSTALLED_LIBS): Include GDBTKLIBS.
	(CLIBS): Likewise.
	* configure: Rebuilt.
	* configure.in: Put Tcl/Tk libs into GDBTKLIBS, not LIBS.
	(GDBTKLIBS): AC_SUBST.

	* tracepoint.c (memrange_cmp): Another typo fix; `memrbnge' ->
	`memrange'.

	* tracepoint.c (memrange_cmp): Fixed typo in function intro.

Tue Apr 28 17:41:20 1998  Philippe De Muyter  <phdm@macqel.be>

        * symfile.c (overlay_auto_command): Add forgotten parameter
 	definitions.
        (overlay_manual_command, overlay_off_command): Likewise.
        (overlay_load_command): Likewise.
        * tracepoint.c (memrange_cmp): Parameters have type void *, not
        struct memrange *.

Tue Apr 28 11:08:25 1998  John Metzler  <jmetzler@cygnus.com>

	* rom68k-rom.c (_initialize_rom68k): Fix unresolved init_rom_68kcmds.

Mon Apr 27 14:32:21 1998  Mark Alexander  <marka@cygnus.com>

	* config/sparc/tm-sparc.h (CALL_DUMMY): Shorten it drastically,
	make it work on the simulator.
	(FIX_CALL_DUMMY): Convert to function call instead of inline code.
	(sparc_fix_call_dummy): Declare.
	* sparc-tdep.c (sparc_fix_call_dummy): New function, taken from
	old FIX_CALL_DUMMY macro, with additional fixes for simulator.
	(sparc_push_dummy_frame): Set registers differently on simulator
	to prevent corrupted register window save areas.

Mon Apr 27 13:46:40 1998  John Metzler  <jmetzler@cygnus.com>

        * rom68k-rom.c (_initialize_rom68k, init_rom68k_cmds):
        Convert all static initializations of monitor ops structures to
        executable initializations in order that additions to the data
        structure definition can me made without repeating this editing
        exercise.                                            
        * abug-rom.c (_initialize_abug_rom, init_abug-cmds): Ditto.
        * cpu32bug-rom.c (_initialize_cpu32bug_rom, init_cpu32bug_cmds): Ditto.
        * mon960-rom.c (initialize_mon960, init_mon960_cmds): Ditto.
        * op50-rom.c (initialize_op50n, init_op50n_cmds): Ditto.       
        * ppcbug-rom.c (_initialize_ppcbug_rom, init_ppc_cmds): Ditto.
        * sh3-rom.c (_initialize_sh3_rom, init_sh3_cmds): Ditto.
        * sparclet-rom.c (_initialize_sparclet, init_sparclet_cmds): Ditto.
        * remote-est.c (_initialize_est, init_est_cmds): Ditto.
        * remote-hms.c ( _initialize_remote_hms, init_hms_cmds): Ditto.

Mon Apr 27 10:43:04 1998  Jason Molenda  (crash@bugshack.cygnus.com)

        * gdb_string.h (strdup): Don't specify arguments in prototype.

Sun Apr 26 07:57:21 1998  Peter Schauer <pes@regent.e-technik.tu-muenchen.de>

	* rs6000-nat.c (vmap_ldinfo):  Issue warning instead of error if
	fstat on ldinfo_fd fails.  Use objfile->obfd instead of vp->bfd
	to check for reference to the same file.

	* target.c (target_read_string):  Handle string transfers at the
	end of a memory section gracefully.

Fri Apr 24 17:18:56 1998  Geoffrey Noer  <noer@cygnus.com>

	* Makefile.in: enable EXEEXT setting

Fri Apr 24 11:53:49 1998  David Taylor  <taylor@texas.cygnus.com>

	* tracepoint.c (add_local_symbols): change type of type from
	char to int so that type shows up as 'A' or 'L' not 0.

start-sanitize-r5900
Fri Apr 24 11:25:07 1998  Jeffrey A Law  (law@cygnus.com)

        * mips-tdep.c (mips32_decode_reg_save): Handle 128bit wide
        GPR loads/stores generated on the r5900.
        (mips_find_saved_regs, mips32_skip_prologue): Likewise.
        * mips/tm-r5900.h (R5900_128BIT_GPR_HACK): Define.
        * mips/tm-txvu.h (R5900_128BIT_GPR_HACK): Likewise.

end-sanitize-r5900
Thu Apr 23 16:37:20 1998  Jason Molenda  (crash@bugshack.cygnus.com)

        * README:  Minor changes for 4.17 release.

start-sanitize-java	
Thu Apr 23 15:44:39 1998  Per Bothner  <bothner@cygnus.com>

	* symfile.c (deduce_language_from_filename):  .class implies java.

end-sanitize-java	
Thu Apr 23 12:52:21 1998  Philippe De Muyter  <phdm@macqel.be>

        * configure.in (strerror): Check if function must be declared.
        * acconfig.h (NEED_DECLARATION_STRERROR): New define slot.
        * gdb_string.h (strerror): Function declaration issued if
        NEED_DECLARATION_STRERROR.
        * configure, config.in: Files regenerated.

Thu Apr 23 12:27:43 1998  Philippe De Muyter  <phdm@macqel.be>

        * symfile.c (simple_overlay_update_1): Do not prefix array address
        by `&'.
        * bcache.h (BCACHE_DATA_ALIGNMENT): Ditto.
        * tracepoint.c (encode_actions): Ditto.
        * language.c, complaints.c, utils.c (varargs.h): Do not include that
        file here, it is already included indirectly by defs.h.
        * dbxread.c (dbx_symfile_init, process_one_symbol): Cast xmalloc return
        value to the appropriate pointer type.
        * utils.c (floatformat_from_doublest): Ditto.
        * tracepoint.c (read_actions, _initialize_tracepoint): Ditto.
        (add_memrange): Likewise with xrealloc return value.
        * stabsread.c (ref_add): Ditto.
        * coffread.c (coff_symfile_init): Likewise for xmmalloc return value.
        * elfread.c (elf_symfile_read): Ditto.
        * os9kread.c (os9k_symfile_init): Ditto.

Thu Apr 23 00:32:08 1998  Tom Tromey  <tromey@cygnus.com>

	* config.in: Rebuilt.
	* acconfig.h (ENABLE_NLS, HAVE_CATGETS, HAVE_STPCPY, HAVE_GETTEXT,
	HAVE_LC_MESSAGES): Define.

Wed Apr 22 15:38:56 1998  Tom Tromey  <tromey@cygnus.com>

	* configure: Rebuilt.
	* configure.in: Call CY_GNU_GETTEXT.
	* Makefile.in (top_builddir): New macro.
	(INTL): Define to @INTLLIBS@.
	(INTL_DEPS): New macro.
	(CDEPS): Reference INTL_DEPS, not INTL.

start-sanitize-sky
Wed Apr 22 13:40:16 1998  Doug Evans  <devans@canuck.cygnus.com>

	* txvu-tdep.c (txvu_print_insn): Fix thinko.

end-sanitize-sky
Wed Apr 22 12:58:23 1998 Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	Handle missing shared libraries during the examination of a core
	dump gracefully.
	* solib.c (find_solib):  Use catch_errors around call to
	solib_map_sections. Use warning instead of error if reading of
	the shared library name fails.
	(solib_map_sections):  Change return and argument types to make
	it callable from catch_errors.
	(symbol_add_stub):  Avoid GDB core dump if solib->abfd is NULL.
	* irix5-nat.c, osfsolib.c (xfer_link_map_member, solib_map_sections,
	symbol_add_stub):  Ditto.

Wed Apr 22 14:34:49 1998  Michael Meissner  <meissner@cygnus.com>

	* Makefile.in (INTL*): Add support to link in the intl library,
	and to add -I options to its source and object directories.
	(INTERNAL_CFLAGS): Ditto.
	(C{LIBS,DEPS}): Ditto.

start-sanitize-sky
Wed Tue 21 17:29:48 1998  Jim Lemke  <jlemke@cygnus.com>
	* configure.in: Add configure option --with-sim-funit.

end-sanitize-sky
Tue Apr 21 11:20:54 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* mips-tdep.c (gdb_print_insn_mips): Disassemble MIPS instructions
 	with subtarget-specific `mach', rather than fixed default.
	* config/mips/tm-mips.h (TM_PRINT_INSN_MACH): New macro, default
	disassembly `mach'.
start-sanitize-r5900
	* config/mips/tm-r5900.h (TM_PRINT_INSN_MACH): Override.
end-sanitize-r5900
start-sanitize-sky
	* config/mips/tm-txvu.h (TM_PRINT_INSN_MACH): Override.
end-sanitize-sky

Mon Apr 20 15:35:03 1998  Philippe De Muyter  <phdm@macqel.be>

        * coffread.c (decode_base_type): Treat a long field with size greater
        than TARGET_LONG_BIT as long long.
        * values.c (value_from_longest): Print code value in error message.

Mon Apr 20 15:32:21 1998   Mark Kettenis  <kettenis@phys.uva.nl>

        * gdb/gdb_string.h (strdup): Declare only if not defined as a
        macro.

Mon Apr 20 14:18:45 1998  J. Kean Johnston  <jkj@sco.com>

        * procfs.c: Added replacement macros for LWP stuff.  Fixed support 
        for UnixWare / SVR4.2MP targets and any targets which use
        multi-file /proc entries.  Fixed support for hardware watchpoints.
        * solib.c: SCO needs some of the same code as SunOS. Change
        preprocessor conditionals.

        * config/i386/i386sco5.mt: New file.
        * config/i386/tm-i386sco5.h: New file.
        * config/i386/i386sco5.mh (NATDEPFILES): add i386v-nat.o.
        * config/i386/nm-i386v42mp.h 
        (TARGET_HAS_HARDWARE_WATCHPOINTS): define.  
        Add other macros for hardware assisted watchpoints.
        * config/i386/nm-i386sco5.h: Correct attributions.
        (TARGET_HAS_HARDWARE_WATCHPOINTS): define.
        * config/i386/nm-linux.h (target_remote_watchpoint): Pass
        'type' through to i386_insert_watchpoint.

Mon Apr 20 14:12:30 1998 Peter Schauer (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (wait_for_inferior): Don't add signalled processes
	as new threads.
	* procfs.c (wait_fd): Note if LWP has exited.
	(procfs_wait): use GETPID to get process ID.

Sat Apr 18 15:21:04 1998  Stan Cox  <scox@cygnus.com>

	* configure.tgt: Added sparc86x support.

Thu Apr 16 13:13:24 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* rdi-share/etherdrv.c (EthernetWrite): Use strerror to get
	error string if in an ANSI C-ish environment.

Wed Apr 15 18:59:48 1998  Mark Alexander  <marka@cygnus.com>

	* sparc-tdep.c (SPARC_HAS_FPU): Define.
	(sparc_extract_return_value): New function, required to handle
	machines without floating point.
	(sparc_store_return_value): Ditto.
	* config/sparc/tm-sparc.h (EXTRACT_RETURN_VALUE): Call
	sparc_extract_return_value instead of using inline code.
	(sparc_extract_return_value): Declare.
	(STORE_RETURN_VALUE): Call sparc_store_return_value instead
	of using inline code.
	(sparc_store_return_value): Declare.

Wed Apr 15 12:19:42 1998  Martin M. Hunt  <hunt@cygnus.com>

	* solib.c (enable_break): Only call warning once
	instead of three times.

Tue Apr 14 16:52:59 1998  Mark Alexander  <marka@cygnus.com>

	* sparc-tdep.c (sparc_extract_struct_value_address): Make it
	work correctly on little-endian hosts.
	(sparc_push_arguments): New function.
	(gdb_print_insn_sparc): New function.
	(_initialize_sparc_tdep): Make gdb_print_insn_sparc the default
	disassembler, so that SPARClite-specific instructions will
	be recognized.
	* sparcl-tdep.c (readchar): Print debugging information.
	(debug_serial_write): New function, a replacement for SERIAL_WRITE
	that prints debugging information.
	* config/sparc/tm-sparc.h (PUSH_ARGUMENTS): Define.
	(sparc_push_arguments): Declare.

Tue Apr 14 15:43:49 1998  John Metzler  <jmetzler@cygnus.com>

	* gdbcfgxref (xref_menu): Call new regex and wild card searches
	Now you can type in a specific triple like mips64-vr4300-elf or
	somthing like mips*.h
	(triple_search) wildcardsearch): The new functions

start-sanitize-vr4320
	* configure.tgt: Switch over to use tm-4320.h. Since I switched to
 	MIPS EABI the fixes are no longer backward compatible with 4300.
	* tm-vr4320.h: Added
	* vr4320.mt:   Added

end-sanitize-vr4320
Mon Apr 13 16:28:07 1998  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* utils.c: (warning) added call to warning_hook

	* source.c: (find_source_lines) modified to call warning in case
	of source vs. executable time stamp mismatch. Simplified object
	file check. Initialized mtime to 0.

	* defs.h: added warning_hook prototype

	* top.c: added warning_hook prototype.

Mon Apr 13 09:54:08 1998  Keith Seitz  <keiths@andros.cygnus.com>

	* config/sparc/tm-sun4os4.h (IS_STATIC_TRANSFORM_NAME): Add missing
	definition.

Fri Apr 10 22:36:28 1998  Peter Schauer (pes@regent.e-technik.tu-muenchen.de)

        Update support for x86 Solaris 2.
        * config/i386/tm-i386sol2.h, nm-i386sol2.h:  New configuration
        files for x86 Solaris 2.                                              
        * config/i386/i386sol2.mt, i386sol2.mh:  Use them.                    
        * config/sparc/tm-sun4sol2.h (PROCFS_GET_CARRY):  New macro, extract  
        carry flag from a given regset.                                     
        (IS_STATIC_TRANSFORM_NAME):  New macro, check if a symbol name      
        is a SunPro transformed name.                                 
        * i386-tdep.c (sunpro_static_transform_name):  New function to
        extract the source name from a SunPro transformed name.           
        * inferior.h (procfs_first_available, procfs_get_pid_fd):        
        Add prototypes.                                          
        * infrun.c (wait_for_inferior):  Handle breakpoint hit in
        signal handler without intervening stop in sigtramp.     
        * procfs.c (procfs_lwp_creation_handler):  Use PROCFS_GET_CARRY
        instead of direct access to the status register.               
        (procfs_get_pid_fd):  New function, returns procfs fd for a given pid.
        * sol-thread.c (ps_lgetLDT):  New function, returns LDT for a given   
        lwpid.                                                                
        (sol_find_new_threads):  Handle failed libthread_db initialization 
        gracefully.                                                       
        * stabsread.c (define_symbol):  Use IS_STATIC_TRANSFORM_NAME      
        to check for a SunPro transformed symbol name.              

Fri Apr 10 10:35:35 1998  John Metzler  <jmetzler@cygnus.com>

	* utils.c (fmthex): A formatting function for hexdumps

	* mips-tdep.c (unpack_mips16): Fixed instruction decoding, lots of
 	bit pattern interpretations. mips_fetch_instruction does not work
 	for 16 bit instructions. Some confusion remains about sign
 	extension in backward branches.
	(mips32_relative_offset): Sign extension
	(mips32_next_pc): Major debugging, bit pattern interpretation
	(print_unpack): debugging printf
	(fetch_mips_16): new funtion, key on PC low bit, not symbol table
	(mips16_next_16): Initial major debugging of this function. Lots
 	of bit pattern mistakes.
	(mips_next_pc): key on low bit of PC, not symbol table.
	* symfile.c (generic_load): Added a download verification which
 	reads back the loaded code. Download chunk size is now a defined
 	macro. Fixed a bug in which downloading slips into loading one
 	byte at a time. Lower level functions in monitor.c can load long
 	sequences of bytes and make use of these fixups.  Referencing
 	bfd-start_address directly was incorrectly getting zero for start.

Thu Apr  9 19:20:32 1998  Ian Lance Taylor  <ian@cygnus.com>

	* mips-tdep.c (do_fp_register_row): Use alloca rather than arrays
	with dynamic size.

Wed Apr  8 19:21:42 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* top.c (print_gdb_version): Print 1998 now.

Wed Apr  8 16:57:22 1998  Philippe De Muyter  <phdm@macqel.be>

	* source.c: Remove obsolete decl of strstr().

Wed Apr  8 16:47:33 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* solib.c (solib_create_inferior_hook): Remove Ulrich Drepper's
	patch of March 23 1998.
	* breakpoint.c (breakpoint_re_set_one): Remove Ulrich Drepper's
	patch of March 23 1998.

Sat Apr  4 10:05:00 1998  Dawn Perchik  <dawn@cygnus.com>

	* mdebugread.c (parse_partial_symbols): If this is an .mdebug 
	section in an ELF file, override a symbol's ECOFF section with its 
	ELF section.  Also, fix stabs continuation where a stabs string 
	continues for more than one continuation.

Mon Apr  6 09:17:48 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* mips-tdep.c (mips_push_arguments): Specify dimention of valbuf
 	using MAX_REGISTER_RAW_SIZE.

Sat Apr  4 10:05:00 1998  Dawn Perchik  <dawn@cygnus.com>

	* infrun.c: Fix prototype of signals_info to match static funtion.

Thu Apr  2 12:47:41 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* sol-thread.c (sol_thread_store_registers): Save & restore new
 	value of single updated register to prevent accidental clobbering.

Wed Apr  1 22:01:09 1998  Mark Alexander  <marka@cygnus.com>

	* config/sparc/tm-sparclite.h (TARGET_BYTE_ORDER_SELECTABLE): Define.
	* config/sparc/sparclite.mt: Link in the erc32 simulator.

Wed Apr  1 16:30:49 1998  Ian Dall  <Ian.Dall@dsto.defence.gov.au>

        * ns32k-tdep.c (flip_bytes, ns32k_localcount,
        ns32k_get_enter_addr, sign_extend): Restore functions mysteriously
        deleted.

        * ns32knbsd-nat.c: New (?) file to support fetching and storing
        registers on NetBSD hosts.

        * nbsd.mh (NATDEPFILES): put ns32knbsd-nat.o instead of
        ns32k-nat.o

        * ns32km3-nat.c (reg_offset): Get order of floating point
        registers correct. Add extra 32382 register offsets.
        (REG_ADDRESS): define to point at correct part of thread
        state. Use calls to "warning" instead of "message".

        * tm-nbsd.h, tm-ns32km3.h (REGISTER_NAMES, NUM_REGS,
        REGISTER_BYTES, REGISTER_BYTE): redefine allowing for 32382
        fpu registers.

Wed Apr  1 13:43:07 1998  Philippe De Muyter  <phdm@macqel.be>

        * NEWS: m68k-motorola-sysv host support added.
        * coffread.c (coff_start_symtab): Accept the filename as an argument,
        set it here.  Callers updated.

Wed Apr  1 23:13:23 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/mips/tm-mips.h (REGISTER_VIRTUAL_TYPE): Handle 32 bit SR,
 	FSR and FIR registers.
	(REGISTER_VIRTUAL_SIZE): Compute using REGISTER_VIRTUAL_TYPE.
	(REGISTER_RAW_SIZE): Define using REGISTER_VIRTUAL_SIZE.

	* config/mips/tm-mips64.h: Ditto.

Tue Mar 31 21:30:39 1998  Nick Clifton  <nickc@cygnus.com>

	* arm-tdep.c (gdb_print_insn_arm): Attach a fake Thumb symbol
	vector to the info structure when disassembling thumb
	instructions. 

	* coffread.c (coff_symtab_read, read_one_sym,
	process_coff_symbol):  Support Thumb symbol types. 

	* dbxread.c (process_one_symbol): Call SMASH_TEXT_ADDRESS (if it
	is defined) for function symbols.  

Tue Mar 31 16:39:28 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* tracepoint.c (get_tracepoint_by_number): change warning to note.
	(delete_trace_command): suppress y/n query if no tracepoints, or
	if not from_tty.  (trace_pass_command): reject junk at end of args.
	(read_actions): an action list consisting only of "end" is discarded.
	(validate_actionline (for collect command)): an argument beginning
	with a dollar_sign but not recognized as a special argument is
	parsed like any other expression -- if it isn't a register name,
	it's rejected.  Also reject an empty argument to while-stepping.
	(trace_find_command): reject a negative frame number argument.
	(_initialize_tracepoint): set $traceframe initially to -1.

Mon Mar 30 16:42:12 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* rdi-share/Makefile.am, rdi-share/aclocal.m4,
	rdi-share/configure: New files.
	* rdi-share/configure.in:  Rewritten to be an autoconf input file.
	* rdi-share/Makefile.in, rdi-share/configure: Generated by 
	automake/autoconf.
	* rdi-share/dbg_hif.h, etherdrv.c, hostchan.c: Use autoconf tests
	to check environment.

Sun Mar 29 15:17:16 1998  Keith Seitz  <keiths@onions.cygnus.com>

	* tracepoint.c (trace_start_command): Set trace_running_p.
	(trace_stop_command): Clear trace_running_p.

Sat Mar 28 15:19:48 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* NEWS: Update for 4.17 release.

Fri Mar 27 10:15:50 1998  David Taylor  <taylor@tito.cygnus.com>

	* tracepoint.c (parse_and_eval_memrange): Fix memory leaks.
	(encode_actions): Use the new gen_trace_for_expr function
	instead of expr_to_address_and_size; collect registers when
	using expressions.  (clear_collection_list): Fix memory leak.

1998-03-26  Jim Blandy  <jimb@zwingli.cygnus.com>

	* ax-gdb.h (gen_trace_for_expr): Add prototype.

Thu Mar 26 17:24:23 1998  David Taylor  <taylor@texas.cygnus.com>

	* tracepoint.c (validate_actionline): Fix memory leak.
	(encode_actions): Fix memory leak.

Thu Mar 26 16:16:55 1998  David Taylor  <taylor@tito.cygnus.com>

	* tracepoint.c (trace_mention): New function.
	(trace_command): Call it.

1998-03-26  Jim Blandy  <jimb@zwingli.cygnus.com>

	* ax-general.c (ax_reqs): New function.
	* ax.h (enum agent_flaws, struct agent_reqs): New types.
	(agent_reqs): New extern prototype.  Well, actually, this was
	there before, due to a premature checkin.
 	(struct aop_map): Add new `data_size' member.
	* ax-general.c (aop_map): Supply its value.
	* ax-gdb.c (agent_command): Call ax_reqs, for testing.

	* ax-general.c (ax_print): If we encounter an invalid or
	incomplete opcode, don't abort; just print an error message.

	* ax-gdb.c: Generate trace bytecodes, as appropriate.
	(trace_kludge): New variable.
	(gen_fetch, gen_bitfield_ref): Emit trace bytecodes, if asked
 	nicely.
	(expr_to_agent): Ask for no trace bytecodes.
	(gen_trace_for_expr): New function.
	(agent_command): Call it, and display the result appropriately ---
	no struct axs_value, so no type or kind information.

	* ax-gdb.c: Use TARGET_CHAR_BIT throughout, not HOST_CHAR_BIT.

Thu Mar 26 22:29:28 1998  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

        * tracepoint.c (trace_status_command): Recognize a boolean return
        value from the stub to indicate whether trace experiment is
        running.  Export this value as a global state variable.
        (trace_running_p) for use by the GUI. (from Michael Snyder)
        (trace_pass_command) added call to modify_tracepoint_hook.

        * tracepoint.h export trace_running_p.

Thu Mar 26 13:08:01 1998  David Taylor  <taylor@texas.cygnus.com>

	* tracepoint.c (validate_actionline): do not error out if
	exp->elts[0].opcode is not on short line -- let
	expr_to_address_and_size handle it.

1998-03-26  Jim Blandy  <jimb@zwingli.cygnus.com>

	* tracepoint.c: Include "ax.h", not "agentexpr.h".

	* tracepoint.c (encode_actions): Call expr_to_address_and_size,
	not simply expr_to_agent.

	* ax-general.c: Comment out code in progress, so everyone else can
	at least compile.

	* gdbtypes.c: Doc fix.

	* ax.h, ax-gdb.h, ax-general.c, ax-gdb.c: New files.
	* Makefile.in (REMOTE_OBJS): Add ax-general.o and ax-gdb.o.
	(SFILES): Add ax-general.c, ax-gdb.c.
	(ax_h): New variable.
	(ax-general.o, ax-gdb.o): New rules.

start-sanitize-sky
Wed Mar 25 11:45:19 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* configure.in (sim-gpu2): Added target type checking to make
 	--with-sim-gpu2 option only valid for sky target.
	* configure: Regenerated.
end-sanitize-sky

Tue Mar 24 16:22:40 1998  Stu Grossman  <grossman@bhuna.cygnus.co.uk>

	* Makefile.in:  Derive SHELL from configure.
	* config/d10v/d10v.mt config/m32r/m32r.mt
	config/mn10200/mn10200.mt config/mn10300/mn10300.mt
	config/d30v/d30v.mt:  Remove -lm from SIM.  This prevents
	dependency checking of -lm (under NT native builds).  (It is
	automatically added by configure if it exists.)
	* doc/configure mswin/configure nlm/configure
	testsuite/gdb.base/configure testsuite/gdb.c++/configure
	testsuite/gdb.chill/configure testsuite/gdb.disasm/configure
	testsuite/gdb.stabs/configure testsuite/gdb.threads/configure:
	Regenerate with autoconf 2.12.1 to fix shell issues for NT native
	builds.

Mon Mar 23 18:10:57 1998  Ulrich Drepper  (drepper@cygnus.com)

	* solib.c (solib_create_inferior_hook):  Rewrite previous
	change to check the type of file via BFD.

Mon Mar 23 13:52:28 1998  Ulrich Drepper  (drepper@cygnus.com) 
 
	* breakpoint.c (breakpoint_re_set_one): Treat bp_shlib_events
	like bp_breakpoints.
	* solib.c (solib_create_inferior_hook): Relocate section addresses
	if the alleged start address doesn't agree with the PC.

start-sanitize-sky
Mon Mar 23 13:07:22 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* configure.in (sim-gpu2): Added --with-sim-gpu2 as configure
 	option, to allow gdb+sim linking with sky GPU2 library.
	* configure: Regenerated.

end-sanitize-sky
Sat Mar 21 19:34:49 1998  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	merged changes from Foundry (list follows by file/author):

        - Tom Tromey  <tromey@cygnus.com>
        * Makefile.in (gdbres.o): New target.
        (WINDRES): New define.
        * configure: Rebuilt.
        * configure.in (WINDRES): Define.
        (CONFIG_OBS): Include gdbres.o on Windows.
        * gdbtool.ico: New file.
        * gdb.rc: New file.

        * ser-unix.c
        - Keith Seitz  <keiths@onions.cygnus.com>
        (wait_for): Don't reset the timeout_remaining for CYGWIN32,
        since we now effectively poll the serial port.
        Don't reset the current_timeout, either, since this member is used
        by hardwire_readchar to track the timeout and call the ui_loop_hook.
	(hardwire_readchar): Poll the serial port for Cygwin32. We timeout
 	every second, update the UI, and loop around doing this until we
 	have hit the real timeout or we get data or an error. This will
 	allow the UI to stay active while gdb is "blocked" talking to the
 	target.
       	- Martin M. Hunt  <hunt@cygnus.com>
	(wait_for): Do reset current_timeout because it is only used to
 	keep track of what the current timeout for the scb is.

        * top.c
        - Martin M. Hunt  <hunt@cygnus.com>
        (quit_confirm): Change exit message again
        for GUI.
        (pc_changed_hook): Add prototype.
        - Tom Tromey  <tromey@cygnus.com>
        (quit_confirm): Added missing `else'.
        (quit_confirm): Special-case message if init_ui_hook is
        set.

        * symtab.c
        - Martin M. Hunt  <hunt@cygnus.com>
        (find_pc_sect_line): If no symbol information
        is found, return correct pc anyway.
        (find_methods): Comment out an apparently
        bogus error message because it messes up Foundry.

        * serial.c
        - Martin M. Hunt  <hunt@cygnus.com>
        (_initialize_serial): Add a description of
        "set remotelogbase".

        * findvar.c
        - Martin M. Hunt  <hunt@cygnus.com>
        (write_register_gen): Add call to
        pc_changed_hook if the PC is being changed.

        * defs.h
        - Martin M. Hunt  <hunt@cygnus.com>
        (pc_changed_hook): Define.

        * command.c
        -  Martin M. Hunt  <hunt@cygnus.com>
        (do_setshow_command): If no arguments are supplied,
        don't dump core, instead print out an error message.

        * breakpoint.c
        - Martin M. Hunt  <hunt@cygnus.com>
        Make set_raw_breakpoint, set_breakpoint_count,
        and breakpoint_count non-static so they are accessible from
        gdbtk.c.
        (enable_breakpoint): Enable breakpoint
        with same disposition instead of changing all breakpoints
        to donttouch.

        * annotate.h
	- Keith Seitz  <keiths@onions.cygnus.com>
        Add declarations for annotation hooks.
 
        * annotate.c
	- Keith Seitz  <keiths@onions.cygnus.com>
        Add hooks: annotate_starting_hook, annotate_stopped_hook,
        annotate_signalled_hook, annotate_exited_hook.
        (annotate_starting): If hook exists, call it instead.
        (annotate_stopped): If hook exists, call it instead.
        (annotate_exited): If hook exists, call it instead.
        (annotate_signalled): If hook exists, call it instead.

Fri Mar 20 14:45:36 1998  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* gdbserver/Makefile.in: add dependency on XM_CLIBS.
	* gdbserver/low-sim.c (registers) force into alignment.
	(create_inferior): Fix typo on new_argv; add abfd arg to 
	sim_open, sim_create_inferior.  Add reg_size arg to 
	sim_fetch_register, sim_store_register.  Make simulator
	take a single-step to get into a known running state.
	* gdbserver/gdbreplay.c: include fcntl.h for def'n of F_SETFL.
	* gdbserver/server.c: Add remote_debug variable to control 
	debug output.
	* gdbserver/server.h: Add prototypes for enable/disable_async_io.
	* gdbserver/remote-utils.c: add verbose debugging output controlled 
	by "remote_debug" variable.  Add call to "disable_async_io()"
	to avoid being killed by async SIGIO signals.
	* config/m32r/m32r.mt: define GDBSERVER_(LIBS and DEPFILES),
	so that gdbserver can be built with the m32r simulator.

Fri Mar 20 09:04:06 1998  Andrew Cagney  <cagney@b1.cygnus.com>

start-sanitize-r5900
	* config/mips/tm-r5900.h (REGISTER_VIRTUAL_SIZE): Redefine as
 	expression from REGISTER_VIRTUAL_TYPE.
	(REGISTER_RAW_SIZE): Ditto.
	(REGISTER_VIRTUAL_TYPE): Redefine, use explicit size for 32 bit
 	registers.

end-sanitize-r5900
	* gdbtypes.h (builtin_type_{,u}int{8,16,32,64}): New gdb builtin
 	types.
start-sanitize-r5900
	(builtin_type_{,u}int128): Ditto.
end-sanitize-r5900

	* gdbtypes.c (_initialize_gdbtypes): Initialize new types.

	* mips-tdep.c (do_gp_register_row): Pad register value when GP
 	register is smaller than MIPS_REGSIZE.

	* findvar.c (value_of_register): When raw and virtual register
 	values identical, check that sizes are consistent.

Thu Mar 19 11:32:15 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* minsyms.c (compare_minimal_symbols): If addresses are identical,
	then compare on names.  Sorted list should have symbols with 
	identical addresses AND names adjacent, so dups can be discarded.

Wed Mar 18 12:50:17 1998  Jeff Law  (law@cygnus.com)

	* stabsread.c (define_symbol): Don't look for ',' as a LRS
	indicator.

Wed Mar 18 10:34:51 1998  Nick Clifton  <nickc@cygnus.com>

	* rdi-share/etherdrv.c: Set sys_errlist[] as char * not const char *.

Fri Mar 13 15:43:53 1998  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

        * config/mips/xm-mips.h (CC_HAS_LONG_LONG):  Undefine for Ultrix
        when compiling with native cc, the compiler has broken long long
        support.

Fri Mar 13 15:37:02 1998  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

        * config/m68k/xm-sun3os4.h:  Remove malloc declarations, they
        are handled via autoconf now.
        * remote.c (remote_ops, extended_remote_ops):  Replace static
        forward declaration by moving the static definition to the top of
        the file, for old K&R compilers.
        * tracepoint.c (collect_symbol, trace_start_command):
        Replace ANSI string concatenation with K&R compatible simple string.

1998-03-11  Fred Fish  <fnf@ninemoons.com>

	* source.c (select_source_symtab): Don't reach error if we have
	a current_source_symtab from reading in partial symbol table.

start-sanitize-vr4320
Tue Mar 10 16:15:13 1998  Gavin Koch  <gavin@cygnus.com>

	* configure.tgt (mips64*vr4320*el-*-elf*): Removed spurious case.

end-sanitize-vr4320
Fri Mar  6 13:10:27 1998  Fred Fish  <fnf@cygnus.com>

	* utils.c (quit): Call SERIAL_DRAIN_OUTPUT rather than
 	SERIAL_FLUSH_OUTPUT.
	* serial.h (struct serial_ops): Add drain_output, pointer to
 	function that waits for output to drain.
	(SERIAL_DRAIN_OUTPUT): Macro to wait for output to drain.
	* ser-unix.c (hardwire_drain_output): New function and prototype.

	* ser-unix.c (hardwire_ops): Add entry for drain_output function.
	* ser-tcp.c (tcp_ops): Ditto.
	* ser-ocd.c (ocd_ops): Ditto.
	* ser-mac.c (mac_ops): Ditto.
	* ser-go32.c (dos_ops): Ditto.
	* ser-e7kpc.c (e7000pc_ops): Ditto.

Thu Mar  5 16:07:41 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* sparcl-tdep.c: fix #endif comments

Thu Mar  5 15:10:35 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* Makefile.in (BISON): Configure substitutes in @YACC@, not @BISON@.

Thu Mar  5 14:42:41 1998  Keith Seitz  <keiths@onions.cygnus.com>

	* ocd.c (ocd_open): If we fail ocd_start_remote, make sure we
	error () so that we abort out of bdm_ppc_open.

Wed Mar  4 16:53:52 1998  Martin M. Hunt  <hunt@cygnus.com>

	* serial.c (_initialize_serial): Add a description of 
	"set remotelogbase".

	* command.c (do_setshow_command): If no arguments are supplied,
	don't dump core, instead print out an error message.

Wed Mar  4 16:50:18 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* gdbtk.c (gdb_listfiles): Fix thinko in last change.

Wed Mar  4 15:34:49 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* gdbtk.c (gdb_listfiles): Allocate space for 'files' dynamically.

Wed Mar  4 01:39:08 1998  Ron Unrau  <runrau@cygnus.com>

	* elfread.c (elf_symtab_read): merge SYMBOL_IS_SPECIAL into
	MAKE_MSYMBOL_SPECIAL
	* config/mips/tm-mips.h: ditto

Tue Mar  3 17:19:08 1998  John Metzler  <jmetzler@cygnus.com>

start-sanitize-vr4111
	* config/mips/tm-vr4xxx.h:  implements vr4111 as separate from 4300
	* config/mips/vr4xxx.tm:    implements vr4111 as separate from 4300
	* configure.tgt:  Recognise mips64vr4111-*-elf as vr4xxx
end-sanitize-vr4111
	* dwarfread.c (read_tag_pointer_type): Pointer sizes now come from
	TARGET_PTR_BIT rather from sizeof(char *) on host.

Tue Mar  3 14:37:02 1998  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

        * alpha-nat.c (fetch_osf_core_registers):  Renamed from
        fetch_aout_core_registers.
        (alpha_osf_core_fns):  Renamed from alpha_aout_core_fns, change
        flavour to bfd_target_unknown_flavour for OSF core files.

start-sanitize-vr4320
Tue Mar  3 11:12:39 1998  Gavin Koch  <gavin@cygnus.com>

	* configure.tgt (mips64*vr4320*el-*-elf*,mips64*vr4320*-*-elf*): 
	Added.

end-sanitize-vr4320
Mon Mar  2 17:44:13 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* breakpoint.c (_initialize_breakpoint): Make "en" an alias
	for "enable" (so that it doesn't conflict with "end").

Mon Mar  2 17:04:25 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* Makefile (VERSION): Bump to 4.17.1.

Mon Mar  2 16:59:15 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* rdi-share/etherdrv.c (sys_errlist): Add correct decl for Linux.

Mon Mar  2 16:51:44 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* Makefile.in (YYFILES): Remove in maintainer-clean, not distclean.

Mon Mar  2 16:47:11 1998  Philippe De Muyter  <phdm@macqel.be>

        * Makefile.in (distclean): Add `rm $(YYFILES)'.

Mon Mar  2 16:45:48 1998  Philippe De Muyter  <phdm@macqel.be>

	* coffread.c (coff_read_enum_type): Set TYPE_FLAG_UNSIGNED if enum
	is unsigned.

Sun Mar  2 15:16:13 1998 Richard Henderson  <rth@cygnus.com>         

        * configure.host, configure.tgt: Add sparc-linux.               
        * sparc-nat.c: Include <asm/reg.h> not <machine/reg.h> for Linux.
        * config/sparc/*linux*: New files.                         

Mon Mar  2 12:12:41 1998  Anthony Thompson   (athompso@cambridge.arm.com)

	* arm-tdep.c (gdb_print_insn_arm): Call print_insn_big_arm
	if we're big endian; else call print_insn_little_arm.

Mon Feb 24 11:24:57 1998  Richard Henderson  <rth@cygnus.com>

        * Makefile.in (BISON): Don't even pretend to use yacc.
        (c-exp.tab.o): Use bison -o to use a unique intermediate file.
        (f-exp.tab.o, m2-exp.tab.o): Likewise.
start-sanitize-java	
        (jv-exp.tab.o): Likewise.
end-sanitize-java	

Tue Feb 24 03:32:59 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (gdbsim_fetch_register): Don't abort when the
 	register size is wrong.

start-sanitize-r5900
Tue Feb 24 02:53:41 1998  And<rew Cagney  <cagney@b1.cygnus.com>

	* config/mips/tm-r5900.h (REGISTER_VIRTUAL_SIZE,
 	REGISTE_RAW_SIZE): Re-define.

end-sanitize-r5900
Thu Feb 19 16:49:48 1998 John Metzler  <jmetzler@cygnus.com>

	* target.c (debug_to_fetch_registers,debug_to_store_registers,
	debug-to_insert_breakpoint,debug_to_remove_breakpoint): tracing
	64 bit targets crashed long long printfs.

Tue Feb 17 16:36:22 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* symfile.c (read_target_int_array): rename read_target_long_array
        and force the sizeof an ovly_table element to sizeof(long),
        instead of sizeof(int).

Tue Feb 17 18:05:05 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* remote-mips.c (mips_request): Use unsigned long during parsing
 	returned value from monitor, to prevent accidental sign extension.

Tue Feb 17 14:28:33 1998  Peter Schauer <pes@regent.e-technik.tu-muenchen.de>

        * acconfig.h: FORCE_MMCHECK changed to MMCHECK_FORCE.
        * configure.in: Ditto.
        * configure: Regenerated.

Tue Feb 17 14:07:34 1998  Peter Schauer <pes@regent.e-technik.tu-muenchen.de>

        * gdbtypes.c (check_typedef): Do not try to resolve the length of      
        a type which has TYPE_FLAG_TARGET_STUB set, if the target type has
        set TYPE_FLAG_TARGET_STUB as well.

Tue Feb 17 14:32:18 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (gdbsim_fetch_register, gdbsim_store_register):
 	Pass register size to sim_{fetch,store}_register.  Check nr of
 	register bytes transfered is correct.

Mon Feb 16 14:05:54 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-d10v.c (remote_d10v_open): Call push_remote_target
 	instead of open_remote_target.

	* remote.c (remote_xfer_memory): Use REMOTE_TRANSLATE_XFER_ADDRESS
 	to translate addr/size when defined.
	(open_remote_target): Delete.

	* target.h (open_remote_target): Delete.

	* config/d10v/tm-d10v.h (REMOTE_TRANSLATE_XFER_ADDRESS): Define.

Mon Feb 16 14:05:54 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* d10v-tdep.c (d10v_extract_return_value): Wierd.  GCC wants to
 	return odd sized register quantities with only half of the first
 	register used!

	* config/d10v/tm-d10v.h (USE_STRUCT_CONVENTION): Use stack when
 	size > 8.

Mon Feb 16 14:05:54 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/d10v/tm-d10v.h (USE_STRUCT_CONVENTION): Define. True when
 	sizeof type > 1.

Sun Feb 15 16:10:50 1998  Ron Unrau   <runrau@cygnus.com>

	* parse.c (write_dollar_variable): call new function 
	  target_map_name_to_register to allow targets to define their own 
	  register name aliases.
	* infcmd.c (registers_info): use target_map_name_to_register so that
	  "print $reg" and "info reg $reg" use the same register name aliases.

Fri Feb 13 16:40:30 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* config/i386/i386mk.mt (OBJFORMATS): Delete, no longer used.
	* config/i386/xm-i386mk.h: Fix an include.
	* config/pyr/tm-pyr.h (PC_INNER_THAN): Remove, never used.

Thu Feb 12 16:12:07 1998  Frank Ch. Eigler  <fche@cygnus.com>

	* remote-mips.c (mips_enter_debug): Sleep before sending CR to
 	monitor.
	(mips_exit_debug): Accept any whitespace / verbiage before monitor
 	prompt reappears.

Thu Feb 12 18:25:42 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* d10v-tdep.c (show_regs): Avoid use of %llx when printing 8 byte
 	accumulators.

Thu Feb 12 17:10:22 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* valops.c (value_at): For d10v, make read pointers with
 	read_target_unsigned_integer, keep addresses unsigned.
	(value_fetch_lazy): Ditto.

Thu Feb 12 12:14:02 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-d10v.c: New file.  Layer the d10v GDB->remote memory map
 	on top of the remote serial memory transfer functions.

	* config/d10v/d10v.mt (TDEPFILES): Add remote-d10v.o

	* Makefile.in (remote-d10v.o): Add dependencies.

	* remote.c (remote_open_1): Add arg extended_p, engage extended
 	protocol when extended_p.
	(remote_open, extended_remote_open): Pass !extended_p /
 	extended_p to remote_open_1.

	* remote.c (open_remote_target), target.h: New function.

Wed Feb 11 08:41:15 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/i386/fbsd.mh (XDEPFILES): Add ser-tcp.o.

Tue Feb 10 17:50:37 1998  Keith Seitz  <keiths@onions.cygnus.com>

	* tracepoint.c (tracepoint_operation): Call the modify_tracepoint_hook
	if it exists.
	Remove static declaration of free_actions.

	* tracepoint.h: Add declaration of free_actions.
		
Tue Feb 10 12:17:13 1998  Fred Fish  <fnf@cygnus.com>

	* symtab.c (decode_line_1): Revert change that mistakenly
	removed assignment of sals[0].pc field.

Mon Feb 10 12:37:47 1998  Philippe De Muyter  <phdm@macqel.be>

        * m68k/tm-delta68.h (EXTRACT_RETURN_VALUE): Type argument for
        `REGISTER_CONVERT_TO_VIRTUAL is `TYPE', not
        `REGISTER_VIRTUAL_TYPE (FP0_REGNUM)';
        (STORE_RETURN_VALUE): Ditto, and offset for `write_register_bytes'
        is `REGISTER_BYTE (FP0_REGNUM)', not `FP0_REGNUM'.
        (FRAME_NUM_ARGS): New macro.
        * m68k/tm-news.h (EXTRACT_RETURN_VALUE, STORE_RETURN_VALUE): Ditto.
        * delta68-nat.c (clear_insn_cache): New function, forgotten in previous
        patch.

Mon Feb  9 11:10:06 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* d10v-tdep.c: Replace references to IMEM_ADDR and DMEM_ADDR with
 	D10V_MAKE_[DI]ADDR and D10V_CONVERT_[ID]ADDR_TO_RAW macros.

	* config/d10v/tm-d10v.h (IMEM_START): Move to 0x01......
	(DMEM_START): Move to 0x00......
	(STACK_START): Move to 0x00..7ffe.
	(D10V_MAKE_IADDR, D10V_MAKE_DADDR): Translate unconditionally.

	* d10v-tdep.c (d10v_xlate_addr): Delete function.

Mon Feb  9 15:10:21 1998  Fred Fish  <fnf@cygnus.com>

	* symtab.c (fixup_psymbol_section): Move forward declaration to
	top of file with other such decls.  Make it a static function.
	* symtab.h: Minor formatting tweaks.

Mon Feb  9 13:14:12 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* config/a29k-udi.mt, config/i960/vxworks960.mt (REMOTE_OBS):
 	Remove redefinition.
	* config/i960/tm-i960.h (BREAKPOINT): Define.

Mon Feb  9 15:35:38 1998  Ian Lance Taylor  <ian@cygnus.com>

	* Makefile.in (init.c): Ignore errors when making init.c.  Seems
	necessary to work around bug in Solaris make.

Sun Feb  6 02:44:28 1997  Philippe De Muyter  <phdm@macqel.be>

        * m68k/tm-delta68.h (CPLUS_MARKER): Macro deleted.
        (EXTRACT_STRUCT_VALUE_ADDRESS): Macro defined.
        (EXTRACT_RETURN_VALUE, STORE_RETURN_VALUE): Macros modified
        because floating-point values return via %fp0.
        (CLEAR_INSN_CACHE): New macro.
        * m68k/tm-m68k.h (REGISTER_CONVERT_TO_VIRTUAL): Macro fixed
        to use DOUBLEST.
        (REGISTER_CONVERT_TO_RAW): Ditto.
        * infptrace.c (child_xfer_memory): If CLEAR_INSN_CACHE is defined,
        call it after having written in child process's memory.
        * inflow.c (PROCESS_GROUP_TYPE): Macro defined if HAVE_TERMIO.
        (gdb_has_a_terminal, terminal_ours_1): Functions fixed for HAVE_TERMIO.

Fri Feb  6 16:17:30 1998  Jeffrey A Law  (law@cygnus.com)

        * config/mips/tm-mips64.h (TARGET_LONG_BIT): Allow final target to
        override.
        (TARGET_LONG_LONG_BIT): Likewise.
        (TARGET_PTR_BIT): Likewise.
start-sanitize-r5900
        * config/mips/tm-r5900.h (TARGET_PTR_BIT): Define to 32 bits.
end-sanitize-r5900

start-sanitize-sky
Fri Feb  6 14:33:34 1998  Doug Evans  <devans@canuck.cygnus.com>

	* configure.tgt (mips64r5900*-sky-elf*): Replaces txvu-elf.
	* config/mips/txvu.mt (SIM): txvu -> mips.

end-sanitize-sky
Fri Feb  6 17:42:22 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/d10v/tm-d10v.h (D10V_CONVERT_IADDR_TO_RAW,
 	D10V_CONVERT_DADDR_TO_RAW): Define.

	* d10v-tdep.c (d10v_push_arguments): Re-write.  Pass arguments in
 	registers, regardless of their size, when they fit.

Thu Feb  5 13:16:36 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* d10v-tdep.c (d10v_extract_return_value): For function pointers
	translate address to IMAP area.

	* config/d10v/tm-d10v.h (EXTRA_FRAME_INFO): Delete dummy from
 	struct.
	(POP_FRAME): Point at generic_pop_current_frame.

	* d10v-tdep.c (d10v_pop_frame): Delete code handling dummy frames,
 	handled earlier.
	(d10v_push_return_address): New function.
	(d10v_pop_dummy_frame): Delete.
	(d10v_fix_call_dummy): Delete.
	(d10v_call_dummy_address): Delete.

	* d10v-tdep.c (d10v_init_extra_frame_info): Clear dummy and
 	frameless.

	* d10v-tdep.c (d10v_push_arguments): Keep stack word aligned.

	* config/d10v/tm-d10v.h (EXTRACT_STRUCT_VALUE_ADDRESS): Extract
 	address of structure from first ARG1_REGNUM.

	* d10v-tdep.c (d10v_push_arguments): Force 4 byte args into
 	even-odd register pair.  Store 1 and 2 byte args in registers.

	* valops.c (value_fetch_lazy): Ensure that a D10V function pointer
 	is fetched in the correct byte order.
	(value_at): Ditto. Also ensure data pointers are mapped to data
 	segment.

	* config/d10v/tm-d10v.h (D10V_DADDR_P, D10V_IADDR_P): 

	* d10v-tdep.c: Replace 2 with REGISTER_RAW_SIZE.
	(d10v_pop_frame): Replace R13 with LR_REGNUM.
	(d10v_push_arguments): Replace R2 with ARG1_REGNUM.
	(d10v_push_arguments): Replace 6 with ARGN_REGNUM.
	(d10v_extract_return_value): Access return value with RET1_REGNUM.

	* config/d10v/tm-d10v.h (ARG1_REGNUM, ARGN_REGNUM, RET1_REGNUM):
 	Define.
	(STORE_RETURN_VALUE): Specify return register using RET1_REGNUM.
	(STORE_STRUCT_RETURN): Specify ARG1_REGNUM as the struct ptr
 	location.

Thu Feb  5 13:16:36 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* blockframe.c (generic_pop_dummy_frame): Flush the frame, no
 	longer valid.

	* blockframe.c (generic_pop_current_frame), frames.h: New
 	function.

Thu Feb  5 17:18:16 1998  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (gdbsim_create_inferior): clear_proceed_status
 	before /re/starting the simulator.

Thu Feb  5 15:55:31 1998  C. M. Heard (heard@vvnet.com)

        * top.c (do_nothing): Remove signal handler after signal is caught.

Thu Feb  5 11:57:06 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* tracepoint.c (tracepoint_operation): call free_actions instead
	of free.  (free_actions): eliminate some memory leaks for actions.
	(validate_actionline): pass string arg by reference, so we can 
	change the pointer.  Change all memrange collection arguments to
	canonical form (literal address and size), to enforce early
	evaluation.  Accept UNOP_MEMVAL (assembly variables) for 
	trace collection.  (parse_and_eval_memrange): accept expressions
	for the address and size fields of a memrange (and evaluate
	them immediately).  (several places): use -1 instead of zero
	to distinguish an absolute memrange from a register-relative one.
	(encode_actions): add handling for UNOP_MEMVAL (assembly variable).

Wed Feb  4 17:40:21 1998  Jason Molenda  (crash@bugshack.cygnus.com)

        * Makefile.in (SFILES): add tracepoint.c.
        (LINTFILES): add @CONFIG_SRCS@.
        (SOURCES): Ditto.
        * configure.in (CONFIG_SRCS): Mirror use of CONFIG_OBS.
        * configure: Regenerated.

Tue Feb  3 16:12:32 1998  Gordon W. Ross (gwr@mc.com)

	* infptrace.c (child_resume): Don't try to step if 
	NO_SINGLE_STEP is defined.

Mon Feb  2 19:06:13 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* Makefile.in (VERSION): Bump to 4.16.2.

Mon Feb  2 17:18:25 1998  Richard Henderson  <rth@cygnus.com>

        * alpha-nat.c (fetch_aout_core_registers): Rename from
        fetch_core_registers.
        (fetch_elf_core_registers): New function.
        (supply_gregset): Use ALPHA_REGSET_BASE.
        (supply_fpregset): Likewise.
        (fill_fpregset): Likewise.
        (alpha_aout_core_fns): Rename from alpha_core_fns.
        (alpha_elf_core_fns): New.
        * config/alpha/alpha-linux.mh (NATDEPFILES): solib.o not osfsolib.o.
        Disable MMALLOC.
        * config/alpha/nm-linux.h (SVR4_SHARED_LIBS): Define if ELF.
	(TARGET_ELF64): Likewise.
        (ALPHA_REGSET_BASE): New.
        * config/alpha/nm-osf.h (ALPHA_REGSET_BASE): New.
        * config/alpha/tm-alphalinux.h: Include tm-sysv4.h.

        * solib.c (elf_locate_base): Add TARGET_ELF64 support.
        (info_sharedlibary_command): Likewise.

        * configure.host: Match alpha*.
        * configure.tgt: Likewise.

Fri Jan 30 15:11:38 1998  David Taylor  <taylor@texas.cygnus.com>

	Changes by <Peter.Schauer@Regent.E-Technik.TU-Muenchen.DE>
	* infrun.c (IN_SOLIB_DYNSYM_RESOLVE_CODE): new macro for detecting
 	whether we are in the dynamic symbol resolution code 
	(wait_for_inferior): invoke it.
	* solib.c (in_svr4_dynsym_resolve_code): new function
	(enable_break): record start and end of the dynamic linker
	text and plt sections for use in in_svr4_dynsym_resolve_code.
	* solib.h (IN_SOLIB_DYNSYM_RESOLVE_CODE): add svr4 definition;
	(in_svr4_dynsym_resolve_code): declare it.
	* config/nm-gnu.h (solib.h): move inclusion to after definition
	of SVR4_SHARED_LIBS.
	* config/nm-sysv4.h (solib.h): ditto.
	* config/i386/nm-i386sco5.h (solib.h): ditto.
	* config/i386/nm-linux.h (solib.h): ditto.
	* config/mips/nm-irix5.h (IN_SOLIB_DYNSYM_RESOLVE_CODE): undefine.

Thu Jan 29 19:39:31 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* coffread.c (coff_symtab_read) [SEM]: Remove code, macro can
	never be defined.
	* dbxread.c (process_one_symbol) [BLOCK_ADDRESS_ABSOLUTE]:
	Remove, no longer needed.
	* hppa-tdep.c (N_SET_MAGIC): Remove, no longer used.
	* config/pa/xm-hppab.h (SEEK_SET, SEEK_CUR, SEEK_END): Ditto.
	* config/mips/tm-mipsm3.h (NUMERIC_REG_NAMES): Ditto.
	* config/mips/mipsm3.mt (TDEPFILES): Remove mipsread.o.

Wed Jan 28 14:46:52 1998  Stan Shebs  <shebs@andros.cygnus.com>

	Suggested by Chris Walter <walter@budoe.bu.edu>:
	* dwarfread.c (set_cu_language): Recognize Fortran.
	* dwarf2read.c (set_cu_language): Ditto.
	(read_array_type): Fix language test.

Wed Jan 28 12:51:08 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)
 
        * blockframe.c (generic_frame_chain_valid): A frame pointer may
        be valid if it is equal to the frame pointer of its caller (ie.
        not necessarily strictly INNER_THAN).  Allows frameless functions.
 
Wed Jan 28 11:23:25 1998  Mark Alexander  <marka@cygnus.com>

	* monitor.c (monitor_vsprintf): New function to handle
	printing of large addresses using %A format specifier.
	(monitor_printf_noecho, monitor_printf): Use monitor_vsprintf
	instead of vsprintf.
	* dve3900-rom.c (_initialize_r3900_rom): Use %A instead of %Lx
	to print addresses.

Tue Jan 27 16:14:23 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* configure.in (CONFIG_LDFLAGS): Only add -export-dynamic
	when using GNU ld.

Mon Jan 26 19:07:46 1998  Jason Molenda  (crash@bugshack.cygnus.com)

	* config/alpha/tm-alphalinux.h (alpha_linux_sigtramp_offset):
	Add closing parenthesis.  From HJ Lu.

Mon Jan 26 17:54:45 1998  Mark Alexander  <marka@cygnus.com>

	* dve3900-rom.c: Improve performance by using memory commands
	that print less fluff.  Minor cosmetic changes.
	Eliminate compiler warnings.

Sat Jan 24 23:44:43 1998  Martin M. Hunt  <hunt@cygnus.com>

	* breakpoint.c (enable_breakpoint): Preserve breakpoint
	disposition when enabling a breakpoint.

	* symtab.c (find_pc_sect_line): If no symbol information
	is found, return correct pc anyway.

Fri Jan 23 17:26:22 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* configure.host (i[3456]86-*-osf1mk*, mips-*-mach3*,
	ns32k-*-mach3*): Fix file names.
	(i[3456]86-*-os9k, m88*-*-mach3*, w65-*-*): Remove config
	recognition, no source files for these.
	* configure.tgt (powerpc-*-aix4*): Remove config, now identical
	to powerpc-*-aix*.
	* config/powerpc/{aix4.mh,aix4.mt,tm-ppc-aix4.h}: Remove files,
	no longer needed.

Fri Jan 23 16:49:41 1998  Mark Alexander  <marka@cygnus.com>

	* monitor.c (monitor_write, monitor_readchar): New functions.
	* monitor.h (monitor_write, monitor_readchar): Declare.
	* dve3900-rom.c: Add support for fast loading on ethernet connections.

Fri Jan 23 07:47:06 1998  Fred Fish  <fnf@cygnus.com>

	* config/d10v/tm-d10v.h (CALL_DUMMY): Define as "{ 0 }".
	(TARGET_READ_FP): Define to d10v_read_fp rather than d10v_read_sp.
	(TARGET_WRITE_FP): Define to d10v_write_fp rather than d10v_write_sp.
	(d10v_write_fp, d10v_read_fp): Add prototypes.
	* symtab.c (decode_line_1): Remove assignment of sals[0].pc field.
	* symfile.c (simple_overlay_update, simple_overlay_update_1):
	Ignore the size of overlay sections.  This check is redundant anyway.
	* printcmd.c (print_frame_args): Ditto.
	* valops.c (value_fetch_lazy): Ditto.
	* values.c (unpack_long): Ditto.
	* d10v-tdep.c (d10v_frame_chain, d10v_frame_find_saved_regs,
	d10v_init_extra_frame_info): Fix some minor bugs so the finish command
 	works properly.
	(show_regs): Change num1 and num2 types from "long long" to "LONGEST".
	(d10v_read_fp, d10v_write_fp): New functions.
	(d10v_push_arguments): Remove unneeded assigns to "val" and "contents".
	(d10v_push_arguments): Fix for pointers and structs.
	(d10v_extract_return_value): Fix for pointers and chars.

Tue Jan 20 18:53:18 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* configure.tgt (i386-*-mach*, m88*-*-mach3*): Remove config
	recognition, no source files for these (note that the i386 Mach
	config is for pre-Mach 3).
	(mips*-*-mach3*, ns32k-*-mach3*): Fix file names.
	* config/mips/mipsel64.mt: Remove, never referenced.

Mon Jan 19 14:01:28 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* top.c (print_gdb_version): Restore to original message.

Mon Jan 19 13:34:40 1998  Ian Lance Taylor  <ian@cygnus.com>

	From cgf@bbc.com (Chris Faylor):
	* win32-nat.c (child_mourn_inferior): Call ContinueDebugEvent to
	let the child exit.
	(child_kill_inferior): Respond to all debug events as the child is
	terminating.

	* Makefile.in (all): Change gdb dependency to gdb$(EXEEXT).
	(uninstall): Add $(EXEEXT) to file name to remove.
	(gdb$(EXEEXT)): Rename target from plain gdb.
	(gdb1$(EXEEXT)): Rename target from plain gdb1.
	(clean, mostlyclean): Add $(EXEEXT) to binary names to remove.

1998-01-16  Felix Lee  <flee@cygnus.com>

	* top.c (print_gdb_version): delete stutter.

Thu Jan 15 12:29:13 1998  Nick Clifton  <nickc@cygnus.com>

	* remote-rdi.c (arm_rdi_open): Patch from Tony.Thompson@arm.com
	to prevent spurous error messages on non-ICE targets.

Wed Jan 14 19:27:02 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* config/mips/{r3900.mt,r3900l.mt,tm-r3900.h,tm-r3900l.h}:
	Remove, no longer used.

Wed Jan 14 18:11:26 1998  Michael Meissner  <meissner@cygnus.com>

	Patch from Jim Wilson.
	* d30v-tdep.c (d30v_frame_find_saved_regs_offsets): Properly
	declare void function before use.

	* config/d30v/tm-d30v.h (CALL_DUMMY): Initialize as { 0 }, not {}.

Tue Jan 13 16:38:48 1998  Fred Fish  <fnf@cygnus.com>

	* configure.in (--with-mmalloc): Add new configure arg to use the
	mmalloc package.  Default is to not use it.
	(START_INFERIOR_TRAPS_EXPECTED): Define to the integer 2, not
	the string "2".
	* acconfig.h (USE_MMALLOC, FORCE_MMCHECK): Add #undef.
	* configure: Regenerated.
	* config.in: Regenerated.
	* Makefile.in (MMALLOC_DIR, MMALLOC_SRC): Remove.
	(MMALLOC): Set using configure.
	(MMALLOC_CFLAGS): Set using configure.

	* config/i386/tm-linux.h (sys_quotactl): Define to 1 rather
	than just defining it.
	* mpw-make.sed: Undefine USE_MMALLOC rather than defining NO_MMALLOC.
	* utils.c (NO_MMALLOC): Use USE_MMALLOC instead.
	* objfiles.c: ditto.
	* defs.h: ditto.

	* config/sparc/sun4os4.mh (MMALLOC_CFLAGS): Remove.
	* config/m68k/sun3os4.mh (MMALLOC_CFLAGS): Remove.
	* config/i386/cygwin32.mh (MMALLOC_CFLAGS): Remove.
	* config/alpha/alpha-osf3.mh (MMALLOC_CFLAGS): Remove.
	* config/alpha/alpha-osf2.mh (MMALLOC_CFLAGS): Remove.
	* gdbserver/Makefile.in (MMALLOC_*): Remove.
	* config/rs6000/rs6000.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/rs6000/aix4.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/powerpc/aix4.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/powerpc/aix.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/ns32k/ns32km3.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/mips/mipsm3.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/mips/decstation.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/m88k/cxux.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/i386/xm-windows.h (NO_MMALLOC, NO_MMCHECK): Remove.
	* config/i386/i386mk.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/i386/i386m3.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/i386/i386gnu.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/alpha/alpha-osf1.mh (MMALLOC, MMALLOC_CFLAGS): Remove.
	* config/alpha/alpha-linux.mh (MMALLOC, MMALLOC_CFLAGS): Remove.

Mon Jan 12 11:46:51 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* config/m68k/tm-m68k.h (REGISTER_VIRTUAL_TYPE): make A0 thru A7
	default to void pointer type (so that their default radix is hex).

	* symtab.c: move rbreak_command from no_class to class_breakpoint
	so it will be listed under "help breakpoints".

Sat Jan 10 14:58:04 1998  Stan Shebs  <shebs@andros.cygnus.com>

	* rdi-share/hostchan.c: Remove gettimeofday declaration.

Thu Jan  8 11:03:59 1998  Nick Clifton  <nickc@cygnus.com>

	* remote-rdp.c: Applied patches submitted by Tony.Thompson@arm.com
 	to implement the Angel remote debugging interface.

	* Makefile.in: Add build rules for remote-rdi.c and
	rdi-share/libangsd.a.

	* configure.tgt: Updated from source on branch.
	* config/arm/tm-arm.h: Updated from source on branch.
	* arm-tdep.c: Updated from source on branch.

	* rdi-share: New directory, RDI library contributed by ARM.

Mon Jan  5 20:21:59 1998  Mark Alexander  <marka@cygnus.com>

	* monitor.h (MO_PRINT_PROGRAM_OUTPUT): Define.
	* monitor.c (monitor_wait): Echo program output.
	* dve3900-rom.c (_initialize_r3900_rom): Remove MO_HANDLE_NL flag,
	add MO_PRINT_PROGRAM_OUTPUT flag.

Mon Jan  5 18:21:11 1998  David Taylor  <taylor@texas.cygnus.com>

	* top.h (HAVE_SIGSETJMP): define SIGJMP_BUF, SIGSETJMP, and
	SIGLONGJMP appropriately based on whether HAVE_SIGSETJMP is
	defined.
	* top.c (return_to_top_level, catch_errors): use the new macros
	* main.c (SET_TOP_LEVEL): ditto.
	* config/xm-sysv4.h (HAVE_SIGSETJMP): Define.

Fri Jan  2 18:48:58 1998  Mark Alexander  <marka@cygnus.com>

	* configure.in: Double up brackets in shell case pattern.

Fri Jan  2 17:06:05 1998  Michael Snyder  (msnyder@cleaver.cygnus.com)

        * tracepoint.c (finish_tfind_command): improved algorithm for
        deciding when we've "stepped" into a new stack frame.
        (map_args_over_tracepoints): loop over tracepoint list "safely", 
	since list elements may be deleted during loop.
	(read_actions): add actions to history list.

For older changes see ChangeLog-97

Local Variables:
mode: change-log
left-margin: 8
fill-column: 74
version-control: never
End:
