Tue Jan 23 14:36:05 1996  Per Bothner  <bothner@kalessin.cygnus.com>

	* language.c (lang_bool_type):  Add Fortran support.
	* eval.c (OP_BOOL):  Use LA_BOOL_TYPE.

Tue Jan 23 13:08:26 1996  Jeffrey A Law  (law@cygnus.com)

	* symfile.c (auto_solib_add): Renamed from auto_solib_add_at_startup.
	All references changed.
	* breakpoint.c (bpstat_what): Add shlib_event to the class types.
	Update state table.  Reformat so that it's still readable.
	When we hit the shlib_event breakpoint, set the calss of shlib_event.
	(breakpoint_1): Add "shlib events" as a breakpoint type.
	Print the shlib_event breakpoint like other breakpoints.
	(create_solib_event_breakpoint): New function.
	(breakpoint_re_set_one): Handle solib_event breakpoints.
	* breakpoint.h (enum bytype): Add bp_shlib_event breakpoint type.
	(enum bpstat_what_main_action): Add BPSTAT_WHAT_CHECK_SHLIBS
	action.
	(create_solib_event_breakpoint): Declare.
	* infrun.c (wait_for_inferior): Handle CHECK_SHLIBS bpstat.
	(normal_stop): Inform the user when the inferior stoped due
	to a shared library event.
	(_initialize_infrun): Add new set/show variable "stop_on-solib-events"
	to control whether or not gdb continues the inferior or stops it when
	a shared library event occurs.
	* minsyms.c (lookup_minimal_symbol_solib_trampoline): New function.
	* somsolib.c (TODO list): Update.
	(som_solib_create_inferior_hook): Arrange for gdb to be notified
	when significant shared library events occur.
	* hppa-tdep.c (find_unwind_entry): No longer static.

Tue Jan 23 09:00:48 1996  Doug Evans  <dje@charmed.cygnus.com>

	* gdbtk.c (gdb_disassemble): Rework disassemble_info initialization.
	Pass fprintf_unfiltered to INIT_DISASSEMBLE_INFO.
	* printcmd.c (print_insn): Likewise.

Mon Jan 22 16:59:40 1996  Stan Shebs  <shebs@andros.cygnus.com>

	* remote.c (remotebreak): New GDB variable.
	(remote_break): New global.
	(remote_interrupt): Send a break instead of ^C if remote_break.
	* NEWS: Describe the new variable.

Mon Jan 22 16:24:11 1996  Doug Evans  <dje@charmed.cygnus.com>

	* sparc-tdep.c (_initialize_sparc_tdep): Always use print_insn_sparc.

Fri Jan 19 07:19:38 1996  Fred Fish  <fnf@cygnus.com>

	* hp300ux-nat.c (getpagesize): Remove unused function
 	fetch_core_registers.
	(hp300ux_core_fns):  Remove, is unused.
	(_initialize_core_hp300ux):  Remove, is unused.
	(gdbcore.h):  Remove #include, no longer needed.
	
Fri Jan 19 00:59:53 1996  Jeffrey A Law  (law@cygnus.com)

	* rs6000-nat.c (exec_one_dummy_insn): Rework to avoid
	ptrace bug in aix4.1.3 on the rs6000.

Wed Jan 17 13:22:27 1996  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-hms.c (hms_ops): Add value for to_thread_alive.
	* remote-nindy.c (nindy_ops): Ditto.
	* remote-udi.c (udi_ops): Ditto.

Tue Jan 16 11:22:58 1996  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in (CLIBS):  Add LIBS to allow libraries to be
	specified on the make command line (via make LIBS=xxx).
start-sanitize-gm
	* configure.in (enable-gm):  magic.o -> gmagic.o.
end-sanitize-gm

Tue Jan 16 18:00:35 1996  James G. Smith  <jsmith@cygnus.co.uk>

	* remote-mips.c (pmon_opn, pmon_wait, pmon_makeb64, pmon_zeroset,
 	pmon_checkset, pmon_make_fastrec, pmon_check_ack,
	pmon_load_fast): New functions. Support for the PMON monitor world.
	(common_open): New function to merge support for different monitors.
	(mips_open): Use common_open().
	(mips_send_command): New function.
	(mips_send_packet): Scan out-of-sequence packets.
	(mips_enter_debug, mips_exit_debug): New functions.
	(pmon_ops): New target definition structure.
	
Fri Jan 12 21:41:58 1996  Jeffrey A Law  (law@cygnus.com)

	* symtab.c (find_pc_symtab): Don't lose if OBJF_REORDERED
	is set but there are no psymtabs.

Fri Jan 12 15:56:12 1996  Steve Chamberlain  <sac@slash.cygnus.com>

	* dsrec.c (load_srec): Remove unused variable.
	monitor.c (monitor_expect): Don't expect a ^C to echo.
	* serial.c (serial_open): Add parallel interface.
	* sh3-rom.c (parallel, parallel_in_use): New.
	(sh3_load): If parallel_in_use, download though the
	parallel port.
	(sh3_open): Open parallel port if specified.
	(sh3_close): New function.
	(_inititalize_sh3): Add sh3_close hook and documentation.
	* monitor.c (monitor_close): Export.
	* monitor.h (monitor_close): Add prototype.

Fri Jan 12 13:11:42 1996  Stan Shebs  <shebs@andros.cygnus.com>

	From Wilfried Moser <wilfried.moser@aut.alcatel.at>:
	* remote.c (remotetimeout): New GDB variable, use to set the
	remote timeout for reading.

Fri Jan 12 07:14:27 1996  Fred Fish  <fnf@cirdan.cygnus.com>

	* lynx-nat.c, irix4-nat.c, sparc-nat.c: Include gdbcore.h
	to get "struct core_fns" defined.
	* Makefile.in (lynx-nat.o, irix4-nat.o, sparc-nat.o):
 	Are dependent upon gdbcore_h.

Thu Jan 11 23:13:24 1996  Per Bothner  <bothner@cygnus.com>

	* symfile.c (decrement_reading_symtab):  New function.
	* symfile.c, symtab.h (currently_reading_symtab):  New variable.
	* symfile.c (psymtab_to_symtab):  Adjust currently_reading_symtab.
	* gdbtypes.c (check_typedef):  Don't call lookup_symbol if
	currently_reading_symtab (since that could infinitely recurse).

Thu Jan 11 17:21:25 1996  Per Bothner  <bothner@kalessin.cygnus.com>

	* stabsread.c (read_struct_type):  Trivial simplification.

	* stabsread.c (define-symbol):  Use invisible references
	for TYPE_CODE_SET and TYPE_CODE_BITSTRING too.
	* valops.c (call_function_by_hand):  Likewise.
	* eval.c (evaluate_subexp_standard):  When known, use the formal
	parameter type as the expected type when evaluating arg expressions.
	* ch-lang.c (evaluate_subexp_chill):  Likewise (for MULTI_SUBSCRIPT).

Wed Jan 10 11:25:37 1996  Fred Fish  <fnf@cygnus.com>

	* coredep.c: Renamed to core-aout.c
	* core-svr4.c: Renamed to core-regset.c
	* Makefile.in (ALLDEPFILES): Account for renamings.
	* corelow.c (core_file_fns): Add, points to chain of structs.
	(add_core_fns): New function to build chain of structs.
	(get_core_registers): Modify to search core functions chain and call
 	appropriate fetch_core_registers function based on core file flavour.
	* gdbcore.h (fetch_core_registers):  Remove declaration.
	(struct core_fns): Define struct for core function info.
	* i386m3-nat.c: Update comment for filename change (coredep->core-aout)
	* a68v-nat.c (fetch_core_registers): Remove stub, not needed now.
	* alpha-nat.c (fetch_core_registers): Make static.
	(alpha_core_fns, _initialize_core_alpha): New struct and func.
	* core-aout.c (fetch_core_registers): Make static
	(aout_core_fns, _initialize_core_aout): New struct and func.
	* core-regset.c (fetch_core_registers): Make static.
	(regset_core_fns, _initialize_core_regset): New struct and func.
	* core-sol2.c (fetch_core_registers): Make static.
	(solaris_core_fns, _initialize_core_solaris): New struct and func.
	* hp300ux-nat.c (fetch_core_registers): Make static.
	(hp300ux_core_fns, _initialize_core_hp300ux): New struct and func.
	* i386aix-nat.c (fetch_core_registers): Make static.
	(i386aix_core_fns, _initialize_core_i386aix): New struct and func.
	* i386mach-nat.c (fetch_core_registers: Make static.
	(i386mach_core_fns, _initialize_core_i386mach): New struct and func.
	* irix4-nat.c (fetch_core_registers): Make static.
	(irix4_core_fns, _initialize_core_irix4): New struct and func.
	* irix5-nat.c (fetch_core_registers): 
	(irix5_core_fns, _initialize_core_irix5): New struct and func.
	* lynx-nat.c (fetch_core_registers): Make static.
	(lynx_core_fns, _initialize_core_lynx): New struct and func.
	* mips-nat.c (fetch_core_registers): Make static.
	(mips_core_fns, _initialize_core_mips): New struct and func.
	* ns32km3-nat.c (fetch_core_registers): Remove stub.
	* rs6000-nat.c (fetch_core_registers): Make static.
	(rs6000_core_fns, _initialize_core_rs6000): New struct and func.
	* sparc-nat.c (fetch_core_registers): Make static.
	(sparc_core_fns, _initialize_core_sparc): New struct and func.
	* sun3-nat.c (fetch_core_registers): 
	(sun3_core_fns, _initialize_core_sun3): New struct and func.
	* sun386-nat.c (fetch_core_registers): Remove stub.
	* ultra3-nat.c (fetch_core_registers): Make static.
	(ultra3_core_fns, _initialize_core_ultra3): New struct and func.
	* config/gould/pn.mh (XDEPFILES),
 	config/i386/fbsd.mh (NATDEPFILES),
	config/i386/i386bsd.mh (NATDEPFILES),
 	config/i386/i386m3.mh (XDEPFILES),
	config/i386/i386sco.mh (NATDEPFILES),
	config/i386/i386sco4.mh (NATDEPFILES),
	config/i386/i386v.mh (NATDEPFILES),
	config/i386/i386v32.mh (NATDEPFILES),
	config/i386/nbsd.mh (NATDEPFILES),
	config/i386/ptx.mh (XDEPFILES),
	config/i386/ptx4.mh (XDEPFILES),
	config/i386/symmetry.mh (NATDEPFILES),
	config/m68k/3b1.mh (XDEPFILES),
	config/m68k/cisco.mt (TDEPFILES),
	config/m68k/delta68.mh (NATDEPFILES),
	config/m68k/dpx2.mh (NATDEPFILES),
	config/m68k/hp300bsd.mh (NATDEPFILES),
	config/m68k/hp300hpux.mh (NATDEPFILES),
	config/m68k/isi.mh (XDEPFILES),
	config/m68k/news.mh (NATDEPFILES),
	config/m68k/news1000.mh (XDEPFILES),
	config/m88k/cxux.mh (NATDEPFILES),
	config/m88k/delta88.mh (NATDEPFILES),
	config/mips/littlemips.mh (XDEPFILES),
	config/mips/mipsm3.mh (XDEPFILES),
	config/ns32k/merlin.mh (XDEPFILES),
	config/ns32k/nbsd.mh (NATDEPFILES),
	config/ns32k/ns32km3.mh (NATDEPFILES),
	config/pa/hppabsd.mh (NATDEPFILES),
	config/pa/hppahpux.mh (NATDEPFILES),
	config/romp/rtbsd.mh (XDEPFILES),
	config/tahoe/tahoe.mh (XDEPFILES),
	config/vax/vaxbsd.mh (XDEPFILES),
	config/vax/vaxult.mh (NATDEPFILES),
	config/vax/vaxult2.mh (NATDEPFILES),
	Account for coredep.o to core-aout.o name change.	
	* config/i386/i386dgux (NATDEPFILES),
	config/i386/i386sol2.mh (NATDEPFILES),
	config/i386/i386v4.mh (NATDEPFILES),
	config/i386/linux.mh (NATDEPFILES),
	config/i386/ncr3000.mh (NATDEPFILES),
	config/m68k/m68kv4.mh (NATDEPFILES),
	config/m88k/delta88v4.mh (NATDEPFILES),
	config/mips/mipsv4.mh (NATDEPFILES),
	Account for core-svr4.o to core-regset.o name change.
	
Wed Jan 10 16:08:49 1996  Brendan Kehoe  <brendan@lisa.cygnus.com>

	* configure.in, configure: Recognize rs6000-*-aix4*.
	* config/powerpc/xm-aix.h: Reduce to include "xm-aix4.h".
	* config/rs6000/aix4.mh (XM_FILE): Point to xm-aix4.h.
	* config/rs6000/xm-aix4.h: New file.
	* config/xm-aix4.h: New file.

Wed Jan 10 11:25:37 1996  Fred Fish  <fnf@cygnus.com>

	From Wilfried Moser <wilfried.moser@aut.alcatel.at>:
	* gdbserver/low-linux.c: New file.
	* remote.c (remote_read_bytes): Fix aborts on larger packets.

	* config/i386/linux.mh (GDBSERVER_DEPFILES, GDBSERVER_LIBS):
	Define.
	* stabsread.c (define_symbol): If register value is too large,
	tell what it is and what max is.

Tue Jan  9 09:33:53 1996  Jeffrey A Law  (law@cygnus.com)

	* hpread.c (hpread_build_psymtabs): Finish Jan 4th 
	enum namespace -> enum_namespace change.

Tue Jan  9 04:44:47 1996  Wilfried Moser (Alcatel)  <moser@rtl.cygnus.com>

	* ch-exp.c (parse_primval): In case ARRAY, add missing
	FORWARD_TOKEN ().

Mon Jan  8 13:29:34 1996  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-mips.c (mips_receive_header): Recognize \012 instead
	of \n, but write \n when program sends a \012.
	* ser-mac.c (mac_input_buffer): Increase size of buffer.

Mon Jan  8 12:00:40 1996  Jeffrey A Law  (law@cygnus.com)

	* infptrace.c (initialize_infptrace): Move function out of
	#ifdef conditional; put code within the function inside an
	#ifdef conditional.

	* buildsym.c (end_symtab): Remove sort_pending and sort_linevec
	arguments.  Sorting is now dependent on OBJF_REORDERED.  All
	callers/references changed.
	* dbxread.c (read_ofile_symtab): Correctly determine value for
	last_source_start_addr for reordered executables.
	(process_one_symbol): Handle N_FUN with no name as an end of
	function marker.
	* partial-stab.h (case N_FN, N_TEXT): Don't assume CUR_SYMBOL_VALUE
	is the high text address for a psymtab.
	(case N_SO): Likewise.
	(case N_FUN): Handle N_FUN with no name as an end of function
	marker.
	* minsyms.c (lookup_minimal_symbol_by_pc): Examine all symbols
	at the same address rather than a random subset of them.
	* coffread.c (coff_symfile_init): Set OBJF_REORDERED.
	* elfread.c (elf_symfile_init): Similarly.
	* somread.c (som_symfile_init): Similarly.
	* xcoffread.c (xcoff_symfile_init): Similarly.

Fri Jan  5 17:46:01 1996  Stu Grossman  (grossman@cygnus.com)

	* stack.c (print_stack_frame print_frame_info) symmisc.c
	(dump_symtab):  Change RETURN_MASK_ERROR to RETURN_MASK_ALL so
	that catch_errors doesn't get blindsided by QUIT and lose the
	cleanup chain.  This fixes a problem where ^C while in a
	user-defined command sometimes leaves instream NULL and causes a
	segfault in command_loop.

Fri Jan  5 13:59:16 1996  Brendan Kehoe  <brendan@lisa.cygnus.com>

	* configure.in, configure: Add `-ldl -lw' for Solaris linking.

Fri Jan  5 12:02:00 1996  Steve Chamberlain  <sac@slash.cygnus.com>

	* config/sh/sh.mt, config/powerpc/*.mt, config/pa/hppapro.mt,
	config/m68k/monitor.mt, config/h8500/h8500.mt, config/h8300/h8300.mt:
	srec.o renamed to dsrec.o.

Thu Jan  4 16:04:54 1996  Stu Grossman  (grossman@cygnus.com)

	* breakpoint.c (remove_breakpoint):  Change error to warning so
	that hardware watchpoint removal problems won't leave breakpoint
	traps in the target.
start-sanitize-gdbtk
	* configure configure.in:  Make --enable-gdbtk be the default.
end-sanitize-gdbtk
	* remote-e7000.c (e7000_insert_breakpoint,
	e7000_remove_breakpoint):  Use e7000 based breakpoints, not memory
	breakpoints.
	* (e7000_wait):  Adjust PC back by two when we see a breakpoint to
	compensate for e7000 maladjustment.
	* sparcl-tdep.c (sparclite_check_watch_resources):  Fix logic bug
	which prevented hardware watchpoints from working.

Thu Jan  4 10:44:17 1996  Fred Fish  <fnf@cirdan.cygnus.com>

	* infptrace.c (udot_info): New function.
	(PT_*): Define each individually if that one is not defined.
	* rs6000-nat.c (kernel_u_size): New function
	Include <sys/user.h> for "struct user"
	* alpha-nat.c (kernel_u_size): New function.
	Include <sys/user.h> for "struct user"
	* sparc-nat.c (kernel_u_size): New function.
	Include <sys/user.h> for "struct user"
	* i386b-nat.c (kernel_u_size): New function.
	* i386v-nat.c (kernel_u_size): New function.
	* config/i386/nm-fbsd.h (KERNEL_U_SIZE): Define.
	(kernel_u_size): Declare.
	* config/i386/nm-linux.h (KERNEL_U_SIZE): Define.
	(kernel_u_size): Declare.
	* config/sparc/nm-sun4os4.h (KERNEL_U_SIZE): Define.
	(kernel_u_size): Declare.
	* config/alpha/nm-osf2.h (KERNEL_U_SIZE): Define.
	(kernel_u_size): Declare.
	* config/rs6000/nm-rs6000.h (KERNEL_U_SIZE): Define.
	(kernel_u_size): Declare.

Thu Jan  4 11:00:01 1996  steve chamberlain  <sac@slash.cygnus.com>

	* mdebugread.c (mylookup_symbol): enum namespace becomes
	enum_namespace 	type.
	* symfile.c (add_psymbol_to_list)
	(add_psymbol_addr_to_list): Ditto.
	* symtab.c (lookup_partial_symbol): Ditto.
	(lookup_symbol): Ditto.
	(lookup_block_symbol): Ditto.	
	* win32-nat.c (handle_load_dll): Use incoming dll base.
	(child_wait): Catch DLL load errors.
	(create_child_inferior): Translated between paths correctly.

Wed Jan  3 23:13:53 1996  Fred Fish  <fnf@cygnus.com>

	* i386v4-nat.c (supply_gregset, fill_gregset): Subtract NUM_FREGS
 	from NUM_REGS to get number of general registers that we care about.
	* config/i386/tm-i386.h (REGISTER_BYTES): Define in terms
	of number of general regs and number of floating point regs.

Wed Jan  3 19:49:54 1996  steve chamberlain  <sac@slash.cygnus.com>

	* config/i386/tm-win32.h (IN_SOLIB_CALL_TRAMPOLINE): New.
	(SKIP_TRAMPOLINE_CODE): New.
	* config/i386/xm-win32.h (CANT_FORK): Deleted.
	(SLASH*) Changed to use unix style slash.
	* symtab.h (namespace enum): becomes typedef to avoid namespace
	collision in C++. 
	* infcmd.c (path_command): Use empty string if PATH name not set.
	* i386-tdep.c (skip_trampoline_code): New function.
	* srec.c: Renamed dsrec.c to avoid filename collision.
	* Makefile.in: Cope with renaming.
	
Wed Jan  3 13:09:04 1996  Fred Fish  <fnf@cygnus.com>

	* symmisc.c (print_objfile_statistics): Print memory use statistics
	for objfile psymbol, symbol, and type obstacks.

Tue Jan  2 13:41:14 1996  Stan Shebs  <shebs@andros.cygnus.com>

	* config/mips/nm-irix5.h: Restore.
	(TARGET_HAS_HARDWARE_WATCHPOINTS, etc): Define as for Irix 4;
	from Lee Iverson <leei@ai.sri.com>.
	* config/mips/irix5.mh (NAT_FILE): Use nm-irix5.h.
	* config/mips/irix[345].mh (MUNCH_DEFINE): Remove.

For older changes see ChangeLog-95

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
