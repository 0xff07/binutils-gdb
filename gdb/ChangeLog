Mon Feb 17 07:13:27 1992  Fred Fish  (fnf at cygnus.com)

	* dwarfread.c (process_dies):  Add case to handle TAG_pointer_type
	DIE's.  Add new function read_tag_pointer_type() to read them.

	* dwarfread.c (dwarf_read_array_type, read_subroutine_type):
	When creating a new user defined type, check to see if a partial
	type already exists, and if so, bash it to fit.

Thu Feb 13 17:14:28 1992  Fred Fish  (fnf at cygnus.com)

	* elfread.c (elf_symtab_read):  Fix code to correctly track
	changes in bfd for absolute symbols.

Thu Feb 13 12:43:29 1992  Stu Grossman  (grossman at cygnus.com)

	* xm-vaxbsd.h:  Close off comment.

Thu Feb 13 07:45:19 1992  Fred Fish  (fnf at cygnus.com)

	* xm-sysv4.h:  Define NEED_POSIX_SETPGID.

Fri Feb  7 11:51:12 1992  Per Bothner  (bothner at cygnus.com)

	* mips-tdep.c (mips_print_registers):  Print correct register
	number for double pseudo-registers.

Fri Feb  7 07:56:05 1992  John Gilmore  (gnu at cygnus.com)

	* buildsym.c (read_struct_type):  Avoid double-bump of parse ptr
	in the op$::OPERATOR. case.  From Steven McCanne,
	<mccanne@horse.ee.lbl.gov>.

	* exec.c (set_section_name):  Pass arg to exec_files_info;
	only call it if interactive.  From Francis Kauth <fk@tv.tv.tek.com>.

Thu Feb  6 17:41:32 1992  John Gilmore  (gnu at cygnus.com)

	* main.c (print_gdb_version):  Copyright msg: only this year.
	(cd_command):  Avoid changing current_directory on error.

Thu Feb  6 15:14:01 1992  Per Bothner  (bothner at cygnus.com)

	* mipsread.c (parse_partial_symbols):  Handle dependencies
	between partial symbol tables (when not doing stabs-in-ecoff).
	(This used to be handled by parse_fdr, but parse_fdr was
	incompatible with handling stabs-in-ecoff, so the code
	was re-written to not use parse_fdr.  Unfortunately,
	the logic to handle dependencies was overlooked.)

Thu Feb  6 11:51:39 1992  Steve Chamberlain  (sac at rtl.cygnus.com)

	* coffread.c (read_enum_type): Use the size of a target int when
	describing enum.
	* defs.h: added new #define for TARGET_PTR_BIT, defaults to size
	of target int.
	* h8300-tdep.c, remote-hms.c, tm-h8300.h: too many changes to count
	* symtab.c (lookup_reference_type, lookup_ptr_type): use
	TARGET_PTR_BIT to determine size of a pointer
	* values.c (unpack_long): when unpacking a REF or a PTR don't
	assume the size of the type.

Wed Feb  5 22:29:59 1992  John Gilmore  (gnu at cygnus.com)

	* mipsread.c (parse_symbol):  Avoid clobbering enum pointer when
	looking at its members.  Improve guess between struct and union,
	only assuming union if multiple members have offsets of zero.

Tue Feb  4 18:05:44 1992  Per Bothner  (bothner at cygnus.com)

	* mipsread.c:  Use (FP0_REGNUM-32) instead of magic number 6.
	(This is just for clarity - and one day permitting us to
	 change FP0_REGNUM from 38 to 32, which would make more sense.)
	* tm-mips.h:  Added STAB_REG_TO_REGNUM macro, so that
	register numbers in stabs-in-ecoff get handled correctly.

Sat Feb  1 04:45:10 1992  Stu Grossman  (grossman at cygnus.com)

 	* xm-vax.h, xm-vaxult.h, xm-vaxbsd.h, config/mh-vaxult,
	config/mh-vaxbsd, configure.in:  Split up config stuff for Vaxen
	into BSD and Ultrix.

Sat Feb  1 04:39:41 1992  John Gilmore  (gnu at cygnus.com)

	* dbxread.c (dbx_symfile_init):  Call malloc, not xmalloc.

Sat Feb  1 04:15:41 1992  Stu Grossman  (grossman at cygnus.com)

	* Makefile.in:  Increment version to 4.4.1.
	* main.c (print_gdb_version):  Update copyright notice.

Sat Feb  1 01:43:11 1992  Per Bothner  (bothner at cygnus.com)

	* mipsread.c:  Prepend "struct " to the names of structure
	types, and similarly for enums and unions.  (This used
	to be done, but got lost in the re-write to "guess" the
	difference between enum/struct/union.)
	Also, guess that a tag is an enum if the first member
	has type btNil.

Fri Jan 31 21:45:51 1992  Stu Grossman  (grossman at cygnus.com)

	* xm-vax.h:  #ifndef ultrix around #include of endian.h and
	limits.h (sigh).

Fri Jan 31 00:05:01 1992  John Gilmore  (gnu at cygnus.com)

	* Projects:  Patching executables is done.
	* Makefile.in (VERSION):  Roll to gdb-4.4.
	* README, WHATS.NEW:  Update for gdb-4.4.

	* symfile.c (reread_symbols):  Whenever we reread one object
	file's symbols, we must restart the scan, because the object_files
	chain has been permuted.

	* exec.c (exec_files_info):  Split out into print_section_info.
	Print BFD filename of each section if it's not the default one.
	* core.c (core_files_info):  Call print_section_info.

	* xm-vax.h:  Include a few system header files whose definitions
	must precede defs.h.
	* language.c, language.h:  Make some things const.
	* expression.h, main.c:  const spreads like ooze.

	* mem-break.c (break_insn, break_insn_size):  Use unsigned chars,
	since BREAKPOINT values can be >0x80.

Thu Jan 30 17:21:14 1992  Stu Grossman  (grossman at cygnus.com)

	* infrun.c, xm-i386sco.h:  SCO needs to use setpgid().

Thu Jan 30 01:04:23 1992  John Gilmore  (gnu at cygnus.com)

	* sparc-pinsn.c:  Remove kludge for preferring architectures.
	Remove #ifdef's for SORT_NEEDED.  We need to sort the table, now
	and forever.  Add `add' instruction to the set that get checked
	for a preceding `sethi' in order to print an absolute address.
	Corresponding changes in ../include/opcode/sparc.h needed
	to eliminate garbage instructions.

Wed Jan 29 19:24:34 1992  Per Bothner  (bothner at cygnus.com)

	* mipsread.c (parse_partial_symbols):  Make sure partial
	symbols are created for external symbols (as used to be
	the case).  This is a bit of a pain with the mips-coff.
	It uses a table which points to all of the external
	symbols belonging to a particular FDR or psymtab.
	Once we've generated this table, we might as well save
	it, and then use it in psymtab_to_symtab_1 to find
	the symbols to pass to parse_external().
	* symfile.c,  symfile.c:  New function start_psymtab_common
	to share the common parts of allocating a new psymtab
	for dbxread, mipsread (and later dwarfread).  Its code
	was pulled out from start_psymtab in dbxread.c.
	* dbxread.c (start_psymtab):  Use start_psymtab_common().

	* valprint.c (val_print):  If there is an error when trying
	to print a string, check to see if there really is a problem
	by reading just one character.  If that works, assume
	things are ok.

Wed Jan 29 18:58:43 1992  Stu Grossman  (grossman at cygnus.com)

	* sparc-pinsn.c (compare_opcodes):  Make it prefer v6, v7,
	cypress, v8 mnemonics in that order.

Tue Jan 28 17:32:13 1992  Per Bothner  (bothner at cygnus.com)

	* sparc-pinsn.c:  Put the qsort() back in.

Mon Jan 27 18:51:03 1992  John Gilmore  (gnu at cygnus.com)

	* findvar.c (read_register, write_register):  Handle machines
	where REGISTER_TYPE is not the same size as "int".

	Handle debug symbols in dynamically loaded (relocated) code:

	* dbxread.c (read_ofile_symtab):  Fix up N_CATCH better.  Pass
	offset to process_one_symbol.
	(process_one_symbol):  Take new offset parameter.  Add it into
	appropriate symbol types to relocate symbols to loaded addresses.
	Handle all possible symbol types, and complain() about types that
	we don't expect to see.
	* mipsread.c (psymtab_to_symtab_1):  Pass offset of zero to
	process_one_symbol (FIXME, should pass real offset).

	Misc bugfixes:

	* breakpoint.c (resolve_sal_pc):  Split out code to resolve a
	sal's PC value.
	(set_breakpoint, break_command_1, until_break_command,
	catch_command_1, breakpoint_re_set_one):  Use it.
	* symtab.h (resolve_sal_pc):  Declare.
	* infcmd.c (jump_command):  Use resolve_sal_pc.

	* source.c (list_command):  Shorten "FILE, line N" to "FILE:N".

	* putenv.c (putenv):  Avoid unportably casting pointers to unsigneds.

	* c-exp.y (yylex):  `this' and `template' are only tokens in C++.

	* xm-convex.h, xm-hp300bsd.h, xm-isi.h, xm-merlin.h, xm-news.h,
	xm-np1.h, xm-pn.h, xm-pyr.h, xm-rtbsd.h, xm-symmetry.h, xm-umax.h:
	Remove MISSING_VPRINTF declaration, and superfluous "kgdb" defines.

Mon Jan 27 15:46:21 1992  Stu Grossman  (grossman at cygnus.com)

	* dbxread.c (process_one_symbol):  Make a first cut at handling
	symbol tables generated by Sun's acc.  (#ifdef'd out, FIXME.)

	* symtab.c (find_pc_line):  Fix stepping into and out of #included
	files.

Mon Jan 27 13:00:55 1992  Stu Grossman  (grossman at cygnus.com)

	* Makefile.in (OPCODES):  Remove OPCODES defs and refs.  There is
	no longer any need to copy ../include/opcode/* into gdb.

Mon Jan 27 12:30:38 1992  John Gilmore  (gnu at cygnus.com)

	* ChangeLog, ChangeLog-9091:  Split ChangeLog at 1992.

Sun Jan 26 19:05:40 1992  Per Bothner  (bothner at cygnus.com)

	* valprint.c (type_print_base, type_print_method_args):
	Print C++ constructor methods without bogus "return type."

Sat Jan 25 15:57:59 1992  Fred Fish  (fnf at cygnus.com)

	* infptrace.c (child_xfer_memory):  Parameter "target" should
	be a pointer to a structure, not the entire structure.

Fri Jan 24 01:30:27 1992  Fred Fish  (fnf at cygnus.com)

	* depend:  Convert the couple of references to ansidecl.h that
	used the local gdb version to use the ../include version.

Thu Jan 23 22:24:43 1992  Fred Fish  (fnf at cygnus.com)

	* procfs.c
	(child_xfer_memory): Takes pointer to a struct, not entire struct.
	(inferior_proc_init):  Fix non-ANSI version of args.
	(attach):  Call print_sys_errmsg with correct number of args.
	(mappingflags):  Make static, does not need to be global.

	* i386-tdep.c (i386_frame_num_args):  Takes a pointer to a struct
	not the entire struct itself.

	* valops.c (value_assign):  Cast some args to modify_field() and
	{read,write}_register_bytes() correctly.

	* ansidecl.h:  Removed, is duplicate of ../include/ansidecl.h

	* Makefile.in (MALLOCSRC):  Removed reference to removed local
	copy of ansidecl.h.

	* dwarfread.c (list_in_scope):  Needs an initial value, use file
	scope.

Mon Jan 20 19:06:28 1992  Stu Grossman  (grossman at cygnus.com)

	* main.c (main):  Make option_index local to keep new getopt happy.
	main.c, solib.c, Makefile.in:  Update copyright notices.

Mon Jan 20 08:54:00 1992  Michael Tiemann  (tiemann at cygnus.com)

	* cplus-dem.c (cplus_demangle): Correctly demangle destructors.

Sat Jan 18 17:17:45 1992  Stu Grossman  (grossman at cygnus.com)

	* Makefile.in (HFILES):  Add partial-stab.h.

Sat Jan 18 16:45:01 1992  Fred Fish  (fnf at cygnus.com)

	* config/mh-stratus, config/mt-stratus, tm-stratus.h, xm-stratus.h:
	New files for stratus.  Not complete enough to actually build
	on the Stratus machine; that awaits copyright assignment for
	i860 changes.

	* Makefile.in (USER_CFLAGS):  Add macro specifically reserved
	for getting custom flags into CFLAGS when doing makes.

	* configure.in:  Add config information for stratus.

Thu Jan 16 00:51:46 1992  Fred Fish  (fnf at cygnus.com)

	* dbxread.c (process_one_symbol):  Pass address of structure
	to complain(), rather than the whole structure.

Wed Jan 15 09:56:16 1992  Fred Fish  (fnf at cygnus.com)

	* solib.c (solib_add_common_symbols):  Only compile in when not
	using SVR4 style shared libraries.

Tue Jan 14 22:34:00 1992  Fred Fish  (fnf at cygnus.com)

	* dwarfread.c (locval):  Add offreg flag to indicate location
	values that are computed off a base register.

	* dwarfread.c (new_symbol):  Rework TAG_global_variable and
	TAG_local_variable cases to account for static variables
	within function scopes.

Tue Jan 14 12:28:52 1992  Stu Grossman  (grossman at cygnus.com)

	* inflow.c:  remove #include <sys/dir.h>.  Not necessary, and
	doesn't exist on some systems.

	* infrun.c (wait_for_inferior!!!!):  Prevent gdb from hanging when
	nexting over recursive function calls.

	* target.c (target_read_string):  Create this routine to read null
	terminated strings from the target.  It deals with running off the
	end of memory elegantly as well.  solib.c (find_solib):  Use
	target_read_string() to avoid problems with running off the end of
	memory.

	* inflow.c (child_terminal_info):  #ifdef TIOCPGRP around lines
	that reference pgrp_inferior.

Mon Jan 13 14:57:11 1992  Per Bothner  (bothner at cygnus.com)

	* tm-mips.h:  Removed BLOCK_ADDRESS_ABSOLUTE, now that
	mips-tfile has been hacked to act more "traditionally."
	* dbxread.c:  Fixed typo in comment.

Sun Jan 12 13:08:36 1992  Per Bothner  (bothner at cygnus.com)

	* mips-tdep.c (mips_skip_prologue):  Add some number of
	'sw' instructions before 'addiu' adjusts the stack.

Fri Jan 10 13:47:06 1992  Fred Fish  (fnf at cygnus.com)

	* dwarfread.c (start_symtab, end_symtab, scopecount, openscope,
	freescope, buildblock closescope, record_line, add_symbol_to_list,
	gatherblocks, make_blockvector):  Extensive changes to switch
	to generic symbol table building code in buildsym.c.  Remove
	scope tree structures and functions, symbol table building
	functions, and lots of other small changes.

	* dwarfread.c:  Add new macros GCC_PRODUCER and STREQN.  Remove
	GCC_COMPILED_FLAG_SYMBOL and GCC2_COMPILED_FLAG_SYMBOL.

Tue Jan  7 13:09:57 1992  Stu Grossman  (grossman at cygnus.com)

	* buildsym.c (cleanup_undefined_types):  Add support for enums.
	This fixes the 'GDB internal error.  cleanup_undefined_types with
	bad type' problem.

Sun Jan  5 09:47:50 1992  Stu Grossman  (grossman at cygnus.com)

	* dbxread.c:  detect gcc2 compilations.

Thu Jan  2 15:07:41 1992  John Gilmore  (gnu at cygnus.com)

	* sparc-pinsn.c:  Rename bitfields that overlap with macro names
	in ../include/opcode/sparc.h.

Wed Jan  1 04:29:00 1992  Fred Fish  (fnf at cygnus.com)

	* Makefile.in:  Change tm-svr4.h to tm-sysv4.h.  Change xm-svr4.h
	to xm-sysv4.h.  Split OPCODE_DIR into OPCODE_DIR1 and OPCODE_DIR2
	to reflect actual locations of opcode files, so TAGS target will
	be buildable.

	* i386-tdep.c:  Change an erroneous 'm68k' reference to 'i386'.

	* i386-tdep.c (supply_fpregset, fill_fpregset):  Remove m68k
	code.

	* m68k-tdep.c (supply_fpregset, fill_fpregset):  Fix array
	dereferencing to access the correct elements.

	* valops.c (value_addr):  Declare return type of external func
	value_copy().

	* xcoffread.c:  Undefine next_symbol_text before redefining it.

For older changes see ChangeLog-9091

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
