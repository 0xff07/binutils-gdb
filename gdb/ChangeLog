Wed Feb  2 11:16:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (decode_format): Don't blithely set the size for
	an address to 'w'.  Make it 'g' or 'h', depending on TARGET_PTR_BIT.

	* defs.h: Just typedef CORE_ADDR to bfd_vma.  Include bfd.h.
	If BFD64, make a LONGEST a BFD_HOST_64_BIT.
	* defs.h (longest_to_int): Don't depend on CC_HAS_LONG_LONG; instead
	always just check against INT_MIN and INT_MAX (this also fixes things
	if sizeof (long) > sizeof (int), e.g. Alpha).
	* config/pa/tm-hppa.h, config/i386/sun386.h, config/rs6000/tm-rs6000.h:
	Don't define LONGEST or BUILTIN_TYPE_LONGEST.
	* gdbtypes.h: Remove BUILTIN_TYPE_LONGEST and
	BUILTIN_TYPE_UNSIGNED_LONGEST.
	* language.h, c-lang.c, ch-lang.c, m2-lang.c: Remove longest_int
	and longest_unsigned_int.
	* value.h (struct value): Just align to LONGEST, rather than worrying
	about CC_HAS_LONG_LONG.
	* valarith.c (value_binop, _initialize_valarith): Figure out type
	ourself based on sizeof (LONGEST) rather than relying on
	BUILTIN_TYPE_LONGEST.  The point is that we don't depend on
	CC_HAS_LONG_LONG anymore.
	* valprint.c (val_print_type_code_int): Just call
	extract_unsigned_integer directly, rather than going through
	unpack_long.
	* printcmd.c (decode_format): Remove code which would sometimes
	change 'g' size to 'w' for integers.  print_scalar_formatted handles
	printing huge integers well enough, thank you.

	* command.c (add_set_cmd, no_just_help_class_command): Change
	to make this the sfunc, not cfunc, since that is how we call it.
	* command.h: Comment difference between sfunc and cfunc.
	* demangle.c (set_demangling_command): Add third arg since that
	is how it is called.
	(_initialize_demangler): Use sfunc, not cfunc, for
	set_demangling_command, since that is how it is called.
	Remove show_demangling_command; it has no effect.

	* command.c (shell_escape): Report errors correctly (with error
	message from strerror).

Wed Feb  2 14:35:41 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* xcoffread.c (read_xcoff_symtab): Change CSECT_LEN to use
	x_scnlen.l rather than x_scnlen to match corresponding change in
	coff/internal.h.

Wed Feb  2 11:16:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* gdbtypes.h, ch-typeprint.c, ch-valprint.c:
	Change comments regarding TYPE_CODE_BOOL.
	* language.c (boolean_type): Always return 1 for TYPE_CODE_BOOL,
	regardless of the language.
	(value_true): Just call value_logical_not regardless of language.
	* coffread.c (coff_read_enum_type), stabsread.c (read_enum_type):
	Remove #if 0'd code which makes some enums TYPE_CODE_BOOL.
	* language.h: Improve comment for la_builtin_type_vector.
	* m2-lang.c (_initialize_m2_language): Don't add any fields to
	builtin_type_m2_bool.

Tue Feb  1 17:13:32 1994  Kevin Buettner (kev@cujo.geg.mot.com)

	* config/m88k/{tm-delta88.h,tm-delta88v4.h}, m88k-tdep.c:
	Define IN_SIGTRAMP and backtrace correctly through signal handlers.

Tue Feb  1 22:13:25 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* procfs.c (wait_fd):  Handle EINTR error return from PIOCWSTOP ioctl
	by restarting the ioctl.

Tue Feb  1 16:16:25 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* target.h (target_wait): Add comment about calling
	return_to_top_level.

Tue Feb  1 12:21:00 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* coffread.c (read_one_sym): bfd_coff_swap_aux_in now takes
	additional arguments.
	* xcoffread.c (read_xcoff_symtab, read_symbol_lineno): Likewise.

Mon Jan 31 16:10:41 1994  Stu Grossman  (grossman at cygnus.com)

	* sparc-stub.c:  Remove unnecessary #include of memory.h.

Mon Jan 31 12:12:34 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* mips-tdep.c: Remove code which sets saved_regs from
	init_extra_frame_info and put it in new function mips_find_saved_regs.
	(READ_FRAME_REG): Remove macro and replace uses with the expansion.
	* mips-tdep.c, config/mips/tm-mips.h: When examining ->saved_regs,
	check if it is NULL and call mips_find_saved_regs if so.

	* remote-mips.c: Use unfiltered, not filtered, output most places.

	* blockframe.c (get_prev_frame_info): Detect and stop an infinite
	backtrace.  Revise comments.

Mon Jan 31 09:40:33 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_procedure):  Remove _sigtramp kludges for
	alpha and irix. The _sigtramp case has to be handled properly
	in the tdep files if we have no ecoff debugging info.
	* alpha-tdep.c (alpha_frame_saved_pc, alpha_frame_chain),
	mips-tdep.c (mips_frame_saved_pc):  Handle signal handler frames
	without PC_REGNUM kludge.
	* mdebugread.c (fixup_sigtramp), mips-tdep.c (read_next_frame_reg):
	Clean up handling of mips sigtramp frames, improve comments.

Sat Jan 29 23:25:57 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* paread.c (read_unwind_info): Fix typo.

	* paread.c (pa_symtab_read): Update the "check_strange_names"
	filter to match GCC's current output.  Filter out section symbols
	(which the HP linker sometimes puts in the wrong place).

Sat Jan 29 07:44:59 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* serial.h (SERIAL_SET_TTY_STATE): Comment return value.

	* Makefile.in (TAGS): Just echo one line, rather than the whole thing.

	* Makefile.in: Remove all references to sparcly-nat.c.

	* Makefile.in (HFILES_NO_SRCDIR): Include dcache.h remote-utils.h
	remote-sim.h directly, rather than via $(remote_utils_h).  This avoids
	duplicating serial.h and target.h.

	* Makefile.in: Don't set M_INSTALL and M_UNINSTALL.  These variables
	are not used anywhere (a 5 Oct 1993 change removed the uses).

	* config/m68k/monitor.mt (TDEPFILE): Add remote-es.o.
	* config/m68k/es1800.mt: Add comment.
	* remote-es.c: Extensive changes to update to current conventions.

	* ser-unix.c (wait_for, hardwire_readchar) [HAVE_TERMIO, HAVE_TERMIOS]:
	If the timeout is too big to fit in c_cc[VTIME], then do multiple reads
	to achieve the desired timeout.
	* serial.h (serial_t): Add field timeout_remaining.

Fri Jan 28 08:45:02 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* c-exp.y (yylex): Reenable nested type code.

Fri Jan 28 15:40:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* a29k-tdep.c (examine_tag): Add comment regarding argcount.

	* remote-mips.c (mips_ops): Fix docstring.

	* remote-bug.c (bug_ops): Remove spurious newline from docstring.

	* config/m68k/tm-monitor.h: Changes to bring this into accordance
	with the old tm-m68k-em.h:
	(GDBINIT_FILENAME, DEFAULT_PROMPT): Remove.
	(HAVE_68881): Don't undefine; HAVE_68881 is obsolete.
	(REGISTER_NAMES): Don't muck with it; what tm-m68k.h has is fine.
	Add FIXME regarding GET_LONGJMP_TARGET.

	* remote-udi.c (udi_close, udi_detach, udi_kill): Add comments.
	* infptrace.c (kill_inferior): Add comments.
	* main.c (quit_command): Call target_close after we kill or
	detach.
	* remote-udi.c (udi_close): Don't error() if QUITTING.

Fri Jan 28 11:55:52 1994  Rob Savoye  (rob@darkstar.cygnus.com)

	* configure.in: Make m68k-coff and aout add monitor support in
	addition to the standard serial support.

Fri Jan 28 08:45:02 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* mdebugread.c (psymtab_to_symtab_1): Don't complain on stLabel with
	index indexNil.

Fri Jan 28 10:40:34 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/pa/tm-hppa.h: Define macro SMASH_TEXT_ADDRESS.
	* elfread.c (record_minimal_symbol_and_info),
	dwarfread.c (process_dies), paread.c (pa_symtab_read): Use it.

Thu Jan 27 15:12:23 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i386-stub.c: Add ".text" right before "mem_fault:".

	* main.c (baud_rate): Add FIXME comment about printing -1 value.

	* remote-utils.c (usage): Fix message to be accurate and conform
	more closely to normal conventions.

	* remote-utils.c (gr_files_info): Have the exec_bfd test control
	whether to show information about exec_bfd, and not control whether
	to show information about device and speed.

	* remote-utils.c (gr_open): If sr_get_device returns NULL, give
	usage message, don't dump core.

	* remote-bug.c (bug_write_memory): Use alloca, not GCC extension
	for variable size array.
	(bug_fetch_register, bug_store_register): Rename "value" to
	"fpreg_buf" because some compilers don't like variables whose
	names are the same as types.
	(bug_store_register): Use a cast when converting char * to
	unsigned char *.

	* symmisc.c (maintenance_print_symbols): Don't refer to the name
	of the command in error message (the text was referring to the old
	name of the command).

	* symmisc.c (dump_symtab): Fix args to fprintf_filtered.

	* c-typeprint.c (c_type_print_base): Have SHOW == 0 mean to print
	full details on structure elements without names.  This partially
	reverts the changes of 1 Jul 1993 and 31 Aug 1993; I think this aspect
	of those changes was accidental.

	* stack.c (parse_frame_specification): If SETUP_ARBITRARY_FRAME is
	defined, make it an error to specify a single argument which is not
	a frame number.

	* Makefile.in (version.c), main.c (print_gdb_version): Use
	host_alias and target_alias, not host_canonical and
	target_canonical, to print configuration.

Wed Jan 26 10:57:21 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* parse.c (write_exp_msymbol): Use new type msymbol_addr_type instead
	of builtin_type_long.  It is necessary to get a type which is
	TARGET_PTR_BIT bits in size; builtin_type_long might not be big enough.

	Fix many sins which will come up in 32 bit x 64 bit GDB, and
	various miscellaneous things discovered in the process:
	* printcmd.c, defs.h (print_address_numeric): New function.
	* c-valprint.c (c_val_print), ch-valprint.c (chill_val_print)
	breakpoint.c (describe_other_breakpoints, breakpoint_1, mention),
	cp-valprint.c (cplus_print_value), infcmd.c (jump_command),
	printcmd.c, stack.c, symfile.c, symmisc.c, valprint.c:
	Use it.
	* utils.c, defs.h (gdb_print_address): New function.
	* expprint (dump_expression), gdbtypes.h: Use it.
	* breakpoint.c (describe_other_breakpoints),
	symmisc.c (dump_symtab, print_symbol):
	Use filtered not unfiltered I/O.
	(remove_breakpoints): Remove BREAKPOINT_DEBUG code.  Might as well
	just run gdb under a debugger for this (and it had problems with
	printing addresses, how to print b->shadow, etc.).
	* buildsym.c (make_blockvector), core.c (memory_error),
	exec.c (print_section_info), maint.c (print_section_table),
	mdebugread.c (parse_procedure), solib.c, source.c, symfile.c,
	symmisc.c, symtab.c, valops.c, valprint.c, xcoffexec.c:
	Add comments saying code is broken.  Marked with "FIXME-32x64".
	* dbxread.c (process_one_symbol), partial-stab.h (default),
	remote-vx.c (vx_run_files_info):
	Don't cast int being passed to local_hex_string.
	* symmisc.c (print_symbol): Don't cast long being passed to %lx.
	* symtab.h (general_symbol_info): Add comment about SYMBOL_VALUE
	only being a long.
	* symmisc.c (print_symbol): Print "offset" in message for LOC_ARG
	and LOC_LOCAL.
	* printcmd.c (print_address): Remove #if 0 code with ADDR_BITS_REMOVE.
	* source.c: Include <sys/types.h> regardless of USG.

Tue Jan 25 12:58:26 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* valops.c (value_assign):  Set `type' after coercing toval.
	* c-valprint.c (c_val_print), ch-valprint.c (chill_val_print):
	Use extract_unsigned_integer to get the address of a reference.

Tue Jan 25 11:31:53 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (STABS_CONTINUE, error_type), partial-stab.h:
	AIX can use ? instead of \ for continuation.  Deal with it.

	* paread.c (read_unwind_info): Just assign to objfile->obj_private,
	not OBJ_UNWIND_INFO.  Assigning to a cast is a GCC-ism which
	the HP compiler in ANSI mode doesn't like.

	* main.c: When defaulting HAVE_SIGSETMASK based on USG, just do it
	based on USG, rather than defining HAVE_SIGSETMASK to an
	expression containing defined.  Having a macro used in #if expand
	to an expression containing "defined" is undefined according to
	ANSI, and the HP compiler in ANSI mode doesn't do what we wanted
	it to.

Mon Jan 24 20:51:29 1994  John Gilmore  (gnu@cygnus.com)

	* sparc-nat.c (fetch_inferior_registers, store_inferior_registers):
	Clean up the changes of 11 Jan, as recommended by Peter Schauer.

Fri Jan 21 19:10:44 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* ch-exp.y (match_string_literal):  Allow a zero-length string.
	* ch-lang.c (chill_printstr):  Don't print zero-length string funny.

Sat Jan 22 17:08:48 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i386aix-nat.c (i386_float_info): Reverse order of registers before
	passing them to print_387_status.
	(print_387_status): Don't subtract top from 7 before using it.
	* i387-tdep.c: Remove comment about AIX wanting "top" subtracted
	from 7; the above explains it.

Sat Jan 22 20:25:11 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mips-tdep.c (init_extra_frame_info):  Use frame relative stack
	pointer value when fixing up the frame at the start of a function.

Sat Jan 22 12:29:13 1994  Stu Grossman  (grossman at cygnus.com)

	* lynx-nat.c (fetch_core_registers):  Load the I & L regs for the
	Sparc from the stack.

Sat Jan 22 08:30:42 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote-mips.c (mips_initialize): Clear mips_initializing via
	cleanup chain, not directly.

	* ser-unix.c (wait_for) [HAVE_TERMIO, HAVE_TERMIOS]: Make a timeout
	of -1 mean forever, like in the HAVE_SGTTY case.  Warn if we are
	munging the timeout due to the limited range of c_cc[VTIME].

	* fork-child.c, inferior.h (fork_inferior): New argument shell_file.
	* procfs.c (procfs_create_inferior), inftarg.c (child_create_inferior),
	m3-nat.c (m3_create_inferior): Pass it.
	* procfs.c: Remove ptrace function.  It was declared in a way which
	conflicted with the prototype in unistd.h on Solaris.

Sat Jan 22 01:37:40 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* sparc-tdep.c (frame_saved_pc):  Get the pc from the saved pc
	in the sigcontext if it is a signal trampoline frame.
	* config/sparc/tm-sun4sol2.h (IN_SIGTRAMP, SIGCONTEXT_PC_OFFSET):
	Define for Solaris2.

Sat Jan 22 00:34:47 1994  Stu Grossman  (grossman at cygnus.com)

	* sparc-tdep.c, lynx-nat.c, config/sparc/tm-sparc.h,
	config/sparc/tm-sparclynx.h:  Move defs of FRAME_SAVED_I0/L0 to
	tm-sparc.h so they can be overridden if necessary.

Fri Jan 21 17:49:28 1994  Stu Grossman  (grossman at cygnus.com)

	* lynx-nat.c:  Add Sparc support.
	* sparcly-nat.c:  Remove.  It's useless.
	* config/sparc/nm-sparclynx.h:  Rewrite.
	* config/sparc/sparclynx.mh (NATDEPFILES):  Replace sparcly-nat.o
	with lynx-nat.o
	* config/sparc/tm-sparclynx.h:  Rewrite.

Fri Jan 21 19:08:48 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* rs6000-pinsn.c: Use the new disassembler in the opcodes
	directory.  Old code was discarded, since the new opcode table has
	a different format.

Fri Jan 21 14:28:30 1994  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (realclean):  Remove info files per make-stds.texi.

Fri Jan 21 12:47:53 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dbxread.c (end_psymtab): Only patch psymtab textlow and texthigh
	if N_SO_ADDRESS_MAYBE_MISSING is defined.
	* config/sparc/tm-sun4sol2.h: Define it.

Thu Jan 20 15:04:24 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* printcmd.c (print_address_symbolic):  Unconditionally use msymbol
	if we did not find a symbol.

Fri Jan 21 08:20:18 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* infptrace.c (child_xfer_memory): Only use if CHILD_XFER_MEMORY
	is not defined.

	* hppab-nat.c (call_ptrace): Delete redundant function.
	(kill_inferior, attach, detach, child_resume): Likewise.
	(child_xfer_memory): Likewise.

	* hppah-nat.c (call_ptrace): Delete redundant function.
	(kill_inferior, attach, detach, child_resume): Likewise.

	* config/pa/hppabsd.mh (NATDEPFILES): Add infptrace.o.

	* config/pa/hppahpux.mh (NATDEPFILES): Add infptrace.o.

	* config/pa/nm-hppab.h (FETCH_INFERIOR_REGISTERS): Define.

	* config/pa/nm-hppah.h (FETCH_INFERIOR_REGISTERS): define.
	(CHILD_XFER_MEMORY): Define.
	(PT_*): Define so that generic infptrace.c code can be used.

Fri Jan 21 09:23:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (xcoff_symfile_read): Make second parameter a
	struct section_offsets *, not a (nonexistent) struct section_offset *.

	* xcoffread.c (read_xcoff_symtab): Make main_aux just a union
	internal_xcoff_symtab, not an array of one of them.  Change lots of
	"main_aux" to "&main_aux" and so on.

	* coffread.c, xcoffread.c: Include <coff/internal.h>
	before "symfile.h".

Thu Jan 20 17:30:55 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* coffread.c (coff_getfilename): Make it not static.

	* xcoffread.c (read_xcoff_symtab): complain() not abort().

	* xcoffread.c (struct coff_symbol): Rename c_nsyms to c_naux (removes
	a completely gratuitous difference between xcoffread.c and coffread.c).

Wed Jan 19 15:09:44 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c (wait_for_inferior): Don't set frame for
	step_resume_breakpoint for IN_SIGTRAMP cases.

	* infrun.c (wait_for_inferior), breakpoint.h (struct bpstat_what),
	breakpoint.c (bpstat_what): Move step_resume from its own field of
	the struct bpstat_what into the main_action.  Make it override
	other breakpoints.  This is a conservative change in the sense
	that before the step resume breakpoint was a breakpoint.c
	breakpoint, hitting the step resume breakpoint overrode even
	calling bpstat_stop_status.

Wed Jan 19 12:40:25 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (normal_stop):  Set stop_pc after popping the dummy frame
	in case execution was stopped in the called function.
	* stack.c (print_frame_info, frame_info):  If backtracing through
	a call dummy, handle the starting source line number on a line
	boundary like backtracing through sigtramp.
	* sparc-tdep.c (sparc_frame_find_saved_regs):  Get frame address
	for call dummy frame right.  Remove old test for dummy frame,
	it has been unused at least since gdb-3.5.
	* sparc-tdep.c (sparc_push_dummy_frame):  Set return address register
	of the dummy frame.

Tue Jan 18 16:16:35 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infcmd.c (signal_command): Accept 0 as legitimate signal number.

Tue Jan 18 14:09:25 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (signals_info), target.c (target_signal_from_name):
	Use ugly casts to avoid enumvar < enumvar or enumvar++.

Mon Jan 17 22:00:15 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* ser-unix.c (hardwire_noflush_set_tty_state): Don't muck with ICANON.
	* inflow.c (terminal_ours_1): When discussing how to deal with the
	tty state, make note of query() as well as readline.

	* infrun.c (_initialize_infrun): Add TARGET_SIGNAL_POLL to list of
	signals for which stop and print are cleared by default.

Mon Jan 17 20:00:51 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* config/pa/tm-hppa.h (unwind_table_entry): Use one of the
	reserved fields to hold a stub unwind entry type.  Fix typo.
	(stub_unwind_entry): New structure for raw stub unwind entries.
	(stub_unwind_types): The types of stubs we may encounter.
	(UNWIND_ENTRY_SIZE, STUB_UNWIND_ENTRY_SIZE): New defines.
	* hppa-tdep.c (rp_saved): Use additional information provided
	by linker stub unwind descriptors.
	(frameless_function_invocation): Likewise.
	(frame_chain_valid): Likewise.
	* paread.c (compare_unwind_entries): New function for sorting
	unwind table entries.
	(read_unwind_info): Rewrite to remove dependency on host endianness.
	Read in data from the $UNWIND_END$ subspace which contains linker
	stub unwind descriptors.  Merge that data into the basic unwind
	table.

	* hppab-nat.c (_initialize_kernel_u_addr): Delete unwanted functions.

Mon Jan 17 22:00:15 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (read_xcoff_symtab, case C_FILE): Accept the name
	from either the symbol name or the auxent.
	* coffread.c, symfile.h (coff_getfilename): Renamed from getfilename,
	no longer static.

Mon Jan 17 13:35:01 1994  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (ALLPARAM):  Change irix5.h to nm-irix5.h.

Mon Jan 17 12:35:42 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* README:  Update notes for alpha port.

Mon Jan 17 11:15:57 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i960-tdep.c (i960_fault_to_signal): Return TARGET_SIGNAL_ILL
	for operation fault, constraint fault, and type fault.

Sun Jan 16 12:46:01 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (init.c): Add comment explaining formatting conventions.

	* c-exp.y (parse_number): Assign to temporary between the right
	shifts, to work around a bug in the SCO compiler.

	* Makefile.in (ALLCONFIG, ALLPARAM, ALLDEPFILES, HFILES_NO_SRCDIR):
	Add various files which were added to GDB recently.

	* xcoffread.c (process_xcoff_symbol): Only change 'V' to 'S' if not
	within_function.

	* Makefile.in: Add mostlyclean target.

Sat Jan 15 10:20:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Version 4.11.4.

Sat Jan 15 18:27:34 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* main.c (show_commands):  Make return type of extern
	history_get be HIST_ENTRY, rather than struct _hist_entry.
	(The latter loses with the upcoming merged readline.)

Sat Jan 15 10:20:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* minsyms.c (prim_record_minimal_symbol_and_info): Make tempstring
	const char *, not char *.

	* symtab.h (struct symbol): Make section short, not unsigned short.

	* symtab.c (lookup_symbol): Add comment about QUIT here.

	* utils.c (fputs_unfiltered): Call fputs, not fputs_maybe_filtered.

	* c-exp.y (parse_number): Check for overflow regardless of range
	checking.  Fix overflow check to use unsigned LONGEST, not
	unsigned int.

	* c-exp.y (parse_number): Make it so that integer constants are
	builtin_type_long_long if builtin_type_long isn't big enough or if
	an "LL" suffix is used.  Properly handle "UL" or "LU" suffixes.

	* c-typeprint.c (c_type_print_varspec_suffix, case TYPE_CODE_FUNC):
	Print our "()" first, then recurse for the target type.

Fri Jan 14 21:55:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-udi.c (udi_create_inferior): Quote empty execfile argument.

	* gdbserver/low-lynx.c: Include <sys/wait.h> not "/usr/include/wait.h".

Fri Jan 14 14:17:06 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (request_quit): Re-establish signal handler regardless
	of USG.

	* config/mips/xm-irix4.h: Define HAVE_TERMIOS.

Fri Jan 14 21:55:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i960-tdep.c: Include target.h.

Fri Jan 14 17:12:28 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* lynx-nat.c (sys/wait.h): Don't use absolute pathname.

Fri Jan 14 11:06:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* lynx-nat.c (child_wait): Fix thinkos in struct target_waitstatus
	changes (status -> ourstatus; declare status, etc.).
	* config/nm-lynx.h: Fix child_wait prototype and include target.h.

Fri Jan 14 14:17:06 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (ALLPARAM): Add config/nm-lynx.h.

Fri Jan 14 11:49:44 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* remote-mips.c (mips_request, mips_wait): Correct prototypes.

Fri Jan 14 11:37:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/i386/xm-linux.h: Define HAVE_TERMIOS.

Fri Jan 14 01:04:36 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/alpha/tm-alpha.h (CALL_DUMMY):  Improve comment.

Thu Jan 13 10:32:38 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-vx.c (vx_wait): Only call i960_fault_to_signal if I80960
	is defined.  Otherwise just report TARGET_SIGNAL_UNKNOWN.

	* mips-tdep.c (mips_push_arguments): Byteswap struct_addr before
	writing it.

	Add search to target vector (#if 0'd until after 4.12):
	* target.h (to_search, target_search): Add.
	* gdbcore.h, core.c (generic_search): Add.
	* remote.c (remote_search): Add.
	* a29k-tdep.c (init_frame_info): Use target_search to find traceback
	tag.

	* printcmd.c (print_address_symbolic): If set print fast-symbolic-addr
	is on, call find_pc_function rather than relying just on the minimal
	symbols (probably only matters for symbol readers which don't put
	statics in the minimal symbols, but changing this strikes me as
	not conservative enough).
	Initialize name_location in all cases.
	If no symbol and no msymbol, don't print anything symbolic.

	* a29k-tdep.c (push_dummy_frame): Add comment about saving lr0.

Wed Jan 12 20:53:16 1994  John Gilmore  (gnu@cygnus.com)

	* printcmd.c (print_address_symbolic):  Make it search the
	symtabs for variables as well as functions.  Add `set print
	fast-symbolic-addr' and default it to fast (the old way).
	Print line numbers for data items as well as functions.

	* symtab.c (find_addr_symbol):  Return the symtab and the symbol
	address, if a symbol is found (take two more args pointing to
	where to store these results).

	* symtab.h (find_addr_symbol):  Add prototype.

Wed Jan 12 19:32:11 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* objfiles.h: Fix comments to reflect the fact that the phrase
	"top of stack" always refers to where the pushing and popping takes
	place, regardless of whether it is at the highest or lowest address.

Wed Jan 12 13:23:37 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_symbol):  Do not set TYPE_TAG_NAME for
	compiler generated tag names.
	* mdebugread.c (parse_type):  Handle cross references to qualified
	aggregate types.
	* valops.c (value_struct_elt):  Improve error message if the
	address of a method is requested from an object instance.
	* valops.c (search_struct_method):  Make name_matched non-static
	to get it initialized correctly.
	* config/i386/nm-i386sco.h (CANNOT_STORE_REGISTER):  Define to
	exclude segment register which are not writable on newer SCO versions.

Wed Jan 12 14:44:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* go32-xdep.c: Remove unused function uerror.
	(sigsetmask): Declare return type.  Declare argument (to match the
	way it is called).  Explicitly return 0.

Wed Jan 12 01:44:25 1994  John Gilmore  (gnu@cygnus.com)

	* symtab.h (struct symbol, general_symbol_info, minimal_symbol,
	partial_symbol):  Shrink the storage sizes of symbols, by making
	enums into 1-byte bitfields when compiled __GNUC__, moving all the
	enums and small ints to the end of each struct to improve
	alignment, and switching the section number from int to unsigned
	short.

Wed Jan 12 00:16:26 1994  John Gilmore  (gnu@cygnus.com)

	* symtab.c (find_addr_symbol):  New routine that will find the nearest
	symbol associated with an address.  It does so by exhaustive
	search of the symtabs, so it's slow but complete.

Tue Jan 11 23:57:30 1994  John Gilmore  (gnu@cygnus.com)

	* coffread.c (read_coff_symtab):  Set PC bounds of _globals_ symtab
	to [0,0] rather than [0, end of first source file].  This avoids
	problems with other parts of GDB looking for linetables in the
	_globals_ symtab.  Eliminate variables num_object_files and
	first_object_file_end.

Tue Jan 11 00:53:46 1994  John Gilmore  (gnu@cygnus.com)

	* a29k-tdep.c (init_frame_info):  Cast null arg to examine_tag.
	(pop_frame):  Restore PC2 and LR0 from dummy frames.
	(push_dummy_frame):  Save PC2 and LR0 into dummy frames.
	(setup_arbitrary_frame):  Handle 3 args and set up real frames.
	* config/a29k/tm-a29k.h (FRAME_NUM_ARGS):  Update comments.
	(DUMMY_FRAME_RSIZE):  Add 2 longwords for PC2 and LR0.
	(SETUP_ARBITRARY_FRAME):  Define.

Tue Jan 11 06:59:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* infrun.c, config/mips/tm-irix5.h: Remove #if 0'd AT_FUNCTION_START.

Tue Jan 11 14:27:03 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* remote-udi.c (udi_resume): Correct prototype.

Tue Jan 11 11:10:30 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

        * config/pa/tm-hppa.h (FRAME_FIND_SAVED_REGS): Call
	hppa_frame_find_saved_regs.
	* hppa-tdep.c (dig_fp_from_stack): Delete function.
	(prologue_inst_adjust_sp): New function.
	(is_branch, inst_saves_gr, inst_saves_fr): New functions.
	(skip_prologue): Completely rewrite to use unwind information.
	(hppa_frame_find_saved_regs): Likewise.

Tue Jan 11 06:59:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote-mips.c (mips_wait): Use new function mips_signal_from_protocol
	to convert a signal number with appropriate bounds checking.

	* remote-mips.c (mips_wait): Fix typos (0x177 -> 0177, 0x377 -> 0377).

Tue Jan 11 00:53:46 1994  John Gilmore  (gnu@cygnus.com)

	* stack.c (frame_info):  If FRAME_FIND_SAVED_REGS isn't defined,
	print a newline to end the display anyway.

	* sparc-tdep.c (sparc_pop_frame):  Pop the fsr and csr (float and
	coprocessor status regs) when popping a frame.  This fixes 
	float exceptions that occur after calling inferior functions.

	* sparc-nat.c (fetch_inferior_registers, store_inferior_registers):
	Read and write the fsr (float status register) to/from the child
	process along with the float regs.  Remove Peter Schauer's change
	of May 24 '93, which has higher overhead and doesn't solve the
	real problem (which was that FSR wasn't being set).

Mon Jan 10 23:16:42 1994  John Gilmore  (gnu@cygnus.com)

	* a29k-tdep.c (examine_prologue):  Don't worry if the ASGEQ
	stack overflow check isn't right after the register stack
	adjustment instruction.  Metaware R2.3u compiler moves other
	things in front of it.  This fix isn't perfect but is what's
	running.

Mon Jan 10 20:08:23 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* c-valprint.c (c_val_print): Treat TYPE_CODE_RANGE like TYPE_CODE_INT.

	* config/alpha/alpha-netware.mt: Rename to alpha-nw.mt for 14
	character filenames.
	* configure.in: Change accordingly.

Mon Jan 10 15:48:36 1994  Tom Lord  (lord@rtl.cygnus.com)

	* m68k-stub.c, sparc-stub.c: removed spurious introduction of 
	_filtered io routines from these two files.

Fri Jan  7 12:42:45 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/i386/tm-i386v.h, config/m68k/tm-m68k.h, config/mips/tm-mips.h,
	config/vax/tm-vax.h (CALL_DUMMY_BREAKPOINT_OFFSET):  Define.
	* mdebugread.c (parse_symbol):  Handle enum sh.type produced by
	DEC c89. 
	* mdebugread.c (add_line):  Handle zero linenos produced by DEC c89.

Fri Jan  7 12:55:25 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (print_sys_errmsg): Call gdb_flush (gdb_stdout) before
	printing to gdb_stderr.

	* remote-udi.c (udi_kill): Don't close the connection, just set
	inferior_pid to zero.
	(udi_mourn): Call remove_breakpoints.

	* remote-udi.c: Remove obsolete need_artificial_traps comment.

	* i386b-nat.c (sregmap): If sEAX, etc., not defined, use tEAX, etc.

Thu Jan  6 07:17:53 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* symtab.c (lookup_symbol): Don't try adding .c to the name.

	* remote-bug.c: At the start of each section, reset srec_frame
	back to 160.

	* target.h: Add TARGET_WAITKIND_LOADED and TARGET_WAITKIND_SPURIOUS.
	* target.c (store_waitstatus): Add CHILD_SPECIAL_WAITSTATUS hook.
	* infrun.c (wait_for_inferior): Replace SIGTRAP_STOP_AFTER_LOAD with
	code which looks for those two waitkinds.  Use switch statement.
	* config/rs6000/tm-rs6000.h: Replace SIGTRAP_STOP_AFTER_LOAD with
	CHILD_SPECIAL_WAITSTATUS.

	* procfs.c (procfs_wait): Fix argument name to match 4 Jan changes.
	* Move target_signal_from_host, target_signal_to_host, and
	store_waitstatus from inftarg.c to target.c.  procfs needs them.
	* target.c: Include "wait.h" and <signal.h>.
	* target.h, infrun.c (proceed), proceed callers: Pass new code
	TARGET_SIGNAL_DEFAULT instead of -1.  This avoids problems with
	enums being treated as unsigned and is cleaner.
	* infrun.c (signals_info): Don't print TARGET_SIGNAL_DEFAULT or
	TARGET_SIGNAL_0.
	* infcmd.c (signal_command), infrun.c (signals_info):
	Don't allow user to specify numeric equivalent of
	TARGET_SIGNAL_DEFAULT.

Tue Jan  4 15:34:36 1994  Stu Grossman  (grossman@cygnus.com)

	* config/alpha/alpha-netware.mt:  New target support for Alpha
	running Netware.
	* configure.in:  Add alpha-*-netware* target.

Tue Jan  4 14:51:35 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* remote-mips.c (mips_wait): Fix ref to TARGET_WAITKIND_STOPPED.

Tue Jan  4 09:47:14 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* target.h: Add enum target_waitkind, enum target_signal, and
	struct target_waitstatus.  Change status argument to target_wait to
	be struct target_waitstatus * instead of int *.
	* target.h, infrun.c, all targets: Change type of signal arguments
	to resume(), proceed(), and target_resume() from int to enum
	target_signal.
	* All targets (*_wait, *_resume): Change accordingly.
	* infcmd.c (program_info, signal_command), throughout infrun.c, 
	* fork-child.c, solib.c, hppa-tdep.c, osfsolib.c: Use this stuff.
	* convex-xdep.c, convex-tdep.c: Add FIXME's (getting the Convex
	signal code stuff right with the new signals would be non-trivial).
	* inferior.h (stop_signal): Make it enum target_signal not int.
	* target.c, target.h (target_signal_to_string, target_signal_to_name,
	target_signal_from_name): New functions.
	* inftarg.c, target.h (target_signal_to_host, target_signal_from_host,
	store_waitstatus): New functions.
	* procfs.c (procfs_notice_signals): Use them.
	* i960-tdep.c (i960_fault_to_signal): New function, to replace
	print_fault.
	* config/i960/tm-i960.h: Don't define PRINT_RANDOM_SIGNAL.

	* objfiles.c (build_objfile_section_table): Don't abort() if
	objfile->sections is already set.

	* objfiles.c (add_to_objfile_sections): Check SEC_ALLOC not SEC_LOAD
	to match recent change to exec.c.

	* Version 4.11.3.

	* main.c (print_gdb_version): Change year to 1994.

	* ChangeLog, ChangeLog-93: Split ChangeLog at 1994.
	* Makefile.in (NONSRC): Add ChangeLog-93.

Mon Jan  3 11:57:29 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (read_type): Allow defining several type numbers
	at once (e.g. "(1,2)=(3,4)="...).

	* stabsread.c (read_enum_type): Use TARGET_INT_BIT not sizeof (int).

	* breakpoint.c (frame_in_dummy): Check PC as well as frame.

Mon Jan  3 02:47:03 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (psymtab_to_symtab_1):  Only pass N_STAB symbols
	to process_one_symbol.
	* symtab.c (find_pc_psymbol):  Search global_psymbols as well to
	avoid caching a bad endaddr in find_pc_partial_function.

Sun Jan  2 21:41:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/tm-sun3.h: Don't define BELIEVE_PCC_PROMOTION.

Sat Jan  1 04:35:23 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (wait_for_inferior):  Do not step or step resume past
	the end of a one-line function we just stepped into.

For older changes see ChangeLog-93

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
