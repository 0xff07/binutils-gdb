Thu Jul 17 11:38:46 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* partial-stab.h (case N_BINCL): detect missing partial symtab.
	* dbxread.c: Add a complaint for N_BINCL without a corresponding
	partial symtab.  Remove earlier change of 5/27/97.

Wed Jul 16 10:38:03 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* sol-thread.c (sol_thread_[store, fetch]_registers): if 
	inferior_pid is an LWP rather than a Solaris thread, let
	procfs handle the request.
	(rw_common, sol_thread_xfer_memory): procfs_xfer_memory will
	only work if inferior_pid points to an LWP (rather than a 
	Solaris thread).  Use procfs_first_available to find a good LWP.
	(info_solthreads): added a maintenance command to list all 
	known Solaris threads and their attributes.
	* mips-tdep.c (mips_do_registers_info): Completely changed the
	output format to be neat and columnar.  Added the helper funcs
	do_fp_register_row and do_gp_register_row.  Also small mods to
	mips_print_register, which is still used to print a single reg.

Mon Jul 14 18:02:53 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* procfs.c (wait_fd): Handle an fd that has "hung up" or 
	otherwise terminated (Solaris threads).

start-sanitize-gdbtk
Thu Jul 10 00:02:41 1997  Martin M. Hunt  <hunt@cygnus.com>

	* Makefile.in, configure.in, aclocal.m4: Add Itcl, Tix, and 
	IDE configuration information.

	* gdbtk.c (breakpoint_notify): Send address, linenumber and 
	filename when a breakpoint is set.  Avoids call to bp_info.
 	(gdbtk_init): Call Tcl_FindExecutable(). Add code to handle 
	Itcl, Tix and IDE initialization.

	* defs.h (init_ui_hook): Change prototype to accept one arg.

	* main.c (gdb_init): Change prototype to accept one arg.

	* top.c (gdb_init): Accepts one argument which it uses to
	call (*init_ui_hook), which will be gdbtk_init(). This is
 	used for calling Tcl_FindExecutable().
	
	* gdbtcl/breakpoint.tcl (gdbtk_tcl_breakpoint): Change to
	accept variable number of args for compatibility with
	cchanges in gdbtk.c.
	
	* configure: Regenerated.

	* gdbtcl/tclIndex: Regenerated.
	
end-sanitize-gdbtk
	
Fri Jul  4 14:49:33 1997  Ian Lance Taylor  <ian@cygnus.com>

	* source.c (OPEN_MODE, FDOPEN_MODE): Define; value depends upon
	whether CRLF_SOURCE_FILES is defined.
	(open_source_file): Use OPEN_MODE with open and openp.
	(print_source_lines): Use FDOPEN_MODE with fdopen.  If
	CRLF_SOURCE_FILES is defined, ignore \r characters.
	(forward_search_command): Use FDOPEN_MODE with fdopen.
	(reverse_search_command): Likewise.
	* config/i386/xm-cygwin32.h (CRLF_SOURCE_FILES): Define.
	(LSEEK_NOT_LINEAR): Don't define.

Thu Jul  3 17:41:46 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* mips-tdep.c (mips_extract_return_value): align 4-byte float
	return values within the 8-byte FP register.

Thu Jul  3 13:48:11 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* mips-tdep.c (mips_push_arguments): don't left-adjust 32-bit
	integers in 64-bit register parameters before function calls.

Mon Jun 30 17:54:51 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* mips-tdep.c (mips_push_arguments): special-case handling for
	odd-sized struct parameters passed in registers / on stack.

Mon Jun 30 15:30:38 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* mips-tdep.c (mips_push_arguments): tweak alignment of small
	structs passed in registers for little-endian non-EABI mode.

Mon Jun 30 13:05:39 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* breakpoint.c (frame_in_dummy): use generic dummy if available.
	  (check_duplicates, clear_command): compare sections only if
	  doing overlay debugging.

Fri Jun 27 23:03:53 1997  Fred Fish  <fnf@ninemoons.com>

	* buildsym.h (struct subfile): Add debugformat member.
	(record_debugformat): Declare global function.
	* buildsym.c (start_subfile): Initialize debugformat member
	to NULL.
	(record_debugformat): New function to record the format.
	(end_symtab): Copy format into symtab debugformat member.
	(end_symtab): Free subfile debugformat member.
	* symmisc.c (free_symtab): Free debugformat when freeing
	symtab.
	* symfile.c (allocate_symtab): Initialize the new debugformat
	member for new symtabs.
	* symtab.h (struct symtab): Add debugformat member.
	* source.c (source_info): Print the debug format.

	* os9kread.c (os9k_process_one_symbol): Call record_debugformat
	with "OS9".
	* hpread.c (hpread_expand_symtab): Call record_debugformat
	with "HP".
	(hpread_process_one_debug_symbol): Ditto.
	* dbxread.c (process_one_symbol): Call record_debugformat
	with "stabs".
	* coffread.c (coff_start_symtab): Call record_debugformat
	with "COFF".
	* xcoffread.c (read_xcoff_symtab): Call record_debugformat
	with "XCOFF".
	* dwarfread.c (read_file_scope): Call record_debugformat
	with "DWARF 1".
	* dwarf2read.c (read_file_scope): Call record_debugformat
	with "DWARF 2".
	* dstread.c (dst_end_symtab): Set debugformat to be
	"Apollo DST".
	* mdebugread.c (new_symtab): Set debugformat to be "ECOFF".

Fri Jun 27 21:05:45 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* mips-tdep.c (mips_push_arguments): handle alignment of
	integer and struct args on stack for mips64 big-endian.

Fri Jun 27 19:19:12 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* config/mips/tm-mips.h (USE_STRUCT_CONVENTION): MIPS_EABI returns
	structs in a register wherever possible.
	* mips-tdep.c (mips_extract_return_value): handle structs.
	(mips_store_return_value): handle values smaller than MIPS_REGSIZE
	(including structs, if gdb ever allows it).

start-sanitize-sh4
Fri Jun 20 17:58:34 1997  Fred Fish  <fnf@cygnus.com>

	* sh-tdep.c (sh_skip_prologue): Also recognize fmov insns.
	(sh_frame_find_saved_regs): Recognize fmov insns and adjust
	stack push count accordingly.
	* sh-tdep.c (IS_FMOV, FPSCR_SZ): New defines

end-sanitize-sh4
Thu Jun 19 08:18:48 1997  Mark Alexander  <marka@cygnus.com>

	* utils.c (floatformat_from_doublest): Improve test for infinity.

Wed Jun 18 13:47:52 1997  Fred Fish  <fnf@cygnus.com>

	* dwarfread.c (isreg, optimized_out, offreg, basereg): Move
	global variables into the struct dieinfo structure.
	(locval): Pass pointer to a dieinfo struct rather than a
	pointer to the raw location information.  Change prototype.
	Set isreg, optimized_out, offreg and basereg as appropriate.
	(struct_type): Call locval with dieinfo struct pointer.
	(new_symbol): Ditto.
	(new_symbol): Call locval and save location before testing
	the values of the new dieinfo struct flags, set by locval.

Tue Jun 17 13:30:12 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* procfs.c (proc_set_exec_trap, procfs_init_inferior, procfs_wait,
	unconditionally_kill_inferior):  Undo Oct 26 1996 and Apr 26 1997
	changes to trace PRFS_STOPTERM and handle PR_DEAD.
	These changes tried to work around a problem with an early DU 4.0
	release, but they trigger subtle timing dependent kernel bugs
	in older OSF/1 releases.

Tue Jun 17 06:52:47 1997  Fred Fish  <fnf@cygnus.com>

	* dwarfread.c (new_symbol): Use SYMBOL_VALUE_ADDRESS, instead of
	SYMBOL_VALUE, to set the value of LOC_STATIC symbols.

Mon Jun 16 18:38:28 1997  Mark Alexander  <marka@cygnus.com>

	* infrun.c (wait_for_inferior): Mark registers as invalid when
	stepping over an instruction that triggered a watchpoint.
	* remote-mips.c: Numerous changes to support hardware breakpoints
	and watchpoints on LSI MiniRISC and TinyRISC boards.
	* mips-tdep.c: Move MIPS16-related macros to config/mips/tm-mips.h.
	(mips_breakpoint_from_pc): Account for different breakpoint
	instructions used by PMON and IDT monitor.
	* config/mips/tm-embed.h: Enable hardware breakpoints on embedded
	MIPS targets.
	* config/mips/tm-mips.h: Define breakpoint instructions for
	PMON and IDT monitor.  Move MIPS16-related macros here from
	mips-tdep.c.
	
Fri Jun 13 13:44:47 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* config/mips/tm-tx39[l].h, tx39[l].mt: change r3900 target to tx39.

Fri Jun 13 14:14:10 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10300-tdep.c (mn10300_analyze_prologue): Fix some comments.
	Add missing return statements after finding an "add imm{16,32},sp"
	instruction.
	(mn10300_frame_chain): Add in size of our register save area to find
	our caller's frame if our caller does not have a frame pointer.

Fri Jun 13 12:55:49 1997  Doug Evans  <dje@canuck.cygnus.com>

	* symfile.c (generic_load): Check return code of target_write_memory.

Fri Jun 13 10:28:09 1997  Fred Fish  <fnf@cygnus.com>

	* config/i386/nm-linux.h: Enable prototypes that were #ifdef out.
	* config/tm-sysv4.h (in_plt_section): Add prototype.

	* maint.c (maintenance_translate_address): Avoid assignment
	inside if, per GNU coding standards.
	* symfile.c (simple_read_overlay_table): Avoid assignments inside if, 
	per GNU coding standards.

	* monitor.c (parse_register_dump): Is really a void function.
	Add prototype.
	(monitor_read_memory): Remove unused variable "name".
	(monitor_read_memory): Remove unused variable "regbuf".
	(monitor_open): Remove unused variable "i".
	(get_hex_word): Apparently unused, #if away for now.
	(from_hex): Ditto.

	* i386v4-nat.c (supply_fpregset): Remove unused variable "regi".
	(fill_fpregset): Remove unused variables "regi", "to", "from" and
	"registers".

	* remote-e7000.c (ctype.h): Include.
	(e7000_insert_breakpoint): #if away unused arg used by unused expr.
	* frame.h (generic_get_saved_register): Add prototype.
	(enum lval_type): Add partial forward decl.
	* dsrec.c (make_srec): Remove unused variable "type_code".
	* remote-sim.c (gdbsim_wait): Handle sim_running and sim_polling
	cases by just ignoring them.
	(command.h): Include.

	* java-exp.y (parse_number): Remove unused variable "unsigned_p".
	* java-lang.c (gdbcore.h): Include for prototypes.
	(type_from_class): Remove unused variable "ftype".
	(type_from_class): Remove unused variable "name_length".
	(evaluate_subexp_java): Add default case to handle remaining
	enumerations.
	* java-valprint.c (c-lang.h): Include for prototypes.

	* symfile.c (simple_read_overlay_region_table): #if away
	unused function.
	(simple_free_overlay_region_table): Ditto.
	(overlay_is_mapped): Add default case to switch.
	(simple_read_overlay_region_table): Ditto.
	(simple_read_overlay_region_table): Add prototype.

	* symtab.c (fixup_symbol_section): Remove unused msym variable.
	(fixup_psymbol_section): Ditto.
	(find_pc_sect_symtab): Make distance a CORE_ADDR.

	* utils.c: Add comment about t_addr being either unsigned long or
	unsigned long long.
	(paddr): Change formats to match actual types args are cast to.
	(preg): Ditto.
	(paddr_nz): Ditto.
	(preg_nz): Ditto.

	* defs.h (perror_with_name): Is a NORETURN function.
	* utils.c (perror_with_name): Is a NORETURN function.
	(error): Is NORETURN independently of ANSI_PROTOTYPES.

	* symtab.c (fixup_symbol_section): Remove prototype.
	* symtab.h: (fixup_symbol_section): Add prototype.
	* m32r-rom.c (report_transfer_performance): Add prototype.
	* sparclet-rom.c: Ditto.
	* dsrec.c: Ditto.

	* c-exp.y (parse_number): Cast args to float* or double* as
	appropriate for conversion format.
	* java-exp.y (parse_number): Ditto.

	* Makefile.in (c-exp.tab.c): Remove #line lines that refer
	to nonexistant y.tab.c file.
	(java-exp.tab.c): Ditto.
	(f-exp.tab.c): Ditto.
	(m2-exp.tab.c): Ditto.
start-sanitize-gdbtk

	* gdbtk.c (gdbtk_init): Make truth value test explicit.
	Remove unused static variable "Gdbtk_Library".
end-sanitize-gdbtk

	* sh-tdep.c (symfile.h): Include.
	(gdb_string.h): Include.
	(sh_fix_call_dummy): Ifdef away, currently unused.
	* config/sh/tm-sh.h (pop_frame): Add prototype.
	* config/sh/tm-sh.h (sh_set_processor_type): Add prototype.

Sat Jun  7 02:34:19 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

start-sanitize-gdbtk
	* gdbtk.c (gdb_get_breakpoint_info):  Add string for new
	enumeration del_at_next_stop to bpdisp array.

end-sanitize-gdbtk
	* eval.c (evaluate_subexp_for_sizeof):  Handle dereferencing
	of non-pointer values.

	* symtab.c (gdb_mangle_name):  Improve mangling of nested types,
	their physical names already include the class name.

	* valops.c (value_cast):  Handle upcast of a class pointer.

	From Andreas Schwab (schwab@issan.informatik.uni-dortmund.de):
	* corelow.c (get_core_registers):  Make secname big enough.

Fri Jun  6 14:43:23 1997  Keith Seitz  <keiths@pizza.cygnus.com>

	* config/sh/tm-sh.h: add define for FPSCR_REGNUM
	* sh-tdep.c (sh_show_regs): print out all registers for
	the current processor
	
Fri Jun  6 13:01:55 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (gdbsim_kill): Remove call to depreciated function
 	sim_kill.

Thu Jun  5 11:39:03 1997  Ian Lance Taylor  <ian@cygnus.com>

	Fixes for recent correction to PE format:
	* coffread.c (pe_file): New static variable.
	(struct find_targ_sec_arg): Change resultp from pointer to int to
	pointer to pointer to asection.
	(find_targ_sec): Just store the section in args->resultp, not the
	section offset value.
	(cs_to_section): Compute the section offset value from the
	section.
	(cs_section_address): New static function.
	(coff_symfile_read): Set pe_file.
	(read_one_sym): When reading a PE file, adjust the symbol value to
	include the section address if the symbol has an appropriate
	storage class.

Tue Jun  3 16:24:46 1997  Michael Snyder  (msnyder@cleaver.cygnus.com)

	* configure.tgt: add mipsr3900-elf target
	* config/mips/r3900.mt r3900l.mt tm-r3900.h tm-r3900l.h: ditto

start-sanitize-gdbtk
Tue Jun  3 15:46:51 1997  Tom Tromey  <tromey@cygnus.com>

	* Makefile.in (LIB_RUNTIME_DIR): New variable.

end-sanitize-gdbtk
Tue May 27 10:34:11 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* dbxread.c: Check malloc's return for null, prevent segv.

Fri May 23 14:45:02 1997  Bob Manson  <manson@charmed.cygnus.com>

	* infcmd.c (jump_command): Don't try to dereference sfn if it's
 	NULL.

Fri May 23 13:51:57 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* top.c (init_cmd_lists): Always initialize endianlist.
	(init_main): Always define endian commands.
	(set_endian_big): Issue warning if endian not selectable.
	(set_endian_little): Ditto.
	(set_endian_auto): Ditto.

Thu May 22 11:53:21 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (simulator_command): Restrict access to the
 	simulator to periods when the simulator is open.

Wed May 21 16:03:25 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* procfs.c (init_procinfo): new function, abstracts some code
	shared by create_procinfo and do_attach; 
	(procfs_set_inferior_syscall_traps): new function, abstracts
	some code needed by procfs_init_inferior, do_attach, and 
	procfs_lwp_creation_handler; (procfs_first_available): new
	function, find any LWP that's runnable; (procfs_thread_alive):
	replace stub function with real implementation; 
	(procfs_lwp_creation_handler): fix bug starting new child 
	threads; (info_proc): bug fixes and enhancements for the 
	"INFO PROCESSES" command; (close_procinfo_file): call new
	function "delete_thread" to cleanup GDB's thread database;
	(proc_init_failed): add new argument "kill", to control whether
	process is killed (so this function can be shared by 
	create_procinfo and do_attach); (procfs_exit_handler): handle
	exit from an attached process, and cleanup procinfo handles
	when the process exits; (procfs_resume, procfs_wait): cleanup
	after a thread when it exits; (do_attach, do_detach): handle
	attached processes with multiple threads; plus some general 
	improvements in the diagnostic output.
	* sol-thread.c (sol_thread_alive): replace stub with real
	implementation; (thread_to_lwp, lwp_to_thread): enhance to 
	handle threads that may have exited; (sol_thread_attach): add
	startup setup stuff; (sol_thread_detach): add unpush_target
	call; (sol_thread_mourn_inferior): add unpush_target call;
	(sol_thread_wait, sol_thread_resume): enhance to deal with
	thread exit cleanly; (sol_thread_new_objfile, 
	sol_thread_pid_to_str): detect unsuccessful startup and 
	don't crash; plus some general cleanup.
	* thread.c (delete_thread): new function, allows targets to 
	notify gdb when a thread is no longer valid.
	* infrun.c (wait_for_inferior): don't try to detect a new
	thread on receiving a TARGET_EXITED event.
	
Tue May 20 09:32:02 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (gdbsim_open): Pass callback struct.
	(init_callbacks): Remove call to sim_set_callbacks.

Thu May 15 07:56:50 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/rs6000/tm-rs6000.h (SIG_FRAME_LR_OFFSET):  Define.
	* rs6000-tdep.c (frameless_function_invocation):  Mark frames
	with a zero PC as frameless to improve backtraces from core dumps
	caused by dereferencing a NULL function pointer.
	(frameless_function_invocation, frame_saved_pc, rs6000_frame_chain):
	Handle frameless functions interrupted by a signal.

	* sparc-tdep.c (sparc_init_extra_frame_info, sparc_frame_saved_pc):
	Handle frameless functions interrupted by a signal.

Wed May 14 08:58:55 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10200-tdep.c (mn10200_analyze_prologue): Update prologue comments
	to reflect current reality.  Gross attempt at handling out of
	line prologues.

	* mn10200-tdep.c (mn10200_skip_prologue): Don't look at the debug
	symbols to find the end of the prologue.
	* mn10300-tdep.c (mn10300_skip_prologue): Likewise.

start-sanitize-tic80
Wed May 14 12:04:49 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/tic80/tm-tic80.h (NUM_REGS): 38 not 37.

end-sanitize-tic80
start-sanitize-tic80
Mon May 12 11:35:04 1997  Mark Alexander  <marka@cygnus.com>

	* tic80-tdep.c, config/tic80/tm-tic80.h: First cut at getting
	basic C80 features working.

end-sanitize-tic80
Thu May  8 08:42:47 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* configure.in (AC_TYPE_SIGNAL): Add
	* configure: Re-generate.
	* remote-sim.c: Signal returns RETSIGTYPE.
	
start-sanitize-gdbtk
Wed May  7 19:10:19 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* gdbtk.c (wrapped_call): New function - make actual call to tk
 	worker function.
	(call_wrapper): Rewrite to use top.c:catch_errors.

	* gdbtk.c (gdb_stop): If No target_stop set quit flag and hope for
 	best.

end-sanitize-gdbtk
Wed May  7 20:05:07 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* target.h (target_stop): Drop argument so it can be tested for
 	NULL.

Sat May  3 20:51:48 1997  Mark Alexander  <marka@cygnus.com>

	* utils.c (floatformat_from_doublest): Handle infinity properly.

Thu May  1 11:44:46 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* Finalize merge from Hurd folk.  
	    Mon Oct 30 16:41:04 1995  Miles Bader  <miles@gnu.ai.mit.edu>
	    * thread.c (thread_apply_command, thread_apply_all_command,
	    thread_command): Make sure TP is alive.
	    (thread_alive): New function.
	    Tue Nov 14 14:31:03 1995  Miles Bader  <miles@gnu.ai.mit.edu>
	    * infrun.c (sig_print_info): Deal better with long signal names.
	    Wed Nov 22 15:23:35 1995  Miles Bader  <miles@gnu.ai.mit.edu>
	    * thread.c (thread_id_to_pid): New function.
	    Fri Dec  1 13:25:25 1995  Miles Bader  <miles@gnu.ai.mit.edu>
	    * gnu-nat.c: (set_thread_cmd_list, show_thread_cmd_list,
	    set_thread_default_cmd_list, show_thread_default_cmd_list): 
	    New variables.  (set_thread_cmd, show_thread_cmd, 
	    set_thread_default_cmd, show_thread_default_cmd): New functions.
	    Fri Apr 18 15:20:16 1997  Miles Bader  <miles@gnu.ai.mit.edu>
	    * gnu-nat.c (inf_startup): remove TASK parameter. 
	    (inf_set_task): replace with new function (inf_set_pid).  
	  * gdbthread.h: Add extern decl for thread_cmd_list.
	
Thu May  1 02:28:21 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* printcmd.c (disassemble_command):  Adjust low function bound
	by FUNCTION_START_OFFSET.

start-sanitize-tic80
Wed Apr 30 15:23:02 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/tic80/tm-tic80.h (BREAKPOINT): Set it to trap 73.

end-sanitize-tic80
Mon Apr 28 21:25:32 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* Makefile.in: Add rule for gnu-nat.o and i386gnu-nat.o (Gnu Hurd)
	* config/i386/i386gnu.mh: remove rules for [i386]gnu-nat.o, now 
	in Makefile.in (as for other targets); add NATDEPFILE corelow.o to 
	satisfy symbol dependancy in solib.c (core_ops).
	* target.[ch] conditionalize Mach-specific signals so that they
	won't show up in non-Mach gdb's!
	* thread.c: change name of static function "thread_switch" to 
	"switch_to_thread", to avoid conflict with Mach global symbol; 
	move thread_cmd_list to global scope so targets can add their 
	own thread commands.
	* infrun.c: sig_print_info: allow for long signal names.
	* gnu-nat.[ch]: tidying up comments.
	* gnu-nat.c: remove calls to prune_threads and renumber_threads; 
	gnu_wait must not return -1 when inferior exits; 
	attach_to_child will modify inferior_pid in a way that allows
	fork_inferior to remain unchanged; remove extra arg from 
	startup_inferior; move Mach thread commands here from thread.c.

Mon Apr 28 18:21:20 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* symtab.c: decode_line_1, replace the assignment to 
	values.sals[0].pc which I accidentally left out on 4/3/97.

Mon Apr 28 17:27:40 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* c-exp.y, java-exp.y: make parse_number reject "123DEADBEEF".
	(fix by Bob Manson).
	* top.c: change "to enable to enable" to "to enable" in a couple
	of help strings.

Mon Apr 28 09:01:59 1997  Mark Alexander  <marka@cygnus.com>

	* breakpoint.c (remove_breakpoint): Pass correct type to
	target_remove_watchpoint.
	* target.h: Improve comment for target_{remove,insert}_breakpoint.

Sat Apr 26 03:38:02 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* alpha-tdep.c (heuristic_proc_desc):  Increase search limit
	for return address register, handle `ret' instruction.

	* corelow.c (get_core_registers):  Initialize cf.

	* procfs.c:  Minor changes to make pre-ANSI compilers happy.
	(procfs_notice_signals):  Copy traced signal set back to
	pi->prrun.pr_trace.
	(unconditionally_kill_inferior):  If PR_DEAD is defined,
	rerun inferior after killing it.

Fri Apr 25 00:10:18 1997  Jeffrey A Law  (law@cygnus.com)

	* config/mn10300/tm-mn10300.h (EXTRACT_STRUCT_VALUE_ADDRESS): The
	structure value address is found in $a0 now.
	* config/mn10200/tm-mn10200.h (EXTRACT_STRUCT_VALUE_ADDRESS): Likewise.

Thu Apr 24 13:31:10 1997  Jeffrey A Law  (law@cygnus.com)

	* config/mn10300/tm-mn10300.h (STORE_RETURN_VALUE): Pointers are
	returned in $a0.
	(EXTRACT_RETURN_VALUE): Likewise.

	* mn10300-tdep.c (mn10300_analyze_prologue): Check for a return
	insn at "pc", not "fi->pc".

start-sanitize-tic80
Thu Apr 24 16:11:47 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/tic80/tm-tic80.h (NUM_REGS): Four 64bit accumulators.
	(REGISTER_BYTE, REGISTER_RAW_SIZE, REGISTER_SIZE,
 	MAX_REGISTER_RAW_SIZE, REGISTER_VIRTUAL_TYPE): Adjust.
	(NPC_REGNUM): Tic80 has a delay slot.
	(R0_REGNUM, Rn_REGNUM, An_REGNUM): For sim, provide base/bound for
 	register blocks.

end-sanitize-tic80
Wed Apr 23 11:18:45 1997  Jeffrey A Law  (law@cygnus.com)

	* config/mn10200/tm-mn10200.h (STORE_RETURN_VALUE): Pointers are
	returned in $a0.
	(EXTRACT_RETURN_VALUE): Likewise.

Tue Apr 22 11:58:15 1997  Fred Fish  <fnf@cygnus.com>

	* config/arm/tm-arm.h (TARGET_DOUBLE_FORMAT): Define to use
	floatformat_ieee_double_littlebyte_bigword for little endian
	target byte order.
	* utils.c (floatformat_to_doublest): Create local preswapped
	copy of input for floatformat_littlebyte_bigword formats.
	(get_field, put_field): Treat floatformat_littlebyte_bigword
	the same as floatformat_little.
	(floatformat_from_doublest): Postswap output words for
	the floatformat_littlebyte_bigwords format.

start-sanitize-tic80
Mon Apr 21 22:44:47 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* config/tic80/tic80.mt (SIM): Link in simulator.

end-sanitize-tic80
Tue Apr 22 09:02:10 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* config/alpha/alpha-osf3.mh config/i386/{i386gnu linux}.mh
	config/mips/{embed embed64 embedl embedl64 vr4300 vr4300el vr5000
	vr5000el}.mt config/powerpc/{aix aix4}.mh config/rs6000/{aix
	aix4}.mh config/sh/sh.mt config/sparc/sp64sim.mt:
start-sanitize-v850
	config/v850/v850.mt:
end-sanitize-v850
	Remove -lm.  That's now handled by configure.

	* Makefile.in (maintainer-clean):  Add distclean to dependencies.
	Remove duplicate rm's of files.

start-sanitize-gdbtk
Mon Apr 21 14:00:08 1997  Doug Evans  <dje@canuck.cygnus.com>

	* gdbtk.c (gdb_disassemble): Store endian-ness in `di'.

end-sanitize-gdbtk
Mon Apr 21 09:49:25 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* remote-pa.c:  Remove.  It's broken and no longer necessary.

Sat Apr 19 11:56:10 1997  Per Bothner  <bothner@deneb.cygnus.com>

	* java-exp.y:  Combine TRUE and FALSE into BOOLEAN_LITERAL.
	(Avoids name clash with broken AIX header files.)

Sat Apr 19 01:49:37 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* serial.c (serial_log_command):  Fix fputs_unfiltered calls.

	* config/powerpc/tm-ppc-aix4.h, config/rs6000/tm-rs6000-aix4.h
	(DONT_RELOCATE_SYMFILE_OBJFILE):  Removed.
	* xcoffsolib.h (struct vmap):  Add new members tvma, toffs and dvma,
	remove tadj.
	* exec.c (bfdsec_to_vmap):  Initialize new vmap members, initialize
	tstart and dstart with section VMA.
	* rs6000-nat.c (vmap_symtab):  Relocate relative to the VMA in the
	object file.
	(vmap_ldinfo, xcoff_relocate_core):  Adjust tstart by section offset
	of the text section, remove DONT_RELOCATE_SYMFILE_OBJFILE hack.
	(vmap_exec):  Relocate relative to the VMA in the object file,
	relocate .bss section as well.
	(xcoff_relocate_core):  No longer adjust section addresses by VMA.
	* rs6000-tdep.c (find_toc_address):  Change type of tocbase
	to CORE_ADDR.
	* xcoffread.c (secnum_to_bfd_section):  New routine to get
	BFD section from CS section number.
	(scan_xcoff_symtab):  Make toc_offset section relative.

	* symtab.c (total_number_of_methods):  Avoid core dump if
	baseclass type is still undefined.

Fri Apr 18 17:25:10 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* Makefile.in (SUBDIRS):  Add mswin so that make cleanup cleans up
	that directory.
	* defs.h utils.c (error warning):  Make message be const.
	* main.c (fputs_unfiltered):  Only send gdb_stdout and gdb_stderr
	to hook.  Otherwise send it to fputs.
	* monitor.c monitor.h (monitor_get_dev_name):  New function.  Does
	the obvious.
	* remote-e7000.c:  Remove debugify stuff.  Change printf, fprintf
	to _filtered forms to make output appear in GUIs.  Replace all
	uses of SERIAL_READCHAR with readchar, which has better error
	checking.
	* (e7000_parse_device):  Add prototype.
	(readchar):  Improve doc.  Handle random serial errors.
	(expect):  Disable notice_quit code.  It's busted.  Remove
	serial error handling (it's now handled in readchar).  Remove
	remote_debug echoing.  That's handled in readchar as well.
	(e7000_parse_device):  Remove serial_flag arg.  It's not
	necessary.
	(e7000_open):  Split into two pieces.  Second part is
	e7000_start_remote, and is error protected.  Now, when we connect
	to the target, we setup the initial frame and registers so that
	the user gets an immediate indication of where the target is.
	(gch):  Remove debug output.  That's handled by readchar.
	(e7000_read_inferior_memory):  Handle errors better.
	(_initialize_remote_e7000):  Get rid of `<xxx>' things from
	command names.  They show up when doing completion and confuse
	things horribly.
	* ser-e7kpc.c: Get rid of the DLL's since we can access the device
 	directly from Win32s and Win95.  Get rid of debugify crud.
	* serial.c:  Remove debugify cruft.
	* (serial_logchar serial_log_command serial_write serial_readchar
	serial_send_break serial_close):  Merge common functionality into
	serial_logchar.  Clean up rest of routines.
	* sparclet-rom.c:  Disembowel.  Leave only download routine.
	Download routine now switches to remote target automatically.
	* top.c (disconnect):  Only define if SIGHUP is defined.  Cleans
	up MSVC/Win32 problem.
	* utils.c (gdb_flush):  Don't call hook unless it's for gdb_stdout
	or gdb_stderr.
	* config/sh/tm-sh.h:  Define TARGET_SH for WinGDB.
	* config/sparc/tm-sparclet.h:  Remove override for prompt.

Fri Apr 18 13:38:19 1997  Doug Evans  <dje@canuck.cygnus.com>

	* remote-sim.c (gdbsim_open): Only pass -E to sim_open if
	TARGET_BYTE ORDER_SELECTABLE.

Fri Apr 18 16:52:41 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* remote-sim.c (init_callbacks): Initialize poll_quit and magic
 	fields of gdb_callback.
	(gdbsim_stop): Add gdbsim_stop to list of supported client
 	operations.
	(gdbsim_wait, gdbsim_resume): Move call to sim_resume into
 	sim_wait where gdb is in a position to handle a long running
 	function.
	(gdbsim_cntrl_c): New function.  Wrap the sim_resume call in a
 	SIGINT handler.
	(gdb_os_poll_quit): New function. Check for a quit pending on the
 	console.

start-sanitize-gdbtk
Wed Apr 16 12:33:06 1997  Andrew Cagney  <cagney@b1.cygnus.com>

	* Makefile.in (install-only): Make list of gdbtcl files to install
 	explicit - was picking up files such as ChangeLog etc.
	(install-only): Don't blindly create the directory.

end-sanitize-gdbtk
Thu Apr 17 14:30:04 1997  Per Bothner  <bothner@deneb.cygnus.com>

	* defs.h (enum language):  Add language_java.
	* java-exp.y, java-lang.c, java-lang.h, java-valprint.c:  New files.
	* Makefile.in:  Update for new files.
	* objfiles.c (allocate_objfile):  Allow NULL bfd argument.
	* symfile.c (deduce_language_from_filename):  Recognize .java.

Thu Apr 17 02:20:23 1997  Doug Evans  <dje@canuck.cygnus.com>

	* m32r-stub.c (stash_registers): Rewrite.
	(restore_registers): Renamed to restore_and_return.
	(cleanup_stash): New function.
	(process_exception): New function.
	(_catchException*): Rewrite.

	* remote-sim.c (gdbsim_load): Update call to sim_load.
	(gdbsim_create_inferior): No longer pass start_address to
	sim_create_inferior.
	(gdbsim_open): Pass endian indicator as arg.

Tue Apr 15 15:31:09 1997  Stan Shebs  <shebs@andros.cygnus.com>

	* remote.c (get_offsets): Don't use scanf for interpreting
	response to qOffsets.

Tue Apr 15 14:51:04 1997  Ian Lance Taylor  <ian@cygnus.com>

	* gdbserver/Makefile.in (INSTALL_XFORM): Remove.
	(INSTALL_XFORM1): Remove.
	(install-only): Use $(program_transform_name) directly, rather
	than using $(INSTALL_XFORM) and $(INSTALL_XFORM1).
	(uninstall): Transform name.

Mon Apr 14 17:06:27 1997  Mark Alexander  <marka@cygnus.com>

	* remote-mips.c (mips_load): Ensure that PC gets updated
	after a load on LSI target.

Mon Apr 14 15:54:51 1997  Geoffrey Noer  <noer@pizza.cygnus.com>

	* procfs.c (notice_signals): fix typo

Mon Apr 14 16:25:10 1997  Ian Lance Taylor  <ian@cygnus.com>

	* gdbserver/Makefile.in (INSTALL): Change install.sh to
	install-sh.

Mon Apr 14 11:55:27 1997  Geoffrey Noer  <noer@pizza.cygnus.com>

	* config/i386/cygwin32.mh: remove -lkernel32 from XM_CLIBS
	since gcc automatically includes it

Thu Apr 10 13:20:53 1997  Geoffrey Noer  <noer@cygnus.com>

	* procfs.c: Substantial (but incomplete) changes to support
	sysv4.2mp procfs as implemented in UnixWare 2.1.  The procinfo
	struct now has substructs like struct flt_ctl instead of
	just a fltset_t and has a ctl_fd, status_fd, as_fd, and
	map_fd instead of a single fd.  Non-sysv4.2mp procfs models
	still have the structs and multiple fds, but don't use the
	entire struct and the four fds all point to the same thing.
	We use PROCFS_USE_READ_WRITE to decide whether to talk to
	procfs with reads/writes or use ioctl instead.  We use
	HAVE_MULTIPLE_PROC_FDS to determine whether procfs really has
	multiple fds or not.  PROC_NAME_FMT is split out into
	CTL_PROC_NAME_FMT, AS_PROC_NAME_FMT, MAP_PROC_NAME_FMT, 
	STATUS_PROC_NAME_FMT.
	
	(procfs_notice_signals): now a necessary wrapper around
	(notice_signals): which are the new guts for noticing signals
	(open_proc_file): gets a new flag arg used in sysv4.2mp to
	determine whether or not to attempt to open the ctl_fd.
	(procfs_read_status): new local function, reads procfs status
	(procfs_write_pcwstop): new local function, writes a PCWSTOP
	(procfs_write_pckill): new local function, writes a PCKILL
	(unconditionally_kill_inferior): remove signo since we now
	just call procfs_write_pckill().
	(procfs_xfer_memory): call lseek with SEEK_SET rather than 0	
	(proc_iterate_over_mappings): the whole function is ifdefed
	on UNIXWARE to keep things readable.
	
	Expanded the syscall_table to include new potential sysv4.2mp
	members.  Note that all ifdefs of UNIXWARE should be eliminated
	if possible or renamed to describe what's being selected for a
	bit better.  Sysv4.2mp and IRIX both have SYS_sproc so the
	IRIX specific code now also checks it's not UNIXWARE.

	* config/i386/tm-i386v42mp.h: also define HAVE_PSTATUS_T,
	HAVE_NO_PRRUN_T, PROCFS_USE_READ_WRITE, and UNIXWARE
	* config/mips/nm-irix4.h: set CTL_PROC_NAME_FMT et al to
	"/debug/%d" as PROC_NAME_FMT used to be

Wed Apr  9 11:36:14 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10300-tdep.c: Almost completely rewritten based on mn10200
	port.
	* config/mn10300/tm-mn10300.h: Likewise.

Tue Apr  8 10:45:24 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* config/pa/{hppabsd.mt hppahpux.mt hppaosf.mt}:  Remove
	remote-pa.o from TDEPFILES.  Nobody uses it, and besides, it's a
	lousy out-of-date clone of remote.c.

Fri Apr  4 08:21:21 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* remote.c:  Fix problems realized while showering.
	* (hexnumlen):  Add prototype.  Use max, not min.
	* (remote_write_bytes remote_read_bytes):  Fix max packet size
	calculations to properly account for packet overhead.  Also handle
	(probably rare) case where remote_register_buf_size isn't set.

	* remote.c:  Fix doc for `C' and `S' commands to indicate full
	address.
	* (remote_ops extended_remote_ops remote_desc remote_write_size):
	Make static.
	* (remote_fetch_registers remote_write_bytes remote_read_bytes):
	Record size of response to fetch registers command, use this to
	limit size of memory read and write commands.
	* (push_remote_target):  New function to make it possible to have
	another target switch to the remote target.
	* target.h:  Add prototype for push_remote_target.
	* sh-tdep.c (sh_frame_find_saved_regs):  Fix sign extension bugs
	for hosts which default to unsigned chars (such as SGI's).
	* (_initialize_sh_tdep):  Don't set remote_write_size.  It's now
	handled automatically in remote.c.

Thu Apr  3 15:10:30 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* blockframe.c: blockvector_for_pc_sect(), block_for_pc_sect(), 
	find_pc_sect_function(), find_pc_sect_partial_function(): new 
	functions for debugging overlays; pc without section is ambiguous.
	* breakpoint.[ch]: add section pointer to breakpoint struct;
	add section argument to check_duplicates(); check section as well
	as pc in [breakpoint_here_p(), breakpoint_inserted_here_p(),
	breakpoint_thread_match(), bpstat_stop_status()];  
	add section argument to describe_other_breakpoints(); 
	use INIT_SAL() macro to zero-out new sal structures; 
	make resolve_sal_pc() fix up the sal's section as well as its pc; 
	match on section + pc in clear_command() and delete_breakpoint(); 
	account for overlay sections in insert_breakpoints(), 
	remove_breakpoint() and breakpoint_re_set_one();
	all this to support overlays where a PC is not unique.
	* exec.c: change xfer_memory() to handle overlay sections.
	* findvar.c: change read_var_value() to handle overlay sections.
	* frame.h: declaration for block_for_pc_sect() [blockframe.c].
	* infcmd.c: jump_command() warns against jumping into an overlay
	that's not in memory.  Also use INIT_SAL() to initialize sals.
	* infrun.c: wait_for_inferior() sets a flag to invalidate cached
	overlay state information; Also use INIT_SAL() to init sals.
	* m32r-rom.c: modify load routines to use LMA instead of VMA.
	* m32r-stub.c: mask exit value down to 8 bits; screen out any
	memory read/writes in the range 600000 to a00000, and ff680000
	to ff800000 (hangs because nothing is mapped there); fix strcpy().
	* maint.c: maintenance command "translate-address" supports overlays.
	* minsyms.c: lookup_minimal_symbol_by_pc_sect() supports overlays.
	* objfiles.[ch]: add ovly_mapped field to the obj_section struct;
	this constitutes gdb's internal overlay mapping table.  Add macro
	ALL_OBJSECTIONS() to loop thru the obj_structs and look at overlays.
	Add function find_pc_sect_section().
	* printcmd.c: modify print_address_symbolic() with overlay smarts;
	modify address_info() with overlay smarts; add function sym_info() 
	to support the INFO SYMBOL command (translate address to symbol(s));
	modify disassemble_command() to work on unmapped overlays.
	* source.c: use INIT_SAL() to initialize sals.
	* symfile.[ch]: change generic_load() to use section's LMA address
	instead of VMA address, for overlay sections.
	Add numerous functions for finding a PC's section / overlay, 
	translating between VMA and LMA address ranges, determining if an
	overlay section is mapped, etc.  Add several user commands for
	overlay debugging.  Add support for a "generic" form of automatically
	reading overlay mapping info from the inferior (based on the default
	(simple) overlay manager which Cygnus provides as an example).
	* symtab.[ch]: add functions find_pc_sect_symtab(), 
	find_pc_sect_psymtab(), find_pc_sect_psymbol(), find_pc_sect_line()
	for lookup; modify lookup_symbol and decode_line_1() to use them;
	modify find_function_start_sal() to account for overlay sections;
	add macro INIT_SAL() for initializing struct symtab_and_line.
	* target.c: fix a comment in the declaration of target_ops.

Thu Apr  3 10:31:12 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (mips_in_call_stub, mips_in_return_stub,
	mips_skip_stub, mips_ignore_helper): New functions for dealing
	with MIPS16 call/return thunks.
	(mips_init_frame_pc_first): New function to implement
	INIT_FRAME_PC_FIRST macro; includes code from old macro plus
	new code to skip over MIPS16 thunks.
	(mips_frame_chain): Skip over MIPS16 thunks.
	* config/mips/tm-mips.h (mips_in_call_stub, mips_in_return_stub,
	mips_skip_stub, mips_ignore_helper): Declare.
	(IN_SOLIB_CALL_TRAMPOLINE, IN_SOLIB_RETURN_TRAMPOLINE,
	SKIP_TRAMPOLINE_CODE, IGNORE_HELPER_CALL): New macros that invoke
	the above functions.
	(INIT_FRAME_PC_FIRST): Change to invoke mips_init_frame_pc.
	(mips_init_frame_pc): Declare.
	* infrun.c (wait_for_inferior): Use new IGNORE_HELPER_CALL macro
	to decide if certain library function calls should be ignored.

Wed Apr  2 14:16:51 1997  Doug Evans  <dje@canuck.cygnus.com>

	* remote-sim.c (gdbsim_open): Check return code from sim_open.
	Update call to sim_open (new arg SIM_OPEN_DEBUG).

start-sanitize-gdbtk
Tue Apr  1 15:04:21 1997  Jason Molenda  (crash@godzilla.cygnus.co.jp)

	* configure.in (gdbtcl): Create soft-link for gdbtcl/ directory instead
	of gdbtk.tcl.

end-sanitize-gdbtk	
Mon Mar 31 14:55:53 1997  Ian Lance Taylor  <ian@cygnus.com>

	* gdbinit.in: New file.
	* .gdbinit: Remove.
	* configure.in: Generate .gdbinit from gdbinit.in.
	* configure: Rebuild.

start-sanitize-tic80
Sun Mar 30 12:28:24 1997  Fred Fish  <fnf@cygnus.com>

	* config/tic80/tic80.mt: Disable using the simulator
	until it is ready.

end-sanitize-tic80
Sat Mar 29 13:57:20 1997  Fred Fish  <fnf@cygnus.com>

	* COPYING: Install new version of file from FSF.
	* copying.c (show_copying_command): Update FSF address.

Fri Mar 28 18:33:41 1997  Ian Lance Taylor  <ian@cygnus.com>

	* Makefile.in (distclean): Remove .gdbinit.

start-sanitize-tic80
Fri Mar 28 15:37:30 1997  Fred Fish  <fnf@cygnus.com>

	* config/tic80/tm-tic80.h (NAMES_HAVE_UNDERSCORE): Define.

end-sanitize-tic80
Fri Mar 28 15:38:04 1997  Mike Meissner  <meissner@cygnus.com>

	* remote-sim.c (gdb_os_{,e}vprintf_filtered): Change stdarg type
	to va_list from void *, since va_list might not be a pointer
	type.

start-sanitize-gdbtk
Fri Mar 28 17:04:02 1997  Jason Molenda  (crash@godzilla.cygnus.co.jp)

	* Makefile.in (gdbtk.o): look for GDBTK_LIBRARY in $(datadir) by
	default, not $(srcdir).

end-sanitize-gdbtk	
Thu Mar 27 14:21:46 1997  Mark Alexander  <marka@cygnus.com>

	* remote-mips.c: Clean up comment and extraneous semicolon
	for mips_monitor_prompt variable.

Thu Mar 27 12:46:58 1997  Mark Alexander  <marka@cygnus.com>

	* remote-mips.c: Add `set monitor-prompt' command.

Wed Mar 26 06:47:44 1997  Mark Alexander  <marka@cygnus.com>

	Fix from Peter Schauer:
	* mdebugread.c (parse_procedure): Set address of procedure to
	block start; this fixes problems with shared libraries introduced
	by change of Mar 21.

Mon Mar 24 19:43:16 1997  Geoffrey Noer  <noer@cygnus.com>

	* symtab.c (find_pc_symtab): change to support the case
	where the objfile is reordered and contains both coff and
	stabs debugging info (continue on if a psymtab isn't found).

Sun Mar 23 16:19:20 1997  Mark Alexander  <marka@cygnus.com>

	Fixes from Peter Schauer:
	* config/mips/tm-mips.h (REGISTER_CONVERT_TO_TYPE,
	REGISTER_CONVERT_FROM_TYPE): Swap words if target, not host,
	is big-endian and if registers are 32 bits.
	* mips-tdep.c (mips_print_register, mips_extract_return_value,
	mips_store_return_value): Fix floating-point word-order problems on
	little-endian targets introduced by changes of Mar 21.

Sun Mar 23 15:43:27 1997  Stan Shebs  <shebs@andros.cygnus.com>

	* remote.c (target_resume_hook, target_wait_loop_hook): New
 	globals.
 	(remote_resume, remote_wait): Use them.
	* d10v-tdep.c: Set the above hooks.
	(tracesource): New GDB variable, controls source display in
 	traces.
	(display_trace): Find and display source line if requested.
	(trace_info): Mention empty trace buffer if appropriate.
	(tdisassemble_command): Robustify argument handling.

	* configure.host: Remove extra bogus Linux case.

Sat Mar 22 16:41:35 1997  Fred Fish  <fnf@cygnus.com>

	* remote-sim.c (simulator_command): Add comment about dealing with
	NULL or empty args.
start-sanitize-tic80
	* Makefile.in (tic80-tdep.o): Add target.
	* configure.tgt: Add tic80 case.
	* tic80-tdep.c: New file.
	* config/tic80/{tic80.mt, tm-tic80.h}: New files.
end-sanitize-tic80

Sat Mar 22 02:48:11 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* c-exp.y (yylex):  Handle nested template parameter lists.
	* symtab.c (decode_line_2):  Fix test for valid choice number.

Fri Mar 21 19:10:05 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (mips_push_arguments): On non-EABI architectures,
	copy first two floating point arguments to general registers, so that
	MIPS16 functions will receive the arguments correctly.
	(mips_print_register): Print double registers correctly on
	little-endian hosts.
	(mips_extract_return_value): Return double values correctly
	on little-endian hosts.

	* mdebugread.c (parse_procedure): Adjust address of procedure relative
	to address in file descriptor record; this accounts for constant
	strings that may precede functions in the text section.  Remove
	now-useless lowest_pdr_addr from argument list and all calls.

Fri Mar 21 15:36:25 1997  Michael Meissner  <meissner@cygnus.com>

	* configure.tgt (powerpc*-{eabi,linux,sysv,elf}*): Determine
	whether the simulator will be built by whether the Makefile in the
	simulator directory was built.

	* configure.in (--enable-sim-powerpc): Delete switch.
	* configure: Regenerate.

Thu Mar 20 20:52:04 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10200-tdep.c (mn10200_analyze_prologue): Look for save of "a1"
	in the prologue too.

	* remote-sim.c (gdb_os_vprintf_filtered): Fix to work with non-ANSI
	compilers.
	(gdb_os_evprintf_filtered): Similarly.
	
Wed Mar 19 16:13:22 1997  Geoffrey Noer  <noer@pizza.cygnus.com>

	New UnixWare 2.1 configuration
	* config/i386/i386v42mp.mt: new
	* config/i386/i386v42mp.mh: new
	* config/i386/tm-i386v42mp.h: new
	* config/i386/nm-i386v42mp.h: new
	* configure.tgt: added new entries
	* configure.host: added new entries

start-sanitize-gdbtk
Wed Mar 19 15:16:17 1997  Martin M. Hunt  <hunt@onions.cygnus.com>

	* Makefile.in:  Install gdbtcl dir instead of gdbtk.tcl.
	
	* gdbtk.c: Added some ifdefs for Windows.  Changed GDBTK_FILENAME
	to GDBTK_LIBRARY, which is now a path to search.
	(gdb_path_conv): New function.  Convert Cygwin32 pathname to
	DOS-style pathname.

	* {aclocal.m4,configure.in}: Changes for Windows builds.

	* configure: Rebuilt.

end-sanitize-gdbtk	
Mon Mar 17 17:52:00 1997  J.T. Conklin  <jtc@cygnus.com>

	* dsrec.c (load_srec): Print leading zeroes when printing section
 	addresses.

Mon Mar 17 15:00:16 1997  Andrew Cagney  <cagney@kremvax.cygnus.com>

	* remote-sim.h: Delete - moved to ../include/remote-sim.h.
 	
	* Makefile.in (remote_utils_h): Update path to remote-sim.h.

Fri Mar  7 20:55:28 1997  Andrew Cagney  <cagney@kremvax.cygnus.com>

	* remote-sim.c (flush_stdout, write_stderr, flush_stderr,
 	vprintf_filtered, evprintf_filtered): Callbacks that accept
 	varargs.
	
Sat Mar 15 00:50:46 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* breakpoint.c (insert_breakpoints, watchpoint_check,
	bpstat_stop_status):  Do not disable watchpoints going out of scope.
	(insert_breakpoints):  Make sure that the current frame is valid
	before calling find_frame_addr_in_frame_chain.

	* top.c (setup_user_args):  Handle quotes and backslashes.
	(print_gdb_version):  Update copyright year.

Fri Mar 14 15:44:03 1997  Ian Lance Taylor  <ian@cygnus.com>

	* Makefile.in (elfread.o): Depend upon elf-bfd.h and elf/mips.h.

start-sanitize-gdbtk
Fri Mar 14 10:01:29 1997  Tom Tromey  <tromey@cygnus.com>

	* configure: Regenerated.
	* configure.in (LIBS): Re-reverse order of TCL_LIBS and TK_LIBS.

end-sanitize-gdbtk
Thu Mar 13 22:51:00 1997  Dawn Perchik  <dawn@cygnus.com>

	* utils.c (pollquit, notice_quit): If _WIN32, limit test for
	cntl-C to wingdb.
	(initialize_utils): If _WIN32, don't call ScreenRows and ScreenCols 
	except under wingdb.  (Contributed by Martin Hunt).

Thu Mar 13 12:40:49 1997  Tom Tromey  <tromey@cygnus.com>

	* configure: Regenerated.
	* configure.in: Run AC_CONFIG_AUX_DIR before AC_CANONICAL_SYSTEM.

Thu Mar 13 11:00:22 1997  Doug Evans  <dje@canuck.cygnus.com>

	* remote-sim.h (sim_state, SIM_DESC): New types.
	(sim_open): Return a `descriptor' as result.
	(*): New argument of descriptor result from sim_open.
	* remote-sim.c (gdbsim_desc): Renamed from gdbsim_open_p.
	(gdbsim_open): Record result of sim_open in gdbsim_desc.
	Pass argv list to sim_open, argv[0] = pseudo program name.
	(*): Pass gdbsim_desc to sim_foo fns.

Wed Mar 12 14:40:06 1997  Tom Tromey  <tromey@cygnus.com>

	* config.in: Regenerated.

	* acconfig.h (START_INFERIOR_TRAPS_EXPECTED, sys_quotactl,
	HAVE_HPUX_THREAD_SUPPORT): Define.

start-sanitize-gdbtk
Wed Mar 12 14:29:52 1997  Tom Tromey  <tromey@cygnus.com>

	* gdbtk.c (x_event): Use Tcl_DoOneEvent, TCL_DONT_WAIT,
	TCL_ALL_EVENTS.

	* configure: Regenerated.
	* configure.in (ENABLE_GDBTK): Put TCL_LIBS after TK_LIBS in
	LIBS.

end-sanitize-gdbtk
Tue Mar 11 07:25:27 1997  Mark Alexander  <marka@cygnus.com>

	First cut at supporting simulators in gdbserver:

	* configure, configure.in: Allow gdbserver to be configured
	for cross-target environments.
	* gdbserver/Makefile.in: Add simulator support.
	* gdbserver/configure.in: Eliminate assumption that host == target.
	Simplify using gdb/configure.tgt and gdb/configure.host.
	Fix other minor configuration errors.
	* gdbserver/low-sparc.c: Fix compile error.
	* gdbserver/remote-utils.c: Eliminate assumption that registers
	and addresses are four bytes.  Fix minor compile errors and warnings.
	* gdbserver/server.c: Rewrite numerous instances of identical code
	for starting inferior processes to call new function start_inferior.
	Eliminate assumption that registers and addresses are four bytes.
	* gdbserver/server.h: Add missing prototypes to eliminate compiler
	warnings.
	* gdbserver/low-sim.c: New file to mate gdbserver with simulators.
	* config/mips/vr5000.mt: Add Vr5000 simulator support to gdbserver.
	* config/i386/linux.mh: Eliminate gdbserver support as a first step
	in moving such support from host to target makefile fragments.
	* config/i386/linux.mt: Move gdbserver support here from linux.mh.

Mon Mar 10 12:27:47 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* symtab.h (INIT_SAL): New macro to initialize symtab_and_line, 
	to insure consistant initialization of unused fields to zero.
	* symtab.c: replace initializations of sals with new macro INIT_SAL.
	* breakpoint.c: ditto.
	* infrun.c: ditto.
	* infcmd.c: ditto.
	* source.c: add call to INIT_SAL macro.

Sat Mar  8 00:16:37 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* sparc-tdep.c (isbranch):  Always handle v9 branch instructions,
	they might get used on 32 bit targets as well.

Wed Mar  5 19:34:09 1997  Bob Manson  <manson@charmed.cygnus.com>

	* remote-mips.c (mips_exit_debug): Some IDT boards don't
	send the full exit string.

Wed Mar  5 12:59:27 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10200-tdep.c (mn10200_push_arguments): Handle new calling
	conventions.
	(mn10200_store_struct_return): Likewise.

Tue Mar  4 10:31:02 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (mips_fetch_instruction): New function; replace
	common code throughout with calls to it.
	(mips_find_saved_regs): Examine MIPS16 entry instruction to determine
	correct saved addresses of $s0 and $s1.
	(mips_find_saved_regs, mips16_heuristic_proc_desc):  Use MIPS_REGSIZE
	instead of hardcoded 4.
	(mips16_skip_prologue): Handle extended instructions correctly.

Mon Mar  3 12:29:20 1997  Doug Evans  <dje@canuck.cygnus.com>

	* defs.h (LONGEST): Move #ifndef LONGEST to outside.
	Try BFD_HOST_64_BIT if ! CC_HAS_LONG_LONG.

Thu Feb 27 18:54:11 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (IS_MIPS16_ADDR, MAKE_MIPS16_ADDR, UNMAKE_MIPS16_ADDR):
	New macros for testing, setting, and clearing bit 0 of addresses.
	Change numerous bits of code where bit 0 was being manipulated
	to use these macros.

Thu Feb 27 14:12:41 1997  Mark Alexander  <marka@cygnus.com>

	* remote-mips.c: Put back the form feeds.

Thu Feb 27 12:04:24 1997  Mark Alexander  <marka@cygnus.com>

	* remote-mips.c: Remove form feeds (^L) from source.
	(mips_initialize): LSI PMON doesn't support 'set regsize' command.
	(pmon_wait): Don't need to exit and re-enter debug mode on LSI
	PMON after a continue; it causes target program misbehavior.
	(mips_fetch_register): Don't fetch unsupported registers; this
	cuts down on wasted serial traffic.

Thu Feb 27 09:38:16 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* configure.in configure (HPUX/OSF thread support):  Enable this
	only when running GCC, since HP's thread header files use ANSI C
	which is not supported by their default compiler.

	* configure.host (i[3456]86-*-windows):  Disable long long
	support for WinGDB.  Add mswin to configdirs.
	* configure.in configure:  Move calls to configure.host and
	configure.tgt to the top of configure.in to allow them to set
	config variables before they are referenced.

Tue Feb 25 20:21:52 1997  Stan Shebs  <shebs@andros.cygnus.com>

	* configure.tgt (mips*-*-lnews*): New target.

Mon Feb 24 16:35:00 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10200-tdep.c (mn10200_analyze_prologue): Don't fix fi->frame
	if we're not the innermost frame.  Fix minor typos.

Sat Feb 22 03:39:50 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* stabsread.c (read_type):  Fix handling of template names
	with template parameters containing `::'.

	* valops.c (search_struct_field, search_struct_method):
	Pass correct valaddr parameter to baseclass_offset.
	Prevent gdb crashes by making sure that the virtual base pointer
	from an user object still points to accessible memory.

Tue Feb 18 13:36:34 1997  Mark Alexander  <marka@cygnus.com>

	* maint.c: Eliminate -Wall warnings by including some header files.

Tue Feb 18 13:06:30 1997  Mark Alexander  <marka@cygnus.com>

	* remote-sim.c (init_callbacks): Undo previous change.

Tue Feb 18 11:13:00 1997  Dawn Perchik  <dawn@cygnus.com>

	* maint.c: Fix dereference of pointer.
	* remote-sim.c: Fix reference of structure member "last_error".
	* debugify.c: Include config.h to get ANSI definitions.

Sat Feb 15 17:43:46 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* remote-vx.c (vx_attach): Remove code added by kung.  It made no
 	sense.

Fri Feb 14 13:00:07 1997  Ian Lance Taylor  <ian@cygnus.com>

	* main.c (print_gdb_help): Make static to match declaration.

Thu Feb 13 18:18:18 1997  Dawn Perchik  <dawn@cygnus.com>

	* remote-e7000.c, ser-e7kpc.c, serial.c: Remove // comments.

Wed Feb 12 15:58:00 1997  Dawn Perchik  <dawn@cygnus.com>

	* debugify.c, debugify.h: Make safe for non-ansi compilers.

Wed Feb 12 15:30:00 1997  Dawn Perchik  <dawn@cygnus.com>

	* defs.h: Fix prototypes for new cleanup functions.

Wed Feb 12 15:08:47 1997  Dawn Perchik  <dawn@cygnus.com>

	* debugify.c, debugify.h: Fix for general gnu use.  Remove C++ 
	comment, add PARAMS, add license info and fix indentation.

Wed Feb 12 14:42:47 1997  Dawn Perchik  <dawn@cygnus.com>

	* debugify.c, debugify.h: New files.  Provide common macros
	for writing debug info to a log file or stdio.

Wed Feb 12 02:44:39 1997  Dawn Perchik  <dawn@cygnus.com>

        * c-valprint.c (c_val_print): Fix printing for arrays defined
        with 0 length.

Tue Feb 11 22:24:39 1997  Dawn Perchik  <dawn@cygnus.com>

	* defs.h: Fix cntl-C to read from the Windows message queue.
	Add prototypes for make_final_cleanup (and the other cleanup
	routines.
	* remote-e7000.c: Fix sync code to timeout if unable to sync.
	Change sync code to report status while trying to sync-up 
	with hardware.  Add debugging output and document.
	* ser-e7kpc.c: Swap order of len & offset to match implementation.
	Add debugging output and document.
	* serial.c: Add debugging output.
	* top.c: Add call to do_final_cleanups.
	Remove conditionals preventing Win32 from getting SIGQUIT.
	* utils.c: (*_cleanup): Modify cleanup routines to accept a cleanup
	chain as a parameter.  Extract this generic code from the cleanup 
	routines into separate funtions (*_my_cleanup).  Keep old 
	functionality by passing "cleanup_chain" to the new funtions.  
	Define the cleanup chain "final_cleanup_chain" to be a cleanup 
	chain which will be executed only when gdb exits.  Add functions 
	(*_final_cleanup) to match the original (*_cleanup) functions.
	(pollquit, quit, notice_quit): Fix to read cntl-C from the 
	Windows message queue.

Tue Feb 11 15:36:31 1997  Doug Evans  <dje@canuck.cygnus.com>

	* m32r-rom.c: #include <sys/types.h>.
	#ifdef out new load support if wingdb.
	* m32r/tm-m32r.h (TARGET_M32R): Define, for wingdb.

Tue Feb 11 12:28:09 1997  Jeffrey A Law  (law@cygnus.com)


	* config/mn10200/tm-mn10200.h (STORE_STRUCT_RETURN): Fix.
	* mn10200-tdep.c (mn10200_store_struct_return): New function.

	* config/mn10200/tm-mn10200.h (EXTRACT_RETURN_VALUE): Fix case when
	extracting a return value from a register pair.

	* mn10200-tdep.c (mn10200_push_arguments): Stack only needs to
	be two byte aligned.  Round argument sizes up to two byte boundary.
	Write out args in two byte hunks.
	(mn10200_push_return_address): Implement.
	* config/mn10200/tm-mn10200.h (EXTRACT_RETURN_VALUE): Abort for
	structures > 8 bytes (temporary).
	(STORE_RETURN_VALUE): Likewise.
	(CALL_DUMMY): No longer undefine.
	(USE_STRUCT_CONVENTION): Use for args > 8 bytes.
	(REG_STRUCT_HAS_ADDR): Define.
	
start-sanitize-r5900
Fri Feb 07 09:04:37 1997  Gavin Koch  <gavin@cygnus.com>
        
        * configure.tgt: added r5900.
        
end-sanitize-r5900
Mon Feb 10 18:35:55 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (non_heuristic_proc_desc): New function.
	(find_proc_desc): Move non-heuristic proc search code into separate
	function.
	(gdb_print_insn_mips): Use non-heuristic method to find procedure
	descriptor, to avoid prologue examination when disassembling.
	* remote-mips.c: Add support for new "lsi" target (LSI MiniRISC
	aka MicroMeteor board).
	(mips_exit_debug): Prevent protocol reinitialization if an error
	occurs while exiting debug mode.

Mon Feb 10 16:11:57 1997  Jeffrey A Law  (law@cygnus.com)

	* mn10200-tdep.c: Remove lots of debugging printfs, update/improve
	comments, formatting, etc.  Plus other minor fixes for problems
	I found during my first pass over the mn10200 port.
	(mn10200_analyze_prologue): New function.
	(mn10200_frame_chain, mn10200_init_extra_frame_info): Use it.
	* config/mn10200/tm-mn10200.h: Lots of updates/improvements to
	comments, formatting, etc.  Minor fixes for problems I found during
	my first pass over the mn10200 port.
	(TARGET_*_BIT): Define appropriately for ints, long longs, doubles and
	pointers.
	(REGISTER_VIRTUAL_TYPE): Define as a long.
	(EXTRACT_RETURN_VALUE): Rework to deal with long ints living
	in register pairs.
	(STORE_RETURN_VALUE): Similarly.

	* blockframe.c (generic_get_saved_regs): Remove unused variable
	"addr".
	* breakpoint.c (frame_in_dummy): Move struct breakpoint *b decl
	inside #ifdef CALL_DUMMY.
	(watch_command_1): Initialize target_resources_ok.
	* command.c (do_setshow_command): Provide dummy initialization
	for "match".
	* valops.c (find_function_addr): Move function & prototype inside
	#ifdef CALL_DUMMY.
	(value_arg_coerce): Similarly.
	(value_of_variable): Provide dummy initialization of "frame".

start-sanitize-gdbtk
Mon Feb 10 13:50:53 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* gdbtk.c (call_wrapper):  Clear running_now if an error occurs.

end-sanitize-gdbtk
Mon Feb 10 07:54:26 1997  Fred Fish  <fnf@cygnus.com>

	* xcoffread.c (RECORD_MINIMAL_SYMBOL): Add NULL asection* parameter
 	to prim_record_minimal_symbol_and_info call that was missed in Jan 3
	change.
	(scan_xcoff_symtab): Ditto.

Sun Feb 09 09:23:26 1997  Mark Alexander  <marka@cygnus.com>

	* remote-mips.c (common_breakpoint): Prevent 64-bit addresses
	from being sent to 32-bit targets by masking off upper bits.
	* mips-tdep.c (heuristic_proc_start): Mask off upper 32 bits
	of PC on 32-bit targets.
	(mips16_heuristic_proc_desc): Recognize 'addiu s1,sp,n' as a
	frame setup instruction.
	(mips32_heuristic_proc_desc): Fix warning found by gcc -Wall.
	(mips16_skip_prologue): Recognize 'addiu s1,sp,n' as a valid
	prologue instruction.  Fix warnings and bugs found by gcc -Wall.
	* buildsym.c (finish_block): Improve handling of overlapping blocks;
	fixes problem on MIPS16 printing function arguments.

Sat Feb  8 01:14:43 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dwarf2read.c (dwarf2_linkage_name):  New function to get
	the linkage name of a die from DW_AT_MIPS_linkage_name or
	DW_AT_name.
	(read_func_scope, dwarf2_add_field, dwarf2_add_member_fn,
	new_symbol):  Use it instead of accessing DW_AT_name.
	(read_partial_die):  Use DW_AT_MIPS_linkage name as name of the
	partial die if present.
	(dwarf2_add_member_fn):  Make a copy of physname on the type obstack.

Fri Feb  7 10:06:22 1997  Jeffrey A Law  (law@cygnus.com)

	* blockframe.c (generic_frame_chain_valid): If the new frame
	is not INNER_THAN the old frame, then it's not valid.

Tue Feb 04 09:04:37 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (mips16_get_imm): Fix calculation of extended immediate.
	(mips16_heuristic_proc_desc): Recognize jal(x) instruction.

Mon Feb 03 17:57:58 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (mips16_decode_reg_save): Distinguish between
	sd and sw instructions correctly.
	(heuristic_proc_start): Add support for MIPS16.
	(mips16_get_imm, mips16_heuristic_proc_desc,
	mips32_heuristic_proc_desc): New helper functions for
	heuristic_proc_desc.
	(heuristic_proc_desc): Rewrite and reorganize to support MIPS16.
	(mips_push_arguments): Don't align small arguments in EABI.
	(mips32_skip_prologue): Attempt to shrink code size a little.

Mon Feb  3 11:06:05 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* m32r-stub.c: New -- remote protocol support for M32R cpu.
	* m32r-rom.c:  Several experiments with improved download time.

Fri Jan 31 08:26:39 1997  Mark Alexander  <marka@cygnus.com>

	* mips-tdep.c (MIPS16_INSTLEN): Define.
	(mips_find_saved_regs): Replace hardcoded 2's with MIPS16_INSTLEN.
	(heuristic_proc_start): Recognize 'entry' pseudo-op as a start
	of function on MIPS16.
	(mips32_skip_prologue, mips16_skip_prologue): New helper functions
	for mips_skip_prologue.
	(mips_skip_prologue): Recognize both 16- and 32-bit prologues.

Wed Jan 29 12:45:54 1997  Michael Meissner  <meissner@tiktok.cygnus.com>

	* config/powerpc/ppc{,le}-sim.mt (SIM): Remove the library
	../sim/common/libcommon.a.

Tue Jan 28 15:54:13 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* blockframe.c: fix a null pointer ref in generic_get_saved_register

Tue Jan 28 15:39:50 1997  Geoffrey Noer  <noer@cygnus.com>

	* mn10200-tdep.c (mn10200_frame_chain): Get basic backtracing
	working.

Mon Jan 27 14:31:52 1997  Mark Alexander  <marka@cygnus.com>

First set of changes for mips16:
	* config/mips/tm-mips.h (MIPS16_BIG_BREAKPOINT,
	MIPS16_LITTLE_BREAKPOINT, BREAKPOINT_FROM_PC): Define.
	(ABOUT_TO_RETURN): Call new function mips_about_to_return.
	(mips_breakpoint_from_pc, mips_about_to_return): Declare.
	* mem-break.c (memory_breakpoint_from_pc): New function.
	(memory_insert_breakpoint, memory_remove_breakpoint): Use
	memory_breakpoint_from_pc to determine breakpoint contents and size.
	* target.h (memory_breakpoint_from_pc): Declare.
	* monitor.c (monitor_insert_breakpoint): Use memory_breakpoint_from_pc
	to determine size of breakpoint instruction.
	* mips-tdep.c (mips32_decode_reg_save, mips16_decode_reg_save):
	New helper functions for mips_find_saved_regs.
	(mips_find_saved_regs): Recognize mips16 prologues.
	(mips_addr_bits_remove): Strip off upper 32 bits of address
	when target CPU is 32 bits but CORE_ADDR is 64 bits.
	(mips_step_skips_delay): No branch delay slot on mips16.
	(gdb_print_insn_mips): Disassemble mips16 code.
	(mips_breakpoint_from_pc, mips_about_to_return): New functions.

Mon Jan 27 10:34:03 1997  Jeffrey A Law  (law@cygnus.com)

	* tm-mn10200.h (NUM_REGS): Decrease to 12.
	(REGISTER_NAMES): Elimination registers not found on the mn10200.
	(PC_REGNUM, MDR_REGNUM, PSW_REGNUM): Corresponding changes.
	(LIR_REGNUM, LAR_REGNUM): Delete.  They don't exist on the mn10200.

Sat Jan 25 00:07:59 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dwarf2read.c:  Replace integral tag, name and form fields in
	internal structure definitions with the corresponding enumeration
	types from dwarf2.h. Add default cases to switches on enumerations
	where appropriate.
	Make quoting of string arguments in complaint messages consistent.
	Check for NULL returns from DW_STRING.
	(struct partial_die_info):  Add sibling and has_type fields, remove
	unused value field.
	(DW_*):  Move access macro definitions near the definition of the
	attribute structure.
	(struct field_info):  New structure to pass information about fields
	and member functions between die processing routines.
	(dwarf2_build_psymtabs_hard):  Set cu_header_offset.
	(scan_partial_symbols):  Do not enter DW_TAG_subprogram dies into
	the partial symbol table if the DW_AT_*_pc attributes are missing.
	Add file scope base type definitions to the partial symbol table.
	Skip over child dies if the die has a sibling attribute.
	(add_partial_symbol):  Enter global variables with type attributes
	and without location descriptors into the partial symbol table.
	Store value of DW_TAG_variable dies in the partial symbol table.
	Do not enter global variables into the minimal symbol table.
	Add base type definitions to the partial symbol table.
	(psymtab_to_symtab_1):  Use dwarf2_get_pc_bounds to determine highpc.
	(process_die):  Move check for DW_AT_low_pc to read_func_scope.
	Add a typedef symbol for base type definitions to the symbol table.
	Ignore DW_TAG_inlined_subroutine tags for now.
	(read_file_scope):  Use dwarf2_get_pc_bounds to determine pc bounds.
	(read_func_scope, read_lexical_block_scope):  Use dwarf2_get_pc_bounds
	to determine pc bounds, ignore dies with invalid bounds.
	(dwarf2_get_pc_bounds):  New routine to extract and validate the
	DW_AT_*_pc attributes of a die.
	(dwarf2_add_field, dwarf2_attach_fields_to_type, skip_member_fn_name,
	dwarf2_add_member_fn, dwarf2_attach_fn_fields_to_type):
	New functions to handle fields and member functions.
	(read_structure_scope):  Rewritten to use them.
	(read_array_type):  Renamed from dwarf_read_array_type.
	Default upper array bound to describe an array with unspecified
	length.
	Create array types in backwards order, as dwarf2 puts out the array
	dimensions from left to right.
	(read_subroutine_type):  Handle DW_TAG_unspecified_parameters,
	DW_AT_artificial and DW_AT_prototyped.
	(read_base_type):  Make an unsigned type for DW_ATE_boolean.
	Pass objfile to dwarf_base_type.
	(read_partial_die):  Use read_attribute to read in the attributes.
	Handle DW_AT_sibling and DW_AT_type.
	Follow references when determining DW_AT_name and DW_AT_external
	attributes of the die.
	Validate DW_AT_*_pc attributes.
	(read_full_die):  Use read_attribute to read in the attributes.
	(read_attribute):  New function to read an attribute described
	by an abbreviated attribute.
	(new_symbol):  Relocate symbol value for DW_TAG_label with baseaddr.
	Do not set SYMBOL_VALUE_ADDRESS for DW_TAG_subprogram,
	SYMBOL_BLOCK_VALUE for the symbol will be set later by finish_block.
	Change symbol class for global variables with a zero valued location
	descriptor to LOC_UNRESOLVED.
	Handle DW_AT_const_value attributes for DW_TAG_variable,
	DW_TAG_formal_parameter and DW_TAG_enumerator.
	Build a typedef symbol for DW_TAG_base_type.
	(dwarf2_const_value):  New routine to copy a constant value from an
	attribute to a symbol.
	(dwarf_base_type):  Use passed in objfile, not current_objfile
	when calling dwarf2_fundamental_type.
	(dump_die):  Use DW_* accessor macros to access values of attributes.
	(decode_locdesc):  Handle DW_OP_plus_uconst.

Wed Jan 22 01:31:16 1997  Geoffrey Noer  <noer@cygnus.com>

	* mn10200-tdep.c: New file.
	* config/mn10200/tm-mn10200.h: New, REGISTER_SIZE is 24 bits not 32,
	SP_REGNUM and FP_REGNUM are different, also no lar or lir.
	* config/mn10200/mn10200.mt: New file.
	* configure.tgt: add mn10200 entry.

Tue Jan 21 18:32:23 1997  Stu Grossman  (grossman@lisa.cygnus.com)

	* configure.in configure:  Check if host has libdl if doing
	Solaris threads.

Tue Jan 21 17:03:26 1997  Geoffrey Noer  <noer@cygnus.com>

	* mn10300-tdep.c: Wrote/fixed implementations of
	mn10300_frame_chain, mn10300_init_extra_frame_info,
	mn10300_frame_saved_pc
	* config/mn10300/tm-mn10300.h: Redefine INIT_EXTRA_FRAME_INFO
	and INIT_FRAME_PC macros.

Tue Jan 21 17:01:20 1997  Stu Grossman  (grossman@lisa.cygnus.com)

	* configure.in configure:  Check if host has libm.  Make sure we
	are using gcc when using the -export-dynamic option.  Fixes a
	problem with building under Solaris/SunPro cc.

Mon Jan 20 13:52:13 1997  Mark Alexander  <marka@cygnus.com>

	* config/mips/{embed,embed64,embedl,embedl64}.mt:
	Link in simulator on MIPS embedded targets.

Sat Jan 18 02:31:29 1997  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* blockframe.c (frameless_look_for_prologue):  Mark frames
	with a zero PC as frameless to improve backtraces from core dumps
	caused by dereferencing a NULL function pointer.

Thu Jan 16 14:10:41 1997  Geoffrey Noer  <noer@cygnus.com>

	* config/mn10300/tm-mn10300.h: fix BREAKPOINT definition.

Tue Jan 14 16:01:06 1997  Geoffrey Noer  <noer@cygnus.com>

	* mn10300-tdep.c: made a lot more generic, ripping out code
	from copied target (no more mn10300_scan_prologue,
	init_extra_frame_info, and mn10300_fix_call_dummy calls)
	* config/mn10300/tm-mn10300.h: undefine INIT_EXTRA_FRAME_INFO
	and INIT_FRAME_PC macros

Thu Jan  9 11:44:40 1997  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* sparc-tdep.c (sparc_frame_find_saved_regs): Don't use 
	FP_REGISTER_BYTES to compute offsets into the saved frame, 
	since it fails for SPARC targets configured without any
	FP regs.  Instead, use DUMMY_STACK_REG_BUF_SIZE.  

Mon Jan  6 11:15:14 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* symtab.c (fixup_symbol_section):  Handle NULL symbols without
	crashing.

Fri Jan  3 12:08:16 1997  Stu Grossman  (grossman@critters.cygnus.com)

	* Makefile.in configure configure.in:  Remove ENABLE_CLIBS,
	ENABLE_OBS, and THREAD_DB_OBS.  These are consolidated into LIBS
	and CONFIG_OBS.
	* configure configure.in:  Clean up test cases around thread support.
start-sanitize-v850
	* configure.tgt (v850-*-*):  Include v850ice.o and v850.lib if
	host is Windows.
end-sanitize-v850
	* c-valprint.c ch-valprint.c cp-valprint.c eval.c expprint.c
	printcmd.c valops.c value.h values.c:  Add bfd_section arg to
	value_at and value_at_lazy.
	* coffread.c dbxread.c elfread.c mdebugread.c minsyms.c symtab.h:
	Add bfd_section arg to prim_record_minimal_symbol_and_info.
	* corefile.c gdbcore.h printcmd.c valops.c:  Use read_memory_section
	instead of read_memory.  It takes a bfd_section arg.
	* coffread.c dbxread.c elfread.c gdb-stabs.h objfiles.h:  Remove
	unnecessary cast for assignment of struct dbx_symfile_info.
	Struct objfile now uses a real pointer instead of PTR for this
	element.
	* dbxread.c (dbx_symfile_init): Stash bfd section pointers for
	text, data and bss into dbx_symfile_info.
	* exec.c (xfer_memory):  Handle transfers for user-specified
	sections.
	* findvar.c (read_var_value locate_var_value):  Copy bfd section
	from the symbol to the value.
	* gdb-stabs.h:  Add section pointers for text, data and bss
	sections.
	* maint.c (translate address command):  Add test code for overlay
	address translation.
	* printcmd.c (do_examine do_one_display):  Now takes a bfd section
	arg.
	* (print_formatted x_command):  Record current section along with
	current address for repeated commands.
	* sparc-nat.c (fetch_inferior_registers):  Change
	target_xfer_memory to target_{read write}_memory to allow changes
	to target_xfer_memory interface for section info.
	* symmisc.c (dump_msymbols print_symbol):  Print section
	assocaited with symbol.
	* symtab.c (fixup_symbol_section):  New routine to
	add section info to symbols returned by lookup_symbol.
	* symtab.h (struct general_symbol_info):  Add bfd section to
	symbols.
	* target.c target.h (target_xfer_memory):  Add bfd section to
	args.
	* (target_read_memory_section):  New routine to read data from a
	specific section.
	* (target_memory_bfd_section):  New global variable to pass bfd
	section in to targets.
	* valarith.c (value_add value_addr value_array):  Preserve bfd
	section when computing new value.
	* value.h (struct value):  Add bfd section to values.
	* values.c (allocate_value value_copy):  Initialize/preserve bfd
	section.
	* (unpack_double):  Clean up _MSC_VER conditionals to remove
	duplicate code.
start-sanitize-v850
	* v850ice.c:  New module to support communication with NEC's
	PC-based ICE.
	* config/v850/tm-v850.h (REGISTER_NAMES):  Replace sp, gp, fp, and
	ep names with rxx names.  sp and fp are renamed via a different
	mechanism.
end-sanitize-v850

Fri Jan  3 14:20:05 1997  Geoffrey Noer  <noer@cygnus.com>

	* mn10300-tdep.c (mn10300_push_arguments): rewrote,
	also removed code elsewhere that made use of RP_REGNUM.
	* config/mn10300/tm-mn10300.h: ripped out RP_REGNUM, V0_REGNUM,
	ARG0_REGNUM, ARGLAST_REGNUM (all not appropriate for mn10300
	arch.), redefined SAVED_PC_AFTER_CALL, EXTRACT_RETURN_VALUE,
	EXTRACT_STRUCT_VALUE_ADDRESS, STORE_RETURN_VALUE.

For older changes see ChangeLog-96

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
