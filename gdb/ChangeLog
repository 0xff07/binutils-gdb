Thu Apr 28 08:40:56 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (query): Change syntax of query annotations to be
	consistent with other input annotations.

Thu Apr 28 01:20:39 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (psymtab_to_symtab_1):  Do not call sort_blocks
	for stabs symtabs.
	* mips-tdep.c (mips_skip_prologue):  Handle prologues for functions
	that have a stack frame size of 32k or larger (from Paul Flinders).
	Remove #if 0'd code.

Wed Apr 27 16:33:51 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* lynx-nat.c (CANNOT_STORE_REGISTER): Add a fallback definition
	for Lynx platforms that need it.
	* config/nm-lynx.h (__LYNXOS): Define if not already defined.

Wed Apr 27 16:01:37 1994  Jim Kingdon  (kingdon@cygnus.com)

	* procfs.c (procfs_wait): Use the signal from the pr_info rather
	than trying to deduce it from the fault.

Wed Apr 27 12:22:46 1994  Steve Chamberlain  (sac@cygnus.com)

	* printcmd.c (print_address_symbolic): Initialize name to empty
	string to avoid core dump if lookup fails.
	* remote-e7000.c (printf_e7000debug): Error if target not open.

Tue Apr 26 22:45:24 1994  Stu Grossman  (grossman at cygnus.com)

	* i386-nlmstub.c:  Update to be more in line with PIN stub.
	* nlm/gdbserve.c (putDebugChar):  Install bug fix from i386-nlmstub.
	* (hex2mem):  Init ptr.
	* General cleanups to use ConsolePrintf, standard prologues, etc...

Tue Apr 26 10:23:04 1994  Stu Grossman  (grossman at cygnus.com)

	* i386-nlmstub.c:  More changes to be compatible with remote.c.

	* dbxread.c:  Move a bunch of strncmps out of process_one_symbol
	into (the far less frequently called) dbx_symfile_read.

	* i386-nlmstub.c:  An interim version till we get PIN for the x86.

Tue Apr 26 09:50:45 1994  Stu Grossman  (grossman at cygnus.com)

	* dbxread.c (record_minimal_symbol):  Record the section
	associated with the symbol to make dynmaic relocation work.
	* (dbx_symfile_read, process_one_symbol):  Fixes to work around
	Solaris brain-damage which don't apply to relocatable object
	files.
	* (stabsect_build_psymtabs):  New routine to read stabs out of an
	arbitrarily named section.
	* nlmread.c (nlm_symtab_read):  Read ALL syms from the NLM, not just
	globals.
	* (nlm_symfile_read):  Call stabsect_build_psymtabs to read the
	stabs out of the nlm.
	* partial-stabs.h (cases 'f' & 'F'):  Fixes to work around Solaris
	brain-damage which don't apply to relocatable object files.
	* remote.c (putpkt):  Improve error reporting and error handling.
	* (get_offsets):  Temporary kludge to force data & bss sections to
	have the same relocation.
	* stabsread.c (define_symbol, scan_file_globals):  Record section
	info in sym.

Sat Apr 23 19:05:52 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* breakpoint.c (breakpoint_1): Annotate each field of output.  Add
	FIXME-32x64 comment.

Fri Apr 22 16:43:54 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c (wait_for_inferior): Move call to flush_cached_frames
	to after call to target_wait.  This means that flush_cached_frames
	can call target_terminal_ours if it wants to.
	* infrun.c (wait_for_inferior) [HAVE_NONSTEPPABLE_WATCHPOINT]: Add
	comment about why the code is dubious.

	* stabsread.c (read_type): Call read_type, not nonexistent
	os9k_read_type.

Fri Apr 22 14:25:36 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* remote-os9k.c (rombug_fetch_registers): set trace mode
	correctly.
	* remote-os9k.c (rombug_read_inferior_memory): cache data in
	buffer.
	* os9kread,c (read_os9k_psymtab): process file symbol to truncate
	extra info.
	* os9kread.c (os9k_read_ofile_symtab): proper casting of args
	passed to process_one_symbol.
	* stabsread.c (read_type): process os9k functio prototype.

Fri Apr 22 11:27:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* solib.c (symbol_add_stub): If so->textsection is NULL, don't
	dump core.

Thu Apr 21 07:45:49 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (prompt_for_continue): Annotate prompt.
	(query): Annotate query.
	* printcmd.c (print_frame_args): Change syntax of argument
	annotation to make name and value part of a single group of
	annotations, not two separate groups.
	* cp-valprint.c (cp_print_value_fields): Likewise for fields.
	* valprint.c (val_print_array_elements): Change syntax of
	annotation to be more concise.
	* main.c, defs.h (command_line_input): New argument tells what
	string to include in the annotations.
	* symtab.c (decode_line_2), main.c (read_command_lines,
	command_loop): Change callers.

	* breakpoint.c (watch_command): Use (CORE_ADDR)0, not NULL, for
	target null pointer.
	* blockframe.c (find_frame_addr_in_frame_chain): Likewise.

	* printcmd.c (output_command): Annotate things we print here too.
	* printcmd.c (print_command_1): Add "value-history-value" annotation.
	* Move declaration of print_value_flags from defs.h to value.h.
	* main.c (command_line_input): Call wrap_here as well as gdb_flush.

Thu Apr 21 09:29:37 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dbxread.c (read_dbx_dynamic_symtab):  Reinstall support for sun3,
	BFD handles sun3 dynamic relocations now.
	* elfread.c (elf_symtab_read, elf_symfile_read):  Handle dynamic
	symbol table.

Wed Apr 20 19:41:21 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (print_command_1): Annotate the top-level expressions
	that we print.
	(print_frame_args): Annotate each argument.
	* printcmd.c, defs.h (print_value_flags): New function.
	* cp-valprint.c (cp_print_value_fields): Annotate each field.
	* valprint.c (val_print_array_elements): Annotate each array element.

Wed Apr 20 13:18:41 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* findvar.c (read_var_value):  Handle LOC_REPARM_ADDR case correctly,
	the register contains a pointer to the type, not the type itself.

Mon Apr 11 10:44:35 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* main.c (main): Accept --annotate=N option and make --fullname
	the same as --annotate=1.
	(command_line_input): Print annotatation before and after prompt.
	* blockframe.c (flush_cached_frames): Print annotation.
	* Rename frame_file_full_name to annotation_level and move it from
	symtab.h to defs.h.
	* source.c (identify_source_line): If annotation_level > 1,
	change output format.
	* breakpoint.c: Print annotation whenever a breakpoint changes.
	* main.c: New variable server_command.
	(command_line_input): Parse "server " and set server_command.
	(dont_repeat): Check server_command.

Wed Apr 20 08:37:16 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (xcoff_next_symbol_text): Don't return before
	updating raw_symbol and symnum.  Return a value in the case where
	we complained.

	* dstread.c, coffread.c: Don't define pending_blocks; buildsym.c
	takes care of it.
	* parse.c: Don't define block_found; it is defined in symtab.c.
	* parser-defs.h: Add comment regarding block_found.

Tue Apr 19 09:46:05 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* hppa-tdep.c (internalize_unwind_info): Delete unused indexp
	argument.

Mon Apr 18 13:18:56 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dbxread.c (read_dbx_dynamic_symtab):  Relocate BFD symbols by
	section vma. Do not read dynamic relocs for sun3 executables to
	avoid BFD assertion message.

Mon Apr 18 10:08:07 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* nm-hppab.h (KERNEL_U_ADDR): Define.
	(FIVE_ARG_PTRACE): Likewise.
	(CANNOT_STORE_REGISTER): Likewise.
	* nm-hppah.h (KERNEL_U_ADDR): Define.
	(FIVE_ARG_PTRACE): Likewise.
	(CANNOT_STORE_REGISTER): Likewise.
	(NEED_TEXT_START_END): Likewise.

	* tm-hppah.h (NEED_TEXT_START_END): Delete definition.
	* xm-hppah.h (KERNEL_U_ADDR): Delete definition.
	(FIVE_ARG_PTRACE): Likewise.
	* xm-hppab.h (KERNEL_U_ADDR): Delete definition.
	(FIVE_ARG_PTRACE): Likewise.

	* hppa-tdep.c (read_unwind_info): Make static.
	(restore_pc_queue): Indirect through the target vector to
	reload the register state.

Sat Apr 16 22:20:51 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* paread.c (compare_unwind_entries): Delete function.  It's been
	moved into hppa-tdep.c.
	(read_unwind_info): Likewise.
	(pa_symfile_read): No longer call read_unwind_info.  The unwind
	tables will be read in as they are needed.

	* hppa-tdep.c (compare_unwind_entries): New function.
	(read_unwind_info, internalize_unwinds): Likewise.
	(find_unwind_entry): Read in unwind information on demand.

Fri Apr 15 11:53:46 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* source.c (DIRNAME_SEPARATOR): New macro, replaces all references
	to : in search path processing.
	* defs.h (qsort): Rename argument in prototype.
	* symtab.h (SAYMBOL_VALUE): Rename value field, avoids bugs in
	some compilers.
	* breakpoint.c, exec.c, mdebugread.c, mipsread.c, xcoffexec.c
	(false): Eliminate usages.

Fri Apr 15 11:35:19 1994  Steve Chamberlain  (sac@cygnus.com)

	* h8500-tdep.c (initialize_h8500_tdep, large_command):
	All references to value changed to value_ptrlage_command is now
	called big_command.
	All references to value changed to value_ptr.
	* remote-e7000.c (e7000_wait): Use target_waitstatus and SETSTOP
	* remote-hms.c (hms_wait): Timeout after five seconds.
	* ser-go32.c (dosasync_read): Poll if timeout < 0.
	* config/tm/tm-h8500.h (BEFORE_MAIN_LOOP_HOOK): Deleted.
	* config/sh/tm-sh.h (BREAKPOINT): Is now sleep opcode.

Thu Apr 14 07:01:56 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* procfs.c (procfs_wait): Protect watchpoint code with appropriate
	#ifdefs.
	(procfs_set_watchpoint, procfs_stopped_by_watchpoint): Likewise.

Wed Apr 13 14:52:46 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* breakpoint.h (enum bptype): Add bp_hardware_watchpoint and
	bp_watchpoint_scope breakpoints.
	(struct breakpoint): Add val_chain and related_breakpoint fields
	for use by watchpoints.

	* breakpoint.c (within_scope): Delete.  No longer used.
	(TARGET_CAN_USE_HARDWARE_WATCHPOINT): Provide default definition.
	(target_{remove,insert}_watchpoint): Likewise.
	(can_use_hardware_watchpoint): New function.
	(remove_breakpoint): New function to remove a single breakpoint
	or hardware watchpoint.
	(insert_breakpoints): Handle insertion of hardware watchpoints.
	Store a copy of the value chain derived from the watchpoint
	expression.
	(remove_breakpoints): Simplify by using remove_breakpoint.
	(delete_breakpoint): Likewise.
	(watchpoint_check): Delete the watchpoint and watchpoint scope
	breakpoints when the watchpoint goes out of scope.  Save & restore
	the current frame after checking watchpoints.
	(breakpoint_init_inferior): Likewise (restarting the program
	makes all local watchpoints go out of scope).
	(bpstat_stop_status): Handle hardware watchpoints much like normal
	watchpoints. Delete the watchpoint and watchpoint scope breakpoint
	when the watchpoint goes out of scope.  Remove and reinsert all
	breakpoints before returning if we stopped when a hardware watchpoint
	fired.
	(watch_command): Use a hardware watchpoint when possible.  If
	watching a local expression, build a scope breakpoint too.
	(map_breakpoint_numbers): Also call given function for any
	related breakpoints.
	(disable_breakpoint): Never disable a scope breakpoint.
	(enable_breakpoint): Handle hardware breakpoints much like normal
	breakpoints, but recompute the watchpoint_scope breakpoint's
	frame and address  (if we have an associated scope breakpoint).
	(read_memory_nobpt): Handle hardware watchpoints like normal 
	watchpoints.  When necessary handle watchpoint_scope breakpoints.
	(print_it_normal, bpstat_what, breakpoint_1, mention): Likewise.
	(clear_command, breakpoint_re_set_one, enable_command): Likewise.
	(disable_command): Likewise.

	* blockframe.c (find_frame_addr_in_frame_chain): New function.
	Extern prototype added to frame.h

	* infrun.c (wait_for_inferior): Set current_frame and select
	a frame before checking if we stopped due to a hardare watchpoint
	firing.  Handle stepping over hardware watchpoints.
	(normal_stop): Remove unnecessary call to select_frame.

	* value.h (value_release_to_mark): Declare.
	* values.c (value_release_to_mark): New function.

	* procfs.c (procfs_wait): Add cases for hardware watchpoints.
	(procfs_set_watchpoint, procfs_stopped_by_watchpoint): New functions.

	* hppab-nat.c (hppa_set_watchpoint): New function.

	* config/pa/nm-hppab.h (STOPPED_BY_WATCHPOINT): Define.
	(HAVE_STEPPABLE_WATCHPOINT): Define.
	(TARGET_CAN_USE_HARDWARE_WATCHPOINT): Define.
	(target_{insert,delete}_watchpoint): Define.

	* config/mips/nm-irix4.h (TARGET_CAN_USE_HARDWARE_WATCHPOINT): Define.
	(STOPPED_BY_WATCHPOINT, HAVE_NONSTEPPABLE_WATCHPOINT): Likewise.
	(target_{insert,remove}_watchpoint): Likewise.

Mon Apr 11 19:21:27 1994  Stu Grossman  (grossman at cygnus.com)

	* xcoffread.c (read_xcoff_symtab):  Ignore symbols of class C_EXT,
	smtyp XTY_LD, sclass XMC_DS (external data segment label).  They
	often have the same names as debug symbols for functions, and
	confuse lookup_symbol().

Mon Apr 11 10:44:35 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote.c: Around redefinition of PBUFSIZE, adjust whitespace.
	* config/pa/tm-hppa.h (REGISTER_BYTES): Use 4 rather than
	REGISTER_RAW_SIZE (1).
	Together these changes work around a bug in HP's compiler.  Both
	seem to be necessary.

Mon Apr 11 09:18:24 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* paread.c (pa_symtab_read): Handle ST_STUB symbols and symbols
	with scope SS_EXTERNAL.  ST_ENTRY symbols in dynamic executables
	are type mst_solib_trampoline.

Fri Apr  8 17:14:37 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* config/m68k/es1800.mt: Change comments.

Fri Apr  8 17:14:37 1994  Rob Savoye  (rob@darkstar.cygnus.com)

	* config/m68k/monitor.mt (TDEPFILES): Don't include remote-es.o.

Fri Apr  8 15:35:30 1994  Stu Grossman  (grossman at cygnus.com)

	* lynx-nat.c:  Restore regmap structure for SPARC.  It's needed
	for core files.

Fri Apr  8 14:53:35 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* values.c (unpack_long): Remove obsolete comment about using a
	switch statement.

	* symfile.c (symbol_file_command): Add comments about command syntax.

Thu Apr  7 17:25:21 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)
			  Jim Kingdon  (kingdon@cygnus.com)

	* infrun.c (IN_SOLIB_TRAMPOLINE):  Correct comment, trampolines
	are in the .plt section.
	* minsyms.c (lookup_solib_trampoline_symbol_by_pc,
	find_solib_trampoline_target):  New functions for handling
	stepping into -g compiled shared libraries.
	* symtab.h (lookup_solib_trampoline_symbol_by_pc,
	find_solib_trampoline_target):  Add prototypes.
	* config/tm-sunos.h (IN_SOLIB_TRAMPOLINE, SKIP_TRAMPOLINE_CODE):
	Define to handle stepping into  -g compiled shared libraries.
	* config/tm-sysv4.h (SKIP_TRAMPOLINE_CODE):  Define to handle
	stepping into  -g compiled shared libraries.

Thu Apr  7 17:22:54 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* configure.in:  Add mips-*-sysv4* support.
	* config/mips/mipsv4.mh, config/mips/mipsv4.mt,
	config/mips/tm-mipsv4.h, config/mips/xm-mipsv4.h, mipsv4-nat.c:
	New files for MIPS SVR4 support.
	* Makefile.in:  Update for new mipsv4 files.
	* alpha-tdep.c (heuristic_proc_desc, find_proc_desc):  Use
	read_next_frame_reg to obtain the frame relative stack pointer.
	* mips-tdep.c (heuristic_proc_desc):  Use read_next_frame_reg to
	obtain the frame relative stack pointer.
	* mdebugread.c (parse_partial_symbols, psymtab_to_symtab1):
	Handle stStatic and stStaticProc symbols in stabs-in-ecoff output
	by entering them into the minimal symbol table.
	* printcmd.c (print_scalar_formatted):  Do not try to unpack to
	a long for float formats.
	* solib.c:  Include "elf/mips.h" only if DT_MIPS_RLD_MAP does not
	get defined in <link.h>.
	* solib.c (solib_add):  Add shared library sections to the section
	table of the target before adding the symbols.
	* partial-stab.h:  Relocate static and global functions.
	* dbxread.c (read_dbx_symtab):  Remove unused variable
	end_of_text_address.  Relocate text_addr when passing it
	to end_psymtab.

	For Alpha OSF/1 targets, enable gdb to set breakpoints in shared
	library functions before the executable is run. Retrieve dynamic
	symbols from stripped executables.
	* mipsread.c (read_alphacoff_dynamic_symtab):  New function.
	* mipsread.c (mipscoff_symfile_read):  Use it. Issue warning message
	if no debugging symbols were found.
	* alpha-tdep.c (alpha_skip_prologue):  Silently return the unaltered
	pc if memory at the pc is not accessible and GDB_TARGET_HAS_SHARED_LIBS
	is defined.
	* config/alpha/nm-alpha.h (GDB_TARGET_HAS_SHARED_LIBS):  Define,
	OSF/1 has shared libraries.

Thu Apr  7 15:11:11 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* dbxread.c (read_dbx_dynamic_symtab): Adjust for recent changes
	to BFD handling of dynamic symbols.

Tue Apr  5 15:29:25 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* hppa-tdep.c (hppa_fix_call_dummy): If FUN is a procedure label,
	then gets its real address into FUN and its GOT/DP value into %r19.

	* tm-hppa.h (CALL_DUMMY): Use %r20, not %r19 as a temporary.

	* hppa-tdep.c (frameless_function_invocation): If no unwind
	descriptor was found, then assume this was not a frameless
	function invocation.
	(frame_saved_pc): If the saved PC is in a linker stub, then
	return the return address which the linker stub will return to.

        * xm-hppab.h: Never define USG.
        * xm-hppah.h: Always define USG.

Tue Apr  5 12:58:47 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* values.c (unpack_long, value_from_longest),
	valarith.c (value_binop):  Allow TYPE_CODE_RANGE.

Fri Apr  1 14:04:34 1994  Jason Merrill  (jason@deneb.cygnus.com)

	* symfile.c (deduce_language_from_filename): .cpp is a C++ extension.

Fri Apr  1 00:44:00 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	For SVR4 targets, enable gdb to set breakpoints in shared
	library functions before the executable is run.
	* elfread.c (elf_symtab_read):  Handle symbols for shared library
	functions.
	* sparc-tdep.c (in_solib_trampoline):  Renamed to in_plt_section
	and moved to objfiles.c.
	* objfiles.c (in_plt_section):  Moved to here from sparc-tdep.
	* config/tm-sysv4.h (IN_SOLIB_TRAMPOLINE):  Use new in_plt_section.
	* config/sparc/tm-sun4sol2.h (IN_SOLIB_TRAMPOLINE):  Removed,
	the new generic definition from tm-sysv4.h works for Solaris.

Wed Mar 30 16:14:27 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* elfread.c (elf_symtab_read): Change storage_needed,
	number_of_symbols and i to long.  Rename get_symtab_upper_bound to
	bfd_get_symtab_upper_bound.  Check for errors from
	bfd_get_symtab_upper_bound and bfd_canonicalize_symtab.
	* nlmread.c (nlm_symtab_read): Same changes.

Wed Mar 30 11:43:29 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (xcoff_next_symbol_text): New function.
	(read_xcoff_symtab): Set next_symbol_text_func to it.
	Move raw_symbol outside of read_xcoff_symtab.

	* remote.c (getpkt): Remove unused "out" label.

Wed Mar 30 09:15:42 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* breakpoint.c (print_it_normal): Allow GDB to notify the user
	about more than one watchpoint being triggered.

Wed Mar 30 08:24:18 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/tm-dpx2.h: Include tm-m68k.h not nonexistent tm-68k.h.

Wed Mar 30 00:31:49 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* blockframe.c (find_pc_partial_function):  mst_file_text
	symbols do not live in the shared library transfer table.
	* ch-exp.y (decode_integer_value, match_character_literal,
	match_bitstring_literal):  Guard tolower calls with isupper,
	tolower on old BSD systems blindly subtracts a constant.
	* dbxread.c (read_ofile_symtab):  Check for __gnu_compiled_* as
	well when determining the producer of the object file.
	* mdebugread.c (has_opaque_xref):  New function to check for
	cross reference to an opaque aggregate.
	* mdebugread.c (parse_symbol, parse_partial_symbols):  Do not
	enter typedefs to opaque aggregates into the symbol tables.
	* mdebugread.c (parse_external):  Remove skip_procedures argument,
	it has always been 1.  Remove code that handled stProc symbols,
	it was never executed and was wrong, as the index of a
	stProc symbol points to the local symbol table and not to the
	auxiliary symbol info. Update caller.
	* mdebugread.c (parse_partial_symbols):  Do not enter external
	stProc symbols into the partial symbol table, they are already
	entered into the minimal symbol table.
	* config/i386/tm-symmetry.h:  Clean up, it is now only used for Dynix.
	Remove all conditionals and definitions for ptx.
	I386_REGNO_TO_SYMMETRY moved to here from symm-tdep.c.
	Fix addresses of floating point registers in REGISTER_U_ADDR.
	STORE_STRUCT_RETURN now handles cc and gcc conventions.
	FRAME_CHAIN, FRAMELESS_FUNCTION_INVOCATION, FRAME_SAVED_PC,
	IN_SIGTRAMP, SIGCONTEXT_PC_OFFSET defined to make backtracing through
	signal trampoline code work.
	* config/i386/xm-symmetry.h:  Clean up, it is now only used for Dynix.
	Remove all conditionals and definitions for ptx.
	Remove KDB definitions.
	* symm-nat.c (store_inferior_registers):  Fetch registers before
	storing them to obtain valid floating point control registers.
	Store fpu registers.
	* symm-nat.c (print_1167_control_word):  Dynix 3.1.1 defines
	FPA_PCR_CC_C0 and FPA_PCR_CC_C1, avoid duplicate case value.
	* symm-nat.c (fetch_inferior_registers, child_xfer_memory):
	Fix typos.
	* symm-nat.c (child_resume):  Update type of `signal' parameter.
	* symm-tdep.c (I386_REGNO_TO_SYMMETRY):  Moved to tm-symmetry.h.

Tue Mar 29 23:01:33 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* hppa-tdep.c (hppa_fix_call_dummy): Use an alternate method for
	calling import stubs for functions in shared libraries.

Tue Mar 29 21:14:04 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* ch-exp.y:  Implement SIZE(mode_name) and SIZE(expression).

	* ch-lang.c (chill_is_varying_struct):  Magic string is
	was "<var_length>" is now "__var_length" (more portable).

Tue Mar 29 19:41:34 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote.c (getpkt): If we get a timeout, actually retry rather
	than just giving up the first time it happens.
	* remote.c: Document sequence numbers.
	(remote_store_registers): Change syntax of 'P' request so that it
	never looks like a sequence number.

Tue Mar 29 16:06:01 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* os9kread.c (record_minimal_symbol): add section_offset to
	relocate minimal symbol table.
	* os9kread.c (read_minimal_symbols): ditto.
	* os9kread.c (os9k_symfile_init): increase size of dbg and stb
	file names.
	* os9kread.c (read_os9k_psymtab): if there's no dbg file, just
	return. Also if file addr is 0 leave it 0, not to relocate.
	* remote-os9k.c (_initialize_remote_os9k): add 'set remotexon',
	'set remotexoff' and 'set remotelog' commands.

Tue Mar 29 12:38:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote.c (remote_store_registers): Add 'P' request to set an
	individual register.
	(remote_write_bytes, remote_read_bytes): Use %lx, not %x, to print
	a target address.

Sat Mar 26 07:05:18 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/sparc/tm-sparc.h: Define USE_REGISTER_NOT_ARG.
	* stabsread (define_symbol): If USE_REGISTER_NOT_ARG, go back to
	combining all 'p' and 'r' pairs into a LOC_REGPARM.

	* command.c (do_setshow_command, case var_string): Never add a
	space to the end of the string.
	* NEWS: Document this change.
	* .gdbinit: Add a space to the "set prompt" command.

Fri Mar 25 12:40:41 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	*  m3-nat.c, i386m3-nat.c, config/i386/i386m3.mh: Many minor
	changes to make it compile (it doesn't link yet).

	* buildsym.c (start_subfile, patch_subfile_names), demangle.c
	(set_demangling_style, set_demangling_command): Use savestring not
	strdup.  We were not dealing properly with a NULL return from
	strdup, and were not declaring strdup (the system header may or
	may not have it).

	* valprint.c (val_print): Remove inaccurate comment about what
	types can be stub types.

	* config/i386/ptx.mh (XDEPFILES): Add coredep.o.  Delete infptrace.o.
	* symm-nat.c (child_wait, _initialize_symm_nat, kill_inferior):
	Supply alternate version if ATTACH_DETACH is not defined.
	* ptx4-nat.c, config/i386/{nm-ptx4.h, ptx4.mh, ptx.mt, ptx4.mt,
	tm-ptx.h, tm-ptx4.h, xm-ptx.h, xm-ptx4.h}: New files.
	* configure.in: Recognize i[34]86-sequent-sysv4* host.

Fri Mar 25 10:14:03 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* hppa-tdep.c (skip_prologue): Do nothing if not at the beginning
	of a function.
	(skip_trampoline_code): Rewrite and add support for argument
	relocation stubs stubs, import/export stubs, calls through
	"_sr4export" and cascaded trampolines.

	* hppa-tdep.c (skip_prologue): Return "pc" not zero
	if no unwind descriptor is found.

	* tm-hppa.h (NUM_REGS): Bump to 128 registers.
	(REGISTER_NAMES): Add entries for "right-half" of FP registers.
	(REGISTER_RAW_SIZE, MAX_REGISTER_RAW_SIZE): Do not treat FP regs
	differently.  All registers are four bytes.
	(REGISTER_BYTES, REGISTER_BYTE): Simplify now that all registers are
	the same size.
	(REGISTER_VIRTUAL_TYPE): Use builtin_type_float for all FP regs.

	* hppa-tdep.c (pa_print_fp_reg): Update to print even numbered FP
	registers as both single and double values (fetching 2nd 32bit half
	as necessary).  Annotate each register printed with its precision.

	* paread.c (read_unwind_info): Fix off-by-one error.

Fri Mar 25 08:33:28 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* main.c (complete_command): Deal with it if arg is NULL.

Thu Mar 24 07:12:09 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/mips/tm-mips.h (SETUP_ARBITRARY_FRAME): Revise comment
	regarding using the PC--using the PC is necessary and all the
	FIXME comments in the world won't make it go away.

	* valops.c (value_at, value_at_lazy): Give error if we dereference
	a pointer to void.
	* gdbtypes.h: Fix comments regarding TYPE_CODE_VOID.
	* stabsread.c: Use 1, not 0, for TYPE_LENGTH of void types.

	* stabsread.c (patch_block_stabs): Add comment about what happens
	if the definition is in another compilation unit from the stab.

	* dbxread.c (end_psymtab): Add comment about empty psymtabs.

Wed Mar 23 07:50:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* main.c (complete_command): New command, from Rick Sladkey
	<jrs@world.std.com>.
	(symbol_completion_function): Don't declare rl_point and
	rl_line_buffer; they are now declared in readline.h.
	(show_commands): Don't declare history_base; it is declared in
	history.h.
	* command.c (lookup_cmd): Don't delete trailing whitespace.
	Reverts change of 14 May 1989.

Wed Mar 23 16:14:52 1994  Stu Grossman  (grossman at cygnus.com)

	* minsyms.c (prim_record_minimal_symbol):  Move section deduction
	code from prim_record_minimal_symbol_and_info() to here.  Callers
	of the latter can legitimately supply a section number of -1.

Wed Mar 23 07:50:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* gdbtypes.h, gdbtypes.c: Add comments regarding whether static
	member functions have an element in args for a (nonexistent) this
	pointer.

Tue Mar 22 20:12:53 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* config/pa/tm-hppao.h (NO_PC_SPACE_QUEUE_RESTORE): Define.

	* hppa-tdep.c (hppa_pop_frame): Do not restore the PC space
	queue if NO_PC_SPACE_QUEUE_RESTORE is defined.

	* stabsread.c (REG_STRUCT_HAS_ADDR): Accept additional argument
	for the structure's type.  All callers changed.

	* valops.c (call_function_by_hand): Check REG_STRUCT_HAS_ADDR
	for each structure argument rather than assuming it's either
	true or false for all structure arguments.

	* config/pa/tm-hppa.h (REG_STRUCT_HAS_ADDR): Depend only
	on the length structure passed, not the compiler used.

	* config/sparc/tm-sparc.h (REG_STRUCT_HAS_ADDR): Accept additional
	argument for the structure's type.

Tue Mar 22 15:28:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* values.c (set_internalvar): Don't set var->value until we are
	sure there won't be an error().

	* remote.c (get_offsets): Reinstate comment which was in
	remote_wait about use of SECT_OFF_TEXT and so on.

Mon Mar 21 13:11:30 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* symmisc.c (maintenance_check_symtabs):  New function to check
	consistency of psymtabs and symtabs.
	* symtab.h (maintenance_check_symtabs):  Add prototype.
	* maint.c:  Add new `maint check-symtabs' command.
	* config/i386/tm-i386aix.h, config/i386/tm-sun386.h,
	config/i386/tm-symmetry.h (REGISTER_CONVERT_TO_RAW):  Fix typo.
	* config/i386/tm-symmetry.h:  Make comment inside #if 0 a real
	comment.
	* config/i386/tm-symmetry.h (STORE_STRUCT_RETURN):  Cast argument
	to write_memory to avoid warnings from gcc.
	* config/i386/xm-symmetry.h:  Add missing #endif.
	* config/i386/nm-symmetry.h (NO_PTRACE_H):  Add for Dynix.
	* config/i386/symmetry.mt (TDEPFILES):  Add i386-tdep.o.
	* config/i386/symmetry.mh (NAT_FILE, NATDEPFILES):  Add.

Mon Mar 21 11:50:28 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* hppa-tdep.c (hppa_fix_call_dummy): Use value_ptr.
	(hppa_push_arguments): Likewise.

Mon Mar 21 11:02:51 1994  Stu Grossman  (grossman at cygnus.com)

	* alpha-tdep.c:  Gobs of changes (many imported from mips-tdep) to
	improve remote debugging efficiency.  Also fixed problems with
	doing function calls for programs with no entry points.
	* infcmd.c (run_stack_dummy):  Use CALL_DUMMY_ADDRESS instead of
	entry_point_address.
	* inferior.h (PC_IN_CALL_DUMMY):  ditto.
	* mdebugread.c (parse_symbol, parse_procedure, parse_external,
	parse_lines):  Pass section_offsets info to these routines so that
	we can relocate symbol table entries upon readin.
	* (psymtab_to_symtab_1):  Set symtab->primary to tell
	objfile_relocate to do relocations for our symbols.
	* (ecoff_relocate_efi):  New routine to relocate adr field of PDRs
	(which hang off of the symbol table).
	* Use prim_record_minimal_symbols_and_info instead of
	prim_record_minimal_symbols to supply section info to make minimal
	symbol relocations work.
	* minsyms.c (prim_record_minimal_symbols_and_info):  If section is
	-1, try to deduce it from ms_type.
	* objfiles.c (objfile_relocate):  Use ALL_OBJFILE_SYMTABS where
	appropriate.  Handle relocation of MIPS_EFI symbols special. Also,
	add code to relocate objfile->sections data structure.
	* remote.c (get_offsets):  Use new protocol message to acquire
	section offsets from the target.
	* (remote_wait):  Get rid of relocation stuff.  That's all handled
	by objfile_relocate now.
	* config/alpha/alpha-nw.mt (TM_FILE):  Use tm-alphanw.h.
	* config/alpha/tm-alpha.h:  Define CALL_DUMMY_ADDRESS, and
	VM_MIN_ADDRESS.
	* config/alpha/tm-alphanw.h:  DECR_PC_AFTER_BREAK=0, VM_MIN_ADDRESS=0.

Sun Mar 20 15:21:57 1994  Doug Evans  (dje@cygnus.com)

	* sparc-tdep.c (sparc_frame_find_save_regs): Use REGISTER_RAW_SIZE
	instead of 4.

start-sanitize-v9
	* sp64-tdep.c (target_ptr_bit, set_target_ptr_bit): Deleted,
	can no longer set this at run time.
	* config/sparc/sp64.mt (SIMFILES): Use remote-sim.o now.
	(TM_CLIBS): Define to -lm, the simulator uses the sqrt() function.
	* config/sparc/tm-sp64.h (FPS_REGNUM, CPS_REGNUM): Define (so
	sparc-tdep.c compiles).
	(TARGET_PTR_BIT): Must be a constant now, fix at 64.
end-sanitize-v9

Sat Mar 19 08:51:12 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/{cisco.mt,tm-cisco.h}: New files.
	* Makefile.in (ALLPARAM, ALLCONFIG): Add them.
	* configure.in: Recognize m68*-cisco*-*.

	* Makefile.in (TAGS): Use variables directly, rather than using
	find, to locate TM_FILE, XM_FILE, and NAT_FILE.  This is faster
	and means that these filenames no longer need be unique across all
	the config/* directories.
	* configure.in: Put the config/*/ into TM_FILE, etc.

	* m68k-stub.c (computeSignal): Return SIGFPE, not SIGURG, for chk
	and trapv exceptions.

	* target.h (struct section_table), objfiles.h (struct obj_section):
	Change name of field sec_ptr to the_bfd_section.  More mnemonic
	and avoids the (sort of, for the ptx compiler) name clash with
	the name of the typedef.
	* exec.c, xcoffexec.c, sparc-tdep.c, rs6000-nat.c, osfsolib.c,
	solib.c, irix5-nat.c, objfiles.c, remote.c: Change users.

	* utils.c: Include readline.h.
	* Makefile.in (utils.o): Add dependency.

	* remote.c (getpkt): Add support for run-length encoding.

Fri Mar 18 19:11:15 1994  Steve Chamberlain  (sac@jonny.cygnus.com)

	* utils.c (prompt_for_continue): Call readline, not gdb_readline.

Fri Mar 18 10:25:55 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dstread.c (record_minimal_symbol): New arg objfile.  Pass it to
	prim_record_minimal_symbol.
	Callers: Pass it.

	* regex.c (EXTEND_BUFFER): Adjust pointers within buffer by
	computing their offset from the start of the old buffer and adding
	to the new buffer, rather than by assuming we can add the
	difference between the old buffer and the new buffer (it might not
	fit in an int).  Merge in cosmetic differences from emacs regex.c
	version of this macro.

Wed Mar 16 15:28:54 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* Makefile.in (install-only): Fix use of program_transform_name.

Wed Mar 16 07:18:43 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c: Remove "set print fast-symbolic-addr off" command.
	The bug which it worked around was fixed on 25 Feb 94 in coffread.c,
	so I'm nuking the command.
	* symtab.c (find_addr_symbol): Comment out, no longer used.

	* main.c (main): Don't init_source_path for the -cd argument.  Now
	that source_path doesn't contain the current_directory from when
	GDB started up, init_source_path is no longer useful (and is
	harmful because it clobbers a source_path set in $HOME/.gdbinit).

	* TODO: Remove item about line numbers being off.  It is useless
	and confusing without a reproducible test case (it mentions
	proceed(), but I was able to step through proceed without trouble).

Tue Mar 15 13:39:23 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	For Sunos 4.x targets, enable gdb to set breakpoints in shared
	library functions before the executable is run. Retrieve dynamic
	symbols from stripped executables.
	* symtab.h (minimal_symbol_type):  Add mst_solib_trampoline type.
	* parse.c (write_exp_msymbol), symmisc.c (dump_msymbols),
	symtab.c (list_symbols):  Handle mst_solib_trampoline.
	* minsyms.c (lookup_minimal_symbol):  Handle mst_solib_trampoline
	for all targets, remove IBM6000_TARGET dependencies.
	* dbxread.c (read_dbx_dynamic_symtab):  New function.
	* dbxread.c (dbx_symfile_read):  Use it.
	* dbxread.c (SET_NAMESTRING):  Set namestring to
	"<bad string table index>" instead of "foo" if the string index is
	corrupt.
	* xcoffread.c (read_xcoff_symtab):  Use mst_solib_trampoline instead
	of mst_unknown.
	* symtab.c (list_symbols):  Take from_tty as parameter and pass it
	to break_command. Handle mst_file_* minimal symbol types.
	* config/i386/tm-i386bsd.h: Give just macro name, not args, to #undef.

Tue Mar 15 11:40:43 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* c-exp.y(yylex): fix potential memory overflow.

Tue Mar 15 10:33:28 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* environ.c (set_in_environ): Eliminate special handling of PATH and
	GNUTARGET.
	* putenv.c: Removed, conflicts with system declaration of
	putenv on RS/6000 running AIX 3.2.5, and above change makes it
	unnecessary. 
	* Makefile.in: Change accordingly.
	* procfs.c (procfs_create_inferior): Change comment accordingly.

Tue Mar 15 10:05:27 1994  Jim Kingdon  (kingdon@cygnus.com)

	* rs6000-tdep.c: Change value to value_ptr.

Sun Mar 13 09:45:51 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i386m3-nat.c: Include floatformat.h.
	(get_i387_state): Use memset not bzero.

	* Version 4.12.3.

	* Makefile.in: Enable commented out getopt_h, bfd_h, etc.  Change
	ieee-float.h to floatformat.h.

	* valprint.c (val_print_string): Ignore error if the error
	happened after a terminating '\0'.

	* c-valprint.c (c_val_print): Never add 1 to return value from
	val_print_string; just return what it returns.

	* target.h (enum target_signal): Add TARGET_SIGNAL_FIRST, for
	looping through all of the enums.
	* infrun.c (signals_info): Use it.

Fri Mar 11 08:08:50 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* main.c (main): When printing warning about bad baud rate, don't
	use warning(); it relies on current_target which isn't set up yet.

	* breakpoint.c (_initialize_breakpoint): Update docstring for
	tbreak to match what the code actually does.  Don't mention tbreak
	in docstrings for "enable once" or "enable breakpoints once".

Thu Mar 10 08:52:38 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* symfile.h (ADD_PSYMBOL_VT_TO_LIST): Don't put a semicolon after
	while (0).  That defeats the whole purpose of using do . . . while (0).
	* mdebugread.c (parse_partial_symbols): Don't use ?: expression as
	list for ADD_PSYMBOL_TO_LIST; the macro takes its address and
	using a ?: expression as an lvalue is not portable.

	* stabsread.c (define_symbol): If REG_STRUCT_HAS_ADDR, also
	convert a LOC_ARG to a LOC_REF_ARG.  Update code which combines
	'p' and 'r' symbol descriptors into a single symbol to look for a
	LOC_REF_ARG.
	* README, config/sparc/tm-sparc.h: Update comments.

Wed Mar  9 21:43:24 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_type):  Do not complain for types with
	an `indexNil' aux index, these are simply undefined types.
	Remove indexNil check from caller of parse_type.
	* mdebugread.c (parse_partial_symbols):  Do not enter
	stGlobal, scCommon symbols into the minimal symbol table, their
	value is the size of the common, not its address.
	Handle scInit, scFini, scPData and scXData sections.
	Use minimal symbol type mst_file_* for stLabel symbols, instead of
	mst_*.
	Enter stProc symbols into the global_psymbols list once, not into
	the static_psymbols_list.
	Get rid of dummy psymtab if it is empty, to allow proper detection
	of stripped executables.
	* mdebugread.c (cross_ref):  Allow cross references to Fortran
	common blocks.

Wed Mar  9 15:23:19 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (common_block_end, fix_common_block): Stash the
	struct pending * in the SYMBOL_TYPE, not the SYMBOL_NAMESPACE, so
	as to not assume that a pointer fits in an enum.

Wed Mar  9 18:56:36 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* os9kread.c (fill_sym): check compiler verion number for pre-
	UltraC compiler.
	* os9kread.c (os9k_process_one_symbol): address of symbol is
	relative to section not module.
	* stabsread.c (define_symbol): add symbol type 's' as local
	symbol for os9k.
	* remote-os9k.c: add command 'set monitor_log' to turn on or off
	monitor logging.
	* remote-os9k.c: fix bug in delete breakpoint, single step trace.
	* remote-os9k.c: fix bug in 'set remotebaud' function.
	* remote-os9k.c (rombug_link): minimize checking so to improve
	speed.
	* symfile.c (symbol_file_command): check if failed to link, also make
	the command be able to accept more than one filenames.
	* target.c (target_link): check if failed to link with rombug.
	* config/i386/tm-i386os9k.h : add #define DECR_PC_AFTER_BREAK 0.

Wed Mar  9 15:23:19 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-es.c (es1800_child_ops): Don't declare it static.

Tue Mar  8 11:42:39 1994  Jim Kingdon  (kingdon@cygnus.com)

	* config/i386/tm-i386v4.h: Give just macro name, not args, to #undef.

Tue Mar  8 06:56:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dbxread.c: New variable lowest_text_address.
	(record_minimal_symbol, read_dbx_symtab): Set it.
	(read_dbx_symtab): Use lowest_text_address + text_size instead of
	end_of_text_address.
	* config/gould/tm-pn.h: Add comment regarding END_OF_TEXT_DEFAULT.

	* dbxread.c (end_psymtab): Remove old and commented out
	capping_global and capping_static.  Fix comments regarding
	N_SO_ADDRESS_MAYBE_MISSING to match the real name of the macro.

	* parser-defs.h: Add "extern" to start of variable declarations so
	we don't end up with commons.
	* parse.c: Define these variables.

	* irix5-nat.c (find_solib): Cast o_path to CORE_ADDR when using it
	as one.

Mon Mar  7 13:00:50 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* alpha-tdep.c: Change value to value_ptr.

Sun Mar  6 17:36:53 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* solib.c (elf_locate_base):  New function to locate the address
	of the dynamic linker's runtime structure in the dynamic info section.
	* solib.c (locate_base):  Use it instead of iterating over the list
	of mapped address segments.
	* solib.c (look_for_base, bfd_lookup_symbol):  Removed, no longer
	necessary.

Fri Mar  4 09:50:47 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* hppa-tdep.c (pc_in_linker_stub): Move decl to beginning of file.
	(pc_in_interrupt_handler): New function.  Also add PARAM decl.
	(find_proc_framesize): Deal with HPUX setting SAVE_SP bit for
	signal trampoline and interrupt routines.
	(frame_saved_pc): Handle signal trampolines and interrupt routines.
	(frame_chain, frame_chain_valid): Likewise.
	(hppa_frame_find_saved_regs): Likewise.  Also deal with special
	saved regs convention for SP.
	
	* tm-hppa[bho].h: FRAME_FIND_SAVED_PC_IN_SIGTRAMP): Define.
	(FRAME_BASE_BEFORE_SIGTRAMP): Define.
	(FRAME_FIND_SAVED_REGS_IN_SIGTRAMP): Define.

	* tm-hppah.h (IN_SIGTRAMP): Define.

Thu Mar  3 12:41:16 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* ch-exp.y (match_simple_name_string): Accept '_' as well as an
	alphabetic character as the start of a name.

	* sparclite/Makefile.in (all install): Build and install aload.

	* configure.in: Accept i[34]86-*-*sysv32 because that is what
	config.guess and config.sub produce.

	* mips-tdep.c: Change value to value_ptr.

Wed Mar  2 09:17:55 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* breakpoint.c, breakpoint.h, c-valprint.c, ch-valprint.c,
	cp-valprint.c, eval.c, expprint.c, findvar.c, language.c,
	objfiles.h, infcmd.c, printcmd.c, stack.c, typeprint.c,
	valarith.c, valops.c, valprint.c, value.h, values.c: Replace
	value with value_ptr.  This is for the ptx compiler.
	* objfiles.h, target.h: Don't declare a "sec_ptr" field using a
	"sec_ptr" typedef.
	* symm-nat.c: Add a bunch of stuff for symmetry's ptrace stuff.
	#if 0 i386_float_info.
	* symm-tdep.c (round): Remove.  Also remove sgttyb.
	* symm-tdep.c: Remove lots of stuff which duplicates stuff from
	i386-tdep.c.  Remove register_addr and ptx_coff_regno_to_gdb.
	* i386-tdep.c (i386_frame_find_saved_regs): Put in
	I386_REGNO_TO_SYMMETRY check in case it is needed for Dynix
	someday.
	* config/i386/nm-symmetry.h: Change KERNEL_U_ADDR.  Move
	stuff from PTRACE_READ_REGS, PTRACE_WRITE_REGS macros to
	symm-nat.c.  Define CHILD_WAIT and declare child_wait().
	* config/i386/tm-symmetry.h: Remove call function stuff; stuff in
	tm-i386v.h is apparently OK.
	* config/i386/xm-symmetry.h [_SEQUENT_]: Define HAVE_TERMIOS not
	HAVE_TERMIO.  Define MEM_FNS_DECLARED, NEED_POSIX_SETPGID, and
	USE_O_NOCTTY.

Wed Mar  2 11:31:08 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* osfsolib.c (xfer_link_map_member): Update to use new
	target_read_string interface.

Wed Mar  2 09:17:55 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* infrun.c (wait_for_inferior): In checking
	remove_breakpoints_on_following_step, check
	through_sigtramp_breakpoint as well as step_resume_breakpoint.

Tue Mar  1 16:22:56 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* os9kread.c (os9k_process_one_symbol): Rename
	VARIABLES_INSIDE_BLOCK to OS9K_VARIABLES_INSIDE_BLOCK.
	* symfile.c (symbol_file_command): Check for (CORE_ADDR)-1, not
	(CORE_ADDR)0, from target_link, since that is what it uses.
	Process name at end, not during parsing (like we did before Kung's
	change), so that -readnow and -mapped can appear anywhere.
	Make text_relocation a local variable.
	* config/i386/i386os9k.mt: Fix comment.
	* Makefile.in (ALLDEPFILES): Add remote-os9k.c.
	* os9kread.c: Put "comments" after #endif inside /* */.
	* stabsread.h: Add os9k_stabs variable.
	* stabsread.c (start_stabs), os9kread.c (os9k_process_one_symbol):
	Set it.
	* stabsread.c (define_symbol): If os9k_stabs, put a 'V' symbol
	descriptor in global_symbols not local_symbols.
	(read_type): If os9k_stabs, accept 'c', 'i', and 'b' type
	descriptors.
	(read_type): If os9k_stabs, accept function parameters after 'f'
	type descriptor.
	(read_array_type): If os9k_stabs, don't expect index type and
	expect lower and upper to be separated by ',' not ';'.
	(read_enum_type): If os9k_stabs, read a number before the first
	enumeration constant.
	(os9k_init_type_vector): New function.
	(dbx_lookup_type): Call it when starting new type vector.
	* config/i386/tm-i386os9k.h: Define BELIEVE_PCC_PROMOTION.
	* (os9k_process_one_symbol): Call define_symbol not os9k_define_symbol.
	* os9kstab.c: Removed.
	* Makefile.in: Update accordingly.
	* objfiles.c (objfile_relocate_data): Removed.
	* remote-os9k.c (rombug_wait): Call objfile_relocate
	not objfile_relocate_data.
	* objfiles.h, objfiles.c: Remove find_pc_objfile.
	* remote-os9k.c (rombug_wait): Call find_pc_section not
	find_pc_objfile.
	* main.c (quit_command): Check inferior_pid; revert Kung change.
	* remote-os9k.c (rombug_create_inferior): Set inferior_pid.

Tue Mar  1 14:56:14 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* os9kread.c: New file to read os9000 style symbo table.
	* os9kstab.c: new file to read os9000 style stabs.
	* remote-os9k.c: remote protocol talking to os9000 rombug monitor.
	* objfiles.c (find_pc_objfile): new function to search objfile
	from pc.
	* objfiles.c (objfile_relocate_data): new function to relocate
	data symbols in symbol table.
	* objfiles.h: Add two aux fields in struct objfile to handle
	multiple symbol table files situation like in os9000.
	* symfile.c: Change so 'symbol-file' command can handle multiple
	files. Also call target_link() to get relocation infos.
	* target.c (target_link): new function to get relocation info when
	a symbol file is requested to load.
	* main.c (quit_command): take out 'inferior_pid != 0' condition,
	because in cross mode there's no inferior pid, bit they need to
	be detached.
	Makefile.in: add os9kread.c os9kstab.c and .o's.
	configure.in: add i386os9k target.
	config/i386/i386os9k.mt: new add.
	config/i386/tm-i386os9k.h: new add.

Tue Mar  1 13:16:10 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/sparc/tm-sun4sol2.h (IN_SIGTRAMP):  Handle ucbsigvechandler.
	* sparc-tdep.c (sparc_frame_saved_pc):  Handle ucbsigvechandler.

Tue Mar  1 11:54:11 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* target.c, target.h (target_read_string): Provide error detection to
	caller.  Put string in malloc'd space, so caller need not impose
	arbitrary limits.
	* solib.c (find_solib): Update to use new interface.
	* irix5-nat.c (find_solib): Read o_path from inferior
	(clear_solib): Free storage for o_path.
	* valprint.c (val_print_string): Add comments.

Mon Feb 28 23:54:39 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* symtab.c (decode_line_1):  Handle the case when skip_quoted does not
	advance `p'.

Mon Feb 28 12:40:46 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* value.h (struct value): Add modifiable field.
	* values.c (allocate_value, record_latest_value, value_copy): Set it.
	(record_latest_value): Don't mess with VALUE_LVAL of value.
	* valops.c (value_assign): Check it.  Reword existing error
	message on not_lval.

	* mips-tdep.c (mips_step_skips_delay), config/mips/tm-mips.h
	(STEP_SKIPS_DELAY): Added.
	* infrun.c (proceed) [STEP_SKIPS_DELAY]: Check for a breakpoint in
	the delay slot.

	* valprint.c (val_print_string): If errcode is set, always print
	an error, regardless of force_ellipsis.  In the non-EIO case,
	just print the error message rather than calling error().  Don't
	access *(bufptr-1) if bufptr points to the start of the buffer.
	When looking for '\0', don't increment bufptr and addr if bufptr
	started out already at limit.  If an error happens on fetching the
	first character, don't print the string.

Sun Feb 27 21:05:06 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* config/m68k/tm-apollo68b.h: Remove HAVE_68881 define; it is
	obsolete. 

	* i387-tdep.c, i386-tdep.c i386v-nat.c, i386aix-nat.c,
	i386m3-nat.c, config/m68k/tm-m68k.h, i960-tdep.c
	config/i960/tm-i960.h, remote-nindy.c, config/m88k/tm-m88k.h,
	m88k-tdep.c: Use floatformat.h instead of ieee-float.h.
	* sparc-tdep.c: Remove now-obsolete ieee-float.h stuff
	* findvar.c: Update comment regarding ieee-float.h.

Sun Feb 27 21:39:48 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/i386/tm-i386v4.h (I386V4_SIGTRAMP_SAVED_PC, IN_SIGTRAMP,
	FRAME_CHAIN, FRAMELESS_FUNCTION_INVOCATION, FRAME_SAVED_PC):
	Define to make backtracing through the various sigtramp handlers
	work.
	* i386-tdep.c (i386v4_sigtramp_saved_pc):  New routine to fetch
	the saved pc from ucontext on the stack for SVR4 signal handling.

Fri Feb 25 09:41:11 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote.c, remote-mon.c, remote-utils.c, remote-utils.h,
	target.h, remote-es.c, remote-nindy.c: Don't set baud rate if
	baud_rate is -1.  Remove sr_get_baud_rate and sr_set_baud_rate;
	just use the global variable itself.  When printing baud rate,
	don't print a baud rate if baud_rate is -1.

	* coffread.c (read_coff_symtab): Pass mst_file_* to
	record_minimal_symbol for C_STAT symbols.  Put C_EXT and C_STAT
	symbols in the minimal symbols regardless of SDB_TYPE.

Thu Feb 24 08:30:33 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* breakpoint.h (enum bptype): New type bp_through_sigtramp.
	(bpstat_what_main_action): New code BPSTAT_WHAT_THROUGH_SIGTRAMP.
	* breakpoint.c (bpstat_what): Return BPSTAT_WHAT_THROUGH_SIGTRAMP
	if we hit a bp_through_sigtramp breakpoint.  Remove kludge which
	ignored bs->stop for a bp_step_resume breakpoint.
	* infrun.c (wait_for_inferior): Make a through_sigtramp_breakpoint
	which performs one (the check_sigtramp2 one) of the functions
	which had been handled by the step_resume_breakpoint.  For each
	use of the step_resume_breakpoint, make it still use the
	step_resume_breakpoint, use the through_sigtramp_breakpoint, or
	operate on both.
	Deal with BPSTAT_WHAT_THROUGH_SIGTRAMP return from bpstat_what.
	When setting the frame address of the step resume breakpoint, set
	it to the address for frame *before* the call instruction is
	executed, not after.

	* mips-tdep.c (mips_print_register): Print integers using
	print_scalar_formatted rather than duplicating all the
	CC_HAS_LONG_LONG and so on.
	(mips_push_dummy_frame): Use read_register_gen rather than using
	read_register and then putting it back in target format with
	store_unsigned_integer.  If registers are more than 4 bytes, give
	an error rather than have some registers overwrite other
	registers.
	#if 0 unused include of opcode/mips.h.

	* symfile.h: Don't declare arguments for coff_getfilename.

	* defs.h: Revert Kung change regarding FORCE_LONG_LONG.

Thu Feb 24 08:06:52 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* configure.in (hppa*-*-osf*): New configuration.
	* config/pa/hppaosf.mt: New target makefile fragment.
	* config/pa/tm-hppao.h: New target include file.

Thu Feb 24 04:29:19 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* exec.c (print_section_info):  Print entry point for exec_bfd only.
	* ser-unix.c (wait_for):  Fix typo in HAVE_TERMIO case.
	* dwarfread.c:  Remove second inclusion of <sys/types.h>, which
	causes problems if <sys/types.h> has no multiple inclusion protection.

Wed Feb 23 16:28:55 1994  Jeffrey A. Law  (law@cygnus.com)

	* tm-hppa.h (CALL_DUMMY): Add two NOP instructions to the end of
	the call dummy to avoid kernel bugs in HPUX, BSD, and OSF1.
	(CALL_DUMMY_LENGTH): Changed accordingly.

Wed Feb 23 16:21:25 1994  Stu Grossman  (grossman at cygnus.com)

	* sparc-stub.c (trap_low):  Make trap handler work for arbitrary
	numbers of register windows.

	* sparclite/hello.c:  Add factorial function for testing.
	* salib.c:  Use macros instead of constants for I/O addresses to
	make 931 support easier.
	* sparclite.h:  Change constraint for LOC to "rJ" to force use of
	register in sta/lda instructions.

Wed Feb 23 10:39:18 1994  Jim Kingdon  (kingdon@rtl.cygnus.com)

	* dbxread.c (process_one_symbol): Set
	block_address_function_relative for COFF like we do for ELF and SOM.

Sat Feb 19 03:17:32 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (new_psymtab):  Pass in section_offsets and set
	them in the pst.
	* mdebugread.c (handle_psymbol_enumerators):  New function to enter
	the enumerators of an ecoff enum into the partial symbol table.
	* mdebugread.c (parse_partial_symbols):  Call it.
	* symfile.c (reread_symbols):  Initialize objfile->*_psymbols.next.
	* symmisc.c (dump_psymtab):  Fix typo, clean up output of section
	offsets. Cast psymtab->read_symtab to PTR before passing it to
	gdb_print_address.
	* i386-tdep.c (i386_skip_prologue):  Skip over instructions that
	set up the global offset table pointer in pic compiled code.
	* config/mips/tm-mips.h (FIX_CALL_DUMMY):  For big endian targets,
	error() on TYPE_CODE_FLT arguments whose size is greater than 8,
	swap all other TYPE_CODE_FLT arguments as mips_push_arguments
	ensures that floats are promoted to doubles before they are pushed
	on the stack.

Fri Feb 18 23:12:59 1994  Stu Grossman  (grossman at cygnus.com)

	* sparclite/Makefile.in, sparclite/salib.c, sparclite/sparclite.h:
	Fixup cache_on and flush_i_cache so that they work for both the
	930 and 932 processors.  Rewrite most low level funcs (uart
	access & cache stuff) to use new ASI access macros in sparclite.h.
	Also make it easy to access second serial port.

Fri Feb 18 22:17:33 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* hp300ux-nat.c: Don't incloude <sys/dir.h>, <sys/ioctl.h>, or
	<sys/stat.h>; not needed.

Fri Feb 18 08:26:29 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stack.c (print_frame_info): In "pathological" case, don't
	distrust the line number information.

Fri Feb 18 16:51:14 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* mips-tdep.c (mips_print_register): handle 64 bits register.
	* valprint.c (print_longest): fix a bug in printing 64 bits value.

Fri Feb 18 08:26:29 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Version 4.12.2.

	* Makefile.in (install): Do the sed for program_transform_name
	ourselves instead of worrying about INSTALL_XFORM.  This enables
	users to override INSTALL_PROGRAM in the standard way.

	* Makefile.in (c-exp.tab.o, ch-exp.tab.o, m2-exp.tab.o): Don't
	depend on Makefile.in.

	* defs.h, valprint.c: Make longest_to_int a function not a macro.
	Only test against INT_MIN if a LONGEST is bigger than an int.

	* README: Change GhostScript to Ghostscript.

Fri Feb 18 07:30:55 1994  Jim Kingdon  (kingdon@cygnus.com)

	* config/rs6000/{tm-rs6000lynx.h,nm-rs6000lynx.h,xm-rs6000lynx.h}:
	Rename to tm-rs6000ly.h, nm-rs6000ly.h, xm-rs6000ly.h for 14
	character file names.
	* Makefile.in (ALLPARAM): Add these files.

	* config/mips/littlemips64.mt: Rename to mipsel64.mt for 14
	character file names.
	* Makefile.in: Add Kung's new mips64 files.

Thu Feb 17 17:25:47 1994  Kung Hsu  (kung@mexican.cygnus.com)

	* configure.in: add mips64-*-elf, mips64-*-ecoff, mips64el-*-elf,
	mips64el-*-ecoff and mips64-big-*.
	* defs.h: get rid of FORCE_LONG_LONG.
	* mips-tdep.c (mips_find_saved_regs): add sd and sdc1 instruction
	parsing. Change register size to be MIPS_REGSIZE.

Thu Feb 17 09:30:22 1994  David J. Mackenzie  (djm@thepub.cygnus.com)

	* corelow.c, exec.c, irix5-nat.c, mipsread.c, objfiles.c, 
	osfsolib.c, rs6000-nat.c, solib.c, symfile.c, utils.c, 
	xcoffexec.c: Use bfd_get_error and bfd_set_error and new error names.

Fri Feb 11 21:47:24 1994  Steve Chamberlain  (sac@sphagnum.cygnus.com)

	* remote-hms.c (readchar, hms_open, hms_fetch_register): Made more robust.
	(remove_commands, add_commands): Add/remove hms-drain when target
	is connected.

Fri Feb 11 16:11:38 1994  Stu Grossman  (grossman at cygnus.com)

	* configure.in:  Add Lynx/rs6000 support.
	* lynx-nat.c:  Clean up some Sparc stuff.  Clean up ptrace error
	messages.  Add rs6000 support.  Don't try to modify unwritable
	registers.
	* rs6000-nat.c:  Move lots of native dependent stuff (like core
	file support) from rs6000-tdep.c & xcoffexec.c to here.
	* rs6000-tdep.c:  Move native dependent stuff to nat.c.
	* xcoffexec.c:  Move native dependent stuff to nat.c.
	* config/rs6000/nm-rs6000.h:  Move defs of SOLIB_* macros to here
	from tm	file.
	* config/rs6000/tm-rs6000.h:  Remove defs of SOLIB_* funcs, cuz they're
	really native.
	* config/rs6000/tm-rs6000lynx.h, config/rs6000/xm-rs6000lynx.h:
	New files to support Lynx/rs6000.

Tue Feb  8 00:32:28 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* README:  Remove note about gcc warnings on alpha, these should be
	gone now.
	* c-exp.y, ch-exp.y, core.c, corelow.c, eval.c, fork-child.c, 
	m2-exp.y, minsyms.c, nlmread.c, parse.c, putenv.c, regex.c
	remote-utils.c, stabsread.c:  Include <string.h>.
	* regex.c:  Include "defs.h", change re_comp argument to const char *.
	* infptrace.c (fetch_register, store_inferior_registers):  Change
	regaddr to type CORE_ADDR.
	* config/alpha/alpha-nw.mt, config/alpha/alpha-osf1.mt (MT_CFLAGS):
	Remove, no longer necessary now that we use bfd_vma for a CORE_ADDR.

Mon Feb  7 09:21:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* symtab.h: Always define BYTE_BITFIELD to nothing.

Mon Feb  7 08:44:17 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* config/m68k/{m68k-em.mt,tm-m68k-em.h}: Remove; no longer used.
	* configure.in: Remove comment about m68k-em.mt.
	* Makefile.in: Remove references.

Mon Feb  7 08:22:42 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* defs.h [BFD64]: Use BFD_HOST_64_BIT, not nonexistent
	BFD_HOST_64_TYPE.

Sun Feb  6 06:55:15 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* target.c (target_preopen): If target_kill doesn't remove the
	target from the stack, use pop_target to do it.

	* coffread.c (process_coff_symbol, case C_TPDEF): Don't set name
	of TYPE_CODE_PTR or TYPE_CODE_FUNC types.  This parallels similar
	changes to stabsread.c from summer 1993.

	* remote-udi.c (udi_files_info): If prog_name is NULL, just skip
	printing the program, rather than passing NULL to printf.
	(udi_detach): Set udi_session_id to -1 so that udi_close doesn't
	try to call UDIDisconnect again.  Print better message.
	(udi_kill): Just call UDIDisconnect ourselves, rather than doing
	it via udi_close.
	(udi_create_inferior): If udi_session_id is negative, open a new
	TIP rather than giving an error.

	* config/mips/mipsm3.mh, config/i386/i386m3.mh,
	config/ns32k/ns32km3.mh: Define NAT_FILE.
	* config/nm-m3.h: Change guard from _OS_MACH3_H_ and _OS_MACH3_H
	(it was inconsistent and namespace-wrong) to NM_M3_H.
	* m3-nat.c (mach_really_wait): Change parameter name to ourstatus.
	(m3_open): New function.
	(m3_ops): Use it.
	* TODO: Update Mach section.

	* Makefile.in: Remove "rapp" stuff; it is superseded by gdbserver.

Sun Feb  6 13:26:21 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* printcmd.c (printf_command):  Add missing single-letter
	backslash-escape sequences, and improve error message.

Sun Feb  6 06:55:15 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* corelow.c (solib_add_stub, core_open): Pass address of from_tty
	rather than trying to shove an int into a pointer and back out
	again.  This avoids compiler warnings.

	* defs.h (alloca): Declare as void *, not char *, on hpux.
	Don't prototype it, just declare the return type.

Sun Feb  6 03:25:41 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/i386/tm-sun386.h, config/i386/tm-symmetry.h
	(REGISTER_CONVERT_TO_RAW):  Add missing backslash.

Sat Feb  5 08:03:41 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-mips.c (mips_fetch_registers): If regno is FP_REGNUM or
	ZERO_REGNUM, just read it as zero without talking to the board.

	* config/i386/tm-i386aix.h (REGISTER_CONVERT_TO_RAW): Add missing
	backslash.
	* i386-tdep.c (i386_extract_return_value): Pass TYPE_LENGTH (type)
	to store_floating, not nonexistent variable len.

	* remote-mips.c (mips_insert_breakpoint, mips_remove_breakpoint):
	New functions.
	(mips_store_word): Change calling convention to return errors, and
	to provide old contents if the caller wants it.
	(mips_xfer_memory): Deal with errors from mips_store_word.
	* config/mips/tm-idt.h, config/mips/tm-idtl.h: Remove BREAKPOINT
	define now that remote-mips.c doesn't use BREAKPOINT.

	* remote-mips.c (mips_create_inferior): Call warning if arguments
	specified, and then execute "set args" command.  Call error, not
	mips_error, if executable file not specified.

	* remote-e7000.c: Replace "snoop" command (e7000_noecho) with
	remote_debug.

	* config/rs6000/tm-rs6000.h (STORE_STRUCT_RETURN): Don't cast
	to unsigned int.

Sat Feb  5 05:27:05 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* value.h (print_longest):  Rename "value" to "val" in prototype
	declaration because some compilers don't like arguments whose
	names are the same as types.
	* remote.c (remote_xfer_memory):  Cast "myaddr" to unsigned char *
	before passing it to remote_*_bytes.

Fri Feb  4 15:53:18 1994  Steve Chamberlain  (sac@cygnus.com)

	* h8500-tdep.c (saved_pc_after_call): The size of the
	pc is memory model dependent. (segmented_command,
	unsegmented_command, _initialize_h8500_tdep): New commands to
	change memory model.
	* remote-e7000.c (_initialize_remote_e7000): Change name of snoop
	command.
	* remote-hms.c (hms_load): Remove breakpoints when loaded.
	(hms_wait): Use new status structure
	(hms_open): Push the target here. (hms_before_main_loop): Not
	here.  (supply_val, hms_fetch_register, hms_store_register):  Cope
	with H8/500 names too. (hms_fetch_register): Take out REGISTER_TYPE.
	* sh-tdep.c (show_regs, initialize_sh_tdep): New command to print
	all registers in a compact way.

Fri Feb  4 07:41:13 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* config/rs6000/tm-rs6000.h: Declare rs6000_struct_return_address
	as CORE_ADDR to match definition in rs6000-tdep.c.

Fri Feb  4 01:14:20 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dwarfread.c (process_dies):  Skip nested TAG_compile_unit DIEs.
	* dwarfread.c (add_partial_symbol):  Do not enter opaque aggregate
	definitions into the psymtab.

Thu Feb  3 12:38:58 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* m68k-stub.c: Treat mc68332 like mc68020 most places.  Provide
	a special exceptionSize for the 68332.

	* remote-udi.c (udi_attach): If no arguments, print error.

Thu Feb  3 17:34:05 1994  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (VERSION):  Bump to 4.12.1
	* NEWS, README:  Update to match 4.12 release.

Thu Feb  3 12:38:58 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* command.c (empty_sfunc): New function.
	(add_set_cmd): Use it instead of not_just_help_class_command.
	(not_just_help_class_command): Change calling convention back to
	what it was before yesterday's change.

	* stabsread.c (read_sun_builtin_type): Skip the semicolon at the end
	of the type if present.

Wed Feb  2 11:16:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (decode_format): Don't blithely set the size for
	an address to 'w'.  Make it 'g' or 'h', depending on TARGET_PTR_BIT.

	* defs.h: Just typedef CORE_ADDR to bfd_vma.  Include bfd.h.
	If BFD64, make a LONGEST a BFD_HOST_64_BIT.
	* defs.h (longest_to_int): Don't depend on CC_HAS_LONG_LONG; instead
	always just check against INT_MIN and INT_MAX (this also fixes things
	if sizeof (long) > sizeof (int), e.g. Alpha).
	* config/pa/tm-hppa.h, config/i386/sun386.h, config/rs6000/tm-rs6000.h:
	Don't define LONGEST or BUILTIN_TYPE_LONGEST.
	* gdbtypes.h: Remove BUILTIN_TYPE_LONGEST and
	BUILTIN_TYPE_UNSIGNED_LONGEST.
	* language.h, c-lang.c, ch-lang.c, m2-lang.c, language.c: Remove
	longest_int and longest_unsigned_int.
	* value.h (struct value): Just align to LONGEST, rather than worrying
	about CC_HAS_LONG_LONG.
	* valarith.c (value_binop): Figure out type ourself based on
	sizeof (LONGEST) rather than relying on BUILTIN_TYPE_LONGEST.  The
	point is that we don't depend on CC_HAS_LONG_LONG anymore.
	* valprint.c (val_print_type_code_int): Just call
	extract_unsigned_integer directly, rather than going through
	unpack_long.
	* printcmd.c (decode_format): Remove code which would sometimes
	change 'g' size to 'w' for integers.  print_scalar_formatted handles
	printing huge integers well enough, thank you.

	* command.c (add_set_cmd, not_just_help_class_command): Change
	to make this the sfunc, not cfunc, since that is how we call it.
	* command.h: Comment difference between sfunc and cfunc.
	* demangle.c (set_demangling_command): Add third arg since that
	is how it is called.
	(_initialize_demangler): Use sfunc, not cfunc, for
	set_demangling_command, since that is how it is called.
	Remove show_demangling_command; it has no effect.

	* command.c (shell_escape): Report errors correctly (with error
	message from strerror).

Wed Feb  2 14:35:41 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* xcoffread.c (read_xcoff_symtab): Change CSECT_LEN to use
	x_scnlen.l rather than x_scnlen to match corresponding change in
	coff/internal.h.

Wed Feb  2 11:16:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* gdbtypes.h, ch-typeprint.c, ch-valprint.c:
	Change comments regarding TYPE_CODE_BOOL.
	* language.c (boolean_type): Always return 1 for TYPE_CODE_BOOL,
	regardless of the language.
	(value_true): Just call value_logical_not regardless of language.
	* coffread.c (coff_read_enum_type), stabsread.c (read_enum_type):
	Remove #if 0'd code which makes some enums TYPE_CODE_BOOL.
	* language.h: Improve comment for la_builtin_type_vector.
	* m2-lang.c (_initialize_m2_language): Don't add any fields to
	builtin_type_m2_bool.

Tue Feb  1 17:13:32 1994  Kevin Buettner (kev@cujo.geg.mot.com)

	* config/m88k/{tm-delta88.h,tm-delta88v4.h}, m88k-tdep.c:
	Define IN_SIGTRAMP and backtrace correctly through signal handlers.

Tue Feb  1 22:13:25 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* procfs.c (wait_fd):  Handle EINTR error return from PIOCWSTOP ioctl
	by restarting the ioctl.

Tue Feb  1 16:16:25 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* target.h (target_wait): Add comment about calling
	return_to_top_level.

Tue Feb  1 12:21:00 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* coffread.c (read_one_sym): bfd_coff_swap_aux_in now takes
	additional arguments.
	* xcoffread.c (read_xcoff_symtab, read_symbol_lineno): Likewise.

Mon Jan 31 16:10:41 1994  Stu Grossman  (grossman at cygnus.com)

	* sparc-stub.c:  Remove unnecessary #include of memory.h.

Mon Jan 31 12:12:34 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* mips-tdep.c: Remove code which sets saved_regs from
	init_extra_frame_info and put it in new function mips_find_saved_regs.
	(READ_FRAME_REG): Remove macro and replace uses with the expansion.
	* mips-tdep.c, config/mips/tm-mips.h: When examining ->saved_regs,
	check if it is NULL and call mips_find_saved_regs if so.

	* remote-mips.c: Use unfiltered, not filtered, output most places.

	* blockframe.c (get_prev_frame_info): Detect and stop an infinite
	backtrace.  Revise comments.

Mon Jan 31 09:40:33 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_procedure):  Remove _sigtramp kludges for
	alpha and irix. The _sigtramp case has to be handled properly
	in the tdep files if we have no ecoff debugging info.
	* alpha-tdep.c (alpha_frame_saved_pc, alpha_frame_chain),
	mips-tdep.c (mips_frame_saved_pc):  Handle signal handler frames
	without PC_REGNUM kludge.
	* mdebugread.c (fixup_sigtramp), mips-tdep.c (read_next_frame_reg):
	Clean up handling of mips sigtramp frames, improve comments.

Sat Jan 29 23:25:57 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* paread.c (read_unwind_info): Fix typo.

	* paread.c (pa_symtab_read): Update the "check_strange_names"
	filter to match GCC's current output.  Filter out section symbols
	(which the HP linker sometimes puts in the wrong place).

Sat Jan 29 07:44:59 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* serial.h (SERIAL_SET_TTY_STATE): Comment return value.

	* Makefile.in (TAGS): Just echo one line, rather than the whole thing.

	* Makefile.in: Remove all references to sparcly-nat.c.

	* Makefile.in (HFILES_NO_SRCDIR): Include dcache.h remote-utils.h
	remote-sim.h directly, rather than via $(remote_utils_h).  This avoids
	duplicating serial.h and target.h.

	* Makefile.in: Don't set M_INSTALL and M_UNINSTALL.  These variables
	are not used anywhere (a 5 Oct 1993 change removed the uses).

	* config/m68k/monitor.mt (TDEPFILE): Add remote-es.o.
	* config/m68k/es1800.mt: Add comment.
	* remote-es.c: Extensive changes to update to current conventions.

	* ser-unix.c (wait_for, hardwire_readchar) [HAVE_TERMIO, HAVE_TERMIOS]:
	If the timeout is too big to fit in c_cc[VTIME], then do multiple reads
	to achieve the desired timeout.
	* serial.h (serial_t): Add field timeout_remaining.

Fri Jan 28 08:45:02 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* c-exp.y (yylex): Reenable nested type code.

Fri Jan 28 15:40:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* a29k-tdep.c (examine_tag): Add comment regarding argcount.

	* remote-mips.c (mips_ops): Fix docstring.

	* remote-bug.c (bug_ops): Remove spurious newline from docstring.

	* config/m68k/tm-monitor.h: Changes to bring this into accordance
	with the old tm-m68k-em.h:
	(GDBINIT_FILENAME, DEFAULT_PROMPT): Remove.
	(HAVE_68881): Don't undefine; HAVE_68881 is obsolete.
	(REGISTER_NAMES): Don't muck with it; what tm-m68k.h has is fine.
	Add FIXME regarding GET_LONGJMP_TARGET.

	* remote-udi.c (udi_close, udi_detach, udi_kill): Add comments.
	* infptrace.c (kill_inferior): Add comments.
	* main.c (quit_command): Call target_close after we kill or
	detach.
	* remote-udi.c (udi_close): Don't error() if QUITTING.

Fri Jan 28 11:55:52 1994  Rob Savoye  (rob@darkstar.cygnus.com)

	* configure.in: Make m68k-coff and aout add monitor support in
	addition to the standard serial support.

Fri Jan 28 08:45:02 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* mdebugread.c (psymtab_to_symtab_1): Don't complain on stLabel with
	index indexNil.

Fri Jan 28 10:40:34 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/pa/tm-hppa.h: Define macro SMASH_TEXT_ADDRESS.
	* elfread.c (record_minimal_symbol_and_info),
	dwarfread.c (process_dies), paread.c (pa_symtab_read): Use it.

Thu Jan 27 15:12:23 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i386-stub.c: Add ".text" right before "mem_fault:".

	* main.c (baud_rate): Add FIXME comment about printing -1 value.

	* remote-utils.c (usage): Fix message to be accurate and conform
	more closely to normal conventions.

	* remote-utils.c (gr_files_info): Have the exec_bfd test control
	whether to show information about exec_bfd, and not control whether
	to show information about device and speed.

	* remote-utils.c (gr_open): If sr_get_device returns NULL, give
	usage message, don't dump core.

	* remote-bug.c (bug_write_memory): Use alloca, not GCC extension
	for variable size array.
	(bug_fetch_register, bug_store_register): Rename "value" to
	"fpreg_buf" because some compilers don't like variables whose
	names are the same as types.
	(bug_store_register): Use a cast when converting char * to
	unsigned char *.

	* symmisc.c (maintenance_print_symbols): Don't refer to the name
	of the command in error message (the text was referring to the old
	name of the command).

	* symmisc.c (dump_symtab): Fix args to fprintf_filtered.

	* c-typeprint.c (c_type_print_base): Have SHOW == 0 mean to print
	full details on structure elements without names.  This partially
	reverts the changes of 1 Jul 1993 and 31 Aug 1993; I think this aspect
	of those changes was accidental.

	* stack.c (parse_frame_specification): If SETUP_ARBITRARY_FRAME is
	defined, make it an error to specify a single argument which is not
	a frame number.

	* Makefile.in (version.c), main.c (print_gdb_version): Use
	host_alias and target_alias, not host_canonical and
	target_canonical, to print configuration.

Wed Jan 26 10:57:21 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* parse.c (write_exp_msymbol): Use new type msymbol_addr_type instead
	of builtin_type_long.  It is necessary to get a type which is
	TARGET_PTR_BIT bits in size; builtin_type_long might not be big enough.

	Fix many sins which will come up in 32 bit x 64 bit GDB, and
	various miscellaneous things discovered in the process:
	* printcmd.c, defs.h (print_address_numeric): New function.
	* c-valprint.c (c_val_print), ch-valprint.c (chill_val_print)
	breakpoint.c (describe_other_breakpoints, breakpoint_1, mention),
	cp-valprint.c (cplus_print_value), infcmd.c (jump_command),
	printcmd.c, stack.c, symfile.c, symmisc.c, valprint.c:
	Use it.
	* utils.c, defs.h (gdb_print_address): New function.
	* expprint (dump_expression), gdbtypes.h: Use it.
	* breakpoint.c (describe_other_breakpoints),
	symmisc.c (dump_symtab, print_symbol):
	Use filtered not unfiltered I/O.
	(remove_breakpoints): Remove BREAKPOINT_DEBUG code.  Might as well
	just run gdb under a debugger for this (and it had problems with
	printing addresses, how to print b->shadow, etc.).
	* buildsym.c (make_blockvector), core.c (memory_error),
	exec.c (print_section_info), maint.c (print_section_table),
	mdebugread.c (parse_procedure), solib.c, source.c, symfile.c,
	symmisc.c, symtab.c, valops.c, valprint.c, xcoffexec.c:
	Add comments saying code is broken.  Marked with "FIXME-32x64".
	* dbxread.c (process_one_symbol), partial-stab.h (default),
	remote-vx.c (vx_run_files_info):
	Don't cast int being passed to local_hex_string.
	* symmisc.c (print_symbol): Don't cast long being passed to %lx.
	* symtab.h (general_symbol_info): Add comment about SYMBOL_VALUE
	only being a long.
	* symmisc.c (print_symbol): Print "offset" in message for LOC_ARG
	and LOC_LOCAL.
	* printcmd.c (print_address): Remove #if 0 code with ADDR_BITS_REMOVE.
	* source.c: Include <sys/types.h> regardless of USG.

Tue Jan 25 12:58:26 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* valops.c (value_assign):  Set `type' after coercing toval.
	* c-valprint.c (c_val_print), ch-valprint.c (chill_val_print):
	Use extract_unsigned_integer to get the address of a reference.

Tue Jan 25 11:31:53 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (STABS_CONTINUE, error_type), partial-stab.h:
	AIX can use ? instead of \ for continuation.  Deal with it.

	* paread.c (read_unwind_info): Just assign to objfile->obj_private,
	not OBJ_UNWIND_INFO.  Assigning to a cast is a GCC-ism which
	the HP compiler in ANSI mode doesn't like.

	* main.c: When defaulting HAVE_SIGSETMASK based on USG, just do it
	based on USG, rather than defining HAVE_SIGSETMASK to an
	expression containing defined.  Having a macro used in #if expand
	to an expression containing "defined" is undefined according to
	ANSI, and the HP compiler in ANSI mode doesn't do what we wanted
	it to.

Mon Jan 24 20:51:29 1994  John Gilmore  (gnu@cygnus.com)

	* sparc-nat.c (fetch_inferior_registers, store_inferior_registers):
	Clean up the changes of 11 Jan, as recommended by Peter Schauer.

Fri Jan 21 19:10:44 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* ch-exp.y (match_string_literal):  Allow a zero-length string.
	* ch-lang.c (chill_printstr):  Don't print zero-length string funny.

Sat Jan 22 17:08:48 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i386aix-nat.c (i386_float_info): Reverse order of registers before
	passing them to print_387_status.
	(print_387_status): Don't subtract top from 7 before using it.
	* i387-tdep.c: Remove comment about AIX wanting "top" subtracted
	from 7; the above explains it.

Sat Jan 22 20:25:11 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mips-tdep.c (init_extra_frame_info):  Use frame relative stack
	pointer value when fixing up the frame at the start of a function.

Sat Jan 22 12:29:13 1994  Stu Grossman  (grossman at cygnus.com)

	* lynx-nat.c (fetch_core_registers):  Load the I & L regs for the
	Sparc from the stack.

Sat Jan 22 08:30:42 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote-mips.c (mips_initialize): Clear mips_initializing via
	cleanup chain, not directly.

	* ser-unix.c (wait_for) [HAVE_TERMIO, HAVE_TERMIOS]: Make a timeout
	of -1 mean forever, like in the HAVE_SGTTY case.  Warn if we are
	munging the timeout due to the limited range of c_cc[VTIME].

	* fork-child.c, inferior.h (fork_inferior): New argument shell_file.
	* procfs.c (procfs_create_inferior), inftarg.c (child_create_inferior),
	m3-nat.c (m3_create_inferior): Pass it.
	* procfs.c: Remove ptrace function.  It was declared in a way which
	conflicted with the prototype in unistd.h on Solaris.

Sat Jan 22 01:37:40 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* sparc-tdep.c (frame_saved_pc):  Get the pc from the saved pc
	in the sigcontext if it is a signal trampoline frame.
	* config/sparc/tm-sun4sol2.h (IN_SIGTRAMP, SIGCONTEXT_PC_OFFSET):
	Define for Solaris2.

Sat Jan 22 00:34:47 1994  Stu Grossman  (grossman at cygnus.com)

	* sparc-tdep.c, lynx-nat.c, config/sparc/tm-sparc.h,
	config/sparc/tm-sparclynx.h:  Move defs of FRAME_SAVED_I0/L0 to
	tm-sparc.h so they can be overridden if necessary.

Fri Jan 21 17:49:28 1994  Stu Grossman  (grossman at cygnus.com)

	* lynx-nat.c:  Add Sparc support.
	* sparcly-nat.c:  Remove.  It's useless.
	* config/sparc/nm-sparclynx.h:  Rewrite.
	* config/sparc/sparclynx.mh (NATDEPFILES):  Replace sparcly-nat.o
	with lynx-nat.o
	* config/sparc/tm-sparclynx.h:  Rewrite.

Fri Jan 21 19:08:48 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* rs6000-pinsn.c: Use the new disassembler in the opcodes
	directory.  Old code was discarded, since the new opcode table has
	a different format.

Fri Jan 21 14:28:30 1994  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (realclean):  Remove info files per make-stds.texi.

Fri Jan 21 12:47:53 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dbxread.c (end_psymtab): Only patch psymtab textlow and texthigh
	if N_SO_ADDRESS_MAYBE_MISSING is defined.
	* config/sparc/tm-sun4sol2.h: Define it.

Thu Jan 20 15:04:24 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* printcmd.c (print_address_symbolic):  Unconditionally use msymbol
	if we did not find a symbol.

Fri Jan 21 08:20:18 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* infptrace.c (child_xfer_memory): Only use if CHILD_XFER_MEMORY
	is not defined.

	* hppab-nat.c (call_ptrace): Delete redundant function.
	(kill_inferior, attach, detach, child_resume): Likewise.
	(child_xfer_memory): Likewise.

	* hppah-nat.c (call_ptrace): Delete redundant function.
	(kill_inferior, attach, detach, child_resume): Likewise.

	* config/pa/hppabsd.mh (NATDEPFILES): Add infptrace.o.

	* config/pa/hppahpux.mh (NATDEPFILES): Add infptrace.o.

	* config/pa/nm-hppab.h (FETCH_INFERIOR_REGISTERS): Define.

	* config/pa/nm-hppah.h (FETCH_INFERIOR_REGISTERS): define.
	(CHILD_XFER_MEMORY): Define.
	(PT_*): Define so that generic infptrace.c code can be used.

Fri Jan 21 09:23:33 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (xcoff_symfile_read): Make second parameter a
	struct section_offsets *, not a (nonexistent) struct section_offset *.

	* xcoffread.c (read_xcoff_symtab): Make main_aux just a union
	internal_xcoff_symtab, not an array of one of them.  Change lots of
	"main_aux" to "&main_aux" and so on.

	* coffread.c, xcoffread.c: Include <coff/internal.h>
	before "symfile.h".

Thu Jan 20 17:30:55 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* coffread.c (coff_getfilename): Make it not static.

	* xcoffread.c (read_xcoff_symtab): complain() not abort().

	* xcoffread.c (struct coff_symbol): Rename c_nsyms to c_naux (removes
	a completely gratuitous difference between xcoffread.c and coffread.c).

Wed Jan 19 15:09:44 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c (wait_for_inferior): Don't set frame for
	step_resume_breakpoint for IN_SIGTRAMP cases.

	* infrun.c (wait_for_inferior), breakpoint.h (struct bpstat_what),
	breakpoint.c (bpstat_what): Move step_resume from its own field of
	the struct bpstat_what into the main_action.  Make it override
	other breakpoints.  This is a conservative change in the sense
	that before the step resume breakpoint was a breakpoint.c
	breakpoint, hitting the step resume breakpoint overrode even
	calling bpstat_stop_status.

Wed Jan 19 12:40:25 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (normal_stop):  Set stop_pc after popping the dummy frame
	in case execution was stopped in the called function.
	* stack.c (print_frame_info, frame_info):  If backtracing through
	a call dummy, handle the starting source line number on a line
	boundary like backtracing through sigtramp.
	* sparc-tdep.c (sparc_frame_find_saved_regs):  Get frame address
	for call dummy frame right.  Remove old test for dummy frame,
	it has been unused at least since gdb-3.5.
	* sparc-tdep.c (sparc_push_dummy_frame):  Set return address register
	of the dummy frame.

Tue Jan 18 16:16:35 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infcmd.c (signal_command): Accept 0 as legitimate signal number.

Tue Jan 18 14:09:25 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (signals_info), target.c (target_signal_from_name):
	Use ugly casts to avoid enumvar < enumvar or enumvar++.

Mon Jan 17 22:00:15 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* ser-unix.c (hardwire_noflush_set_tty_state): Don't muck with ICANON.
	* inflow.c (terminal_ours_1): When discussing how to deal with the
	tty state, make note of query() as well as readline.

	* infrun.c (_initialize_infrun): Add TARGET_SIGNAL_POLL to list of
	signals for which stop and print are cleared by default.

Mon Jan 17 20:00:51 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

	* config/pa/tm-hppa.h (unwind_table_entry): Use one of the
	reserved fields to hold a stub unwind entry type.  Fix typo.
	(stub_unwind_entry): New structure for raw stub unwind entries.
	(stub_unwind_types): The types of stubs we may encounter.
	(UNWIND_ENTRY_SIZE, STUB_UNWIND_ENTRY_SIZE): New defines.
	* hppa-tdep.c (rp_saved): Use additional information provided
	by linker stub unwind descriptors.
	(frameless_function_invocation): Likewise.
	(frame_chain_valid): Likewise.
	* paread.c (compare_unwind_entries): New function for sorting
	unwind table entries.
	(read_unwind_info): Rewrite to remove dependency on host endianness.
	Read in data from the $UNWIND_END$ subspace which contains linker
	stub unwind descriptors.  Merge that data into the basic unwind
	table.

	* hppab-nat.c (_initialize_kernel_u_addr): Delete unwanted functions.

Mon Jan 17 22:00:15 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (read_xcoff_symtab, case C_FILE): Accept the name
	from either the symbol name or the auxent.
	* coffread.c, symfile.h (coff_getfilename): Renamed from getfilename,
	no longer static.

Mon Jan 17 13:35:01 1994  Fred Fish  (fnf@cygnus.com)

	* Makefile.in (ALLPARAM):  Change irix5.h to nm-irix5.h.

Mon Jan 17 12:35:42 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* README:  Update notes for alpha port.

Mon Jan 17 11:15:57 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i960-tdep.c (i960_fault_to_signal): Return TARGET_SIGNAL_ILL
	for operation fault, constraint fault, and type fault.

Sun Jan 16 12:46:01 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (init.c): Add comment explaining formatting conventions.

	* c-exp.y (parse_number): Assign to temporary between the right
	shifts, to work around a bug in the SCO compiler.

	* Makefile.in (ALLCONFIG, ALLPARAM, ALLDEPFILES, HFILES_NO_SRCDIR):
	Add various files which were added to GDB recently.

	* xcoffread.c (process_xcoff_symbol): Only change 'V' to 'S' if not
	within_function.

	* Makefile.in: Add mostlyclean target.

Sat Jan 15 10:20:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Version 4.11.4.

Sat Jan 15 18:27:34 1994  Per Bothner  (bothner@kalessin.cygnus.com)

	* main.c (show_commands):  Make return type of extern
	history_get be HIST_ENTRY, rather than struct _hist_entry.
	(The latter loses with the upcoming merged readline.)

Sat Jan 15 10:20:13 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* minsyms.c (prim_record_minimal_symbol_and_info): Make tempstring
	const char *, not char *.

	* symtab.h (struct symbol): Make section short, not unsigned short.

	* symtab.c (lookup_symbol): Add comment about QUIT here.

	* utils.c (fputs_unfiltered): Call fputs, not fputs_maybe_filtered.

	* c-exp.y (parse_number): Check for overflow regardless of range
	checking.  Fix overflow check to use unsigned LONGEST, not
	unsigned int.

	* c-exp.y (parse_number): Make it so that integer constants are
	builtin_type_long_long if builtin_type_long isn't big enough or if
	an "LL" suffix is used.  Properly handle "UL" or "LU" suffixes.

	* c-typeprint.c (c_type_print_varspec_suffix, case TYPE_CODE_FUNC):
	Print our "()" first, then recurse for the target type.

Fri Jan 14 21:55:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-udi.c (udi_create_inferior): Quote empty execfile argument.

	* gdbserver/low-lynx.c: Include <sys/wait.h> not "/usr/include/wait.h".

Fri Jan 14 14:17:06 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (request_quit): Re-establish signal handler regardless
	of USG.

	* config/mips/xm-irix4.h: Define HAVE_TERMIOS.

Fri Jan 14 21:55:39 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* i960-tdep.c: Include target.h.

Fri Jan 14 17:12:28 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* lynx-nat.c (sys/wait.h): Don't use absolute pathname.

Fri Jan 14 11:06:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* lynx-nat.c (child_wait): Fix thinkos in struct target_waitstatus
	changes (status -> ourstatus; declare status, etc.).
	* config/nm-lynx.h: Fix child_wait prototype and include target.h.

Fri Jan 14 14:17:06 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (ALLPARAM): Add config/nm-lynx.h.

Fri Jan 14 11:49:44 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* remote-mips.c (mips_request, mips_wait): Correct prototypes.

Fri Jan 14 11:37:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/i386/xm-linux.h: Define HAVE_TERMIOS.

Fri Jan 14 01:04:36 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/alpha/tm-alpha.h (CALL_DUMMY):  Improve comment.

Thu Jan 13 10:32:38 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote-vx.c (vx_wait): Only call i960_fault_to_signal if I80960
	is defined.  Otherwise just report TARGET_SIGNAL_UNKNOWN.

	* mips-tdep.c (mips_push_arguments): Byteswap struct_addr before
	writing it.

	Add search to target vector (#if 0'd until after 4.12):
	* target.h (to_search, target_search): Add.
	* gdbcore.h, core.c (generic_search): Add.
	* remote.c (remote_search): Add.
	* a29k-tdep.c (init_frame_info): Use target_search to find traceback
	tag.

	* printcmd.c (print_address_symbolic): If set print fast-symbolic-addr
	is on, call find_pc_function rather than relying just on the minimal
	symbols (probably only matters for symbol readers which don't put
	statics in the minimal symbols, but changing this strikes me as
	not conservative enough).
	Initialize name_location in all cases.
	If no symbol and no msymbol, don't print anything symbolic.

	* a29k-tdep.c (push_dummy_frame): Add comment about saving lr0.

Wed Jan 12 20:53:16 1994  John Gilmore  (gnu@cygnus.com)

	* printcmd.c (print_address_symbolic):  Make it search the
	symtabs for variables as well as functions.  Add `set print
	fast-symbolic-addr' and default it to fast (the old way).
	Print line numbers for data items as well as functions.

	* symtab.c (find_addr_symbol):  Return the symtab and the symbol
	address, if a symbol is found (take two more args pointing to
	where to store these results).

	* symtab.h (find_addr_symbol):  Add prototype.

Wed Jan 12 19:32:11 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* objfiles.h: Fix comments to reflect the fact that the phrase
	"top of stack" always refers to where the pushing and popping takes
	place, regardless of whether it is at the highest or lowest address.

Wed Jan 12 13:23:37 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_symbol):  Do not set TYPE_TAG_NAME for
	compiler generated tag names.
	* mdebugread.c (parse_type):  Handle cross references to qualified
	aggregate types.
	* valops.c (value_struct_elt):  Improve error message if the
	address of a method is requested from an object instance.
	* valops.c (search_struct_method):  Make name_matched non-static
	to get it initialized correctly.
	* config/i386/nm-i386sco.h (CANNOT_STORE_REGISTER):  Define to
	exclude segment register which are not writable on newer SCO versions.

Wed Jan 12 14:44:45 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* go32-xdep.c: Remove unused function uerror.
	(sigsetmask): Declare return type.  Declare argument (to match the
	way it is called).  Explicitly return 0.

Wed Jan 12 01:44:25 1994  John Gilmore  (gnu@cygnus.com)

	* symtab.h (struct symbol, general_symbol_info, minimal_symbol,
	partial_symbol):  Shrink the storage sizes of symbols, by making
	enums into 1-byte bitfields when compiled __GNUC__, moving all the
	enums and small ints to the end of each struct to improve
	alignment, and switching the section number from int to unsigned
	short.

Wed Jan 12 00:16:26 1994  John Gilmore  (gnu@cygnus.com)

	* symtab.c (find_addr_symbol):  New routine that will find the nearest
	symbol associated with an address.  It does so by exhaustive
	search of the symtabs, so it's slow but complete.

Tue Jan 11 23:57:30 1994  John Gilmore  (gnu@cygnus.com)

	* coffread.c (read_coff_symtab):  Set PC bounds of _globals_ symtab
	to [0,0] rather than [0, end of first source file].  This avoids
	problems with other parts of GDB looking for linetables in the
	_globals_ symtab.  Eliminate variables num_object_files and
	first_object_file_end.

Tue Jan 11 00:53:46 1994  John Gilmore  (gnu@cygnus.com)

	* a29k-tdep.c (init_frame_info):  Cast null arg to examine_tag.
	(pop_frame):  Restore PC2 and LR0 from dummy frames.
	(push_dummy_frame):  Save PC2 and LR0 into dummy frames.
	(setup_arbitrary_frame):  Handle 3 args and set up real frames.
	* config/a29k/tm-a29k.h (FRAME_NUM_ARGS):  Update comments.
	(DUMMY_FRAME_RSIZE):  Add 2 longwords for PC2 and LR0.
	(SETUP_ARBITRARY_FRAME):  Define.

Tue Jan 11 06:59:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* infrun.c, config/mips/tm-irix5.h: Remove #if 0'd AT_FUNCTION_START.

Tue Jan 11 14:27:03 1994  Ian Lance Taylor  (ian@tweedledumb.cygnus.com)

	* remote-udi.c (udi_resume): Correct prototype.

Tue Jan 11 11:10:30 1994  Jeffrey A. Law  (law@snake.cs.utah.edu)

        * config/pa/tm-hppa.h (FRAME_FIND_SAVED_REGS): Call
	hppa_frame_find_saved_regs.
	* hppa-tdep.c (dig_fp_from_stack): Delete function.
	(prologue_inst_adjust_sp): New function.
	(is_branch, inst_saves_gr, inst_saves_fr): New functions.
	(skip_prologue): Completely rewrite to use unwind information.
	(hppa_frame_find_saved_regs): Likewise.

Tue Jan 11 06:59:10 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* remote-mips.c (mips_wait): Use new function mips_signal_from_protocol
	to convert a signal number with appropriate bounds checking.

	* remote-mips.c (mips_wait): Fix typos (0x177 -> 0177, 0x377 -> 0377).

Tue Jan 11 00:53:46 1994  John Gilmore  (gnu@cygnus.com)

	* stack.c (frame_info):  If FRAME_FIND_SAVED_REGS isn't defined,
	print a newline to end the display anyway.

	* sparc-tdep.c (sparc_pop_frame):  Pop the fsr and csr (float and
	coprocessor status regs) when popping a frame.  This fixes 
	float exceptions that occur after calling inferior functions.

	* sparc-nat.c (fetch_inferior_registers, store_inferior_registers):
	Read and write the fsr (float status register) to/from the child
	process along with the float regs.  Remove Peter Schauer's change
	of May 24 '93, which has higher overhead and doesn't solve the
	real problem (which was that FSR wasn't being set).

Mon Jan 10 23:16:42 1994  John Gilmore  (gnu@cygnus.com)

	* a29k-tdep.c (examine_prologue):  Don't worry if the ASGEQ
	stack overflow check isn't right after the register stack
	adjustment instruction.  Metaware R2.3u compiler moves other
	things in front of it.  This fix isn't perfect but is what's
	running.

Mon Jan 10 20:08:23 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* c-valprint.c (c_val_print): Treat TYPE_CODE_RANGE like TYPE_CODE_INT.

	* config/alpha/alpha-netware.mt: Rename to alpha-nw.mt for 14
	character filenames.
	* configure.in: Change accordingly.

Mon Jan 10 15:48:36 1994  Tom Lord  (lord@rtl.cygnus.com)

	* m68k-stub.c, sparc-stub.c: removed spurious introduction of 
	_filtered io routines from these two files.

Fri Jan  7 12:42:45 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* config/i386/tm-i386v.h, config/m68k/tm-m68k.h, config/mips/tm-mips.h,
	config/vax/tm-vax.h (CALL_DUMMY_BREAKPOINT_OFFSET):  Define.
	* mdebugread.c (parse_symbol):  Handle enum sh.type produced by
	DEC c89. 
	* mdebugread.c (add_line):  Handle zero linenos produced by DEC c89.

Fri Jan  7 12:55:25 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c (print_sys_errmsg): Call gdb_flush (gdb_stdout) before
	printing to gdb_stderr.

	* remote-udi.c (udi_kill): Don't close the connection, just set
	inferior_pid to zero.
	(udi_mourn): Call remove_breakpoints.

	* remote-udi.c: Remove obsolete need_artificial_traps comment.

	* i386b-nat.c (sregmap): If sEAX, etc., not defined, use tEAX, etc.

Thu Jan  6 07:17:53 1994  Jim Kingdon  (kingdon@deneb.cygnus.com)

	* symtab.c (lookup_symbol): Don't try adding .c to the name.

	* remote-bug.c: At the start of each section, reset srec_frame
	back to 160.

	* target.h: Add TARGET_WAITKIND_LOADED and TARGET_WAITKIND_SPURIOUS.
	* target.c (store_waitstatus): Add CHILD_SPECIAL_WAITSTATUS hook.
	* infrun.c (wait_for_inferior): Replace SIGTRAP_STOP_AFTER_LOAD with
	code which looks for those two waitkinds.  Use switch statement.
	* config/rs6000/tm-rs6000.h: Replace SIGTRAP_STOP_AFTER_LOAD with
	CHILD_SPECIAL_WAITSTATUS.

	* procfs.c (procfs_wait): Fix argument name to match 4 Jan changes.
	* Move target_signal_from_host, target_signal_to_host, and
	store_waitstatus from inftarg.c to target.c.  procfs needs them.
	* target.c: Include "wait.h" and <signal.h>.
	* target.h, infrun.c (proceed), proceed callers: Pass new code
	TARGET_SIGNAL_DEFAULT instead of -1.  This avoids problems with
	enums being treated as unsigned and is cleaner.
	* infrun.c (signals_info): Don't print TARGET_SIGNAL_DEFAULT or
	TARGET_SIGNAL_0.
	* infcmd.c (signal_command), infrun.c (signals_info):
	Don't allow user to specify numeric equivalent of
	TARGET_SIGNAL_DEFAULT.

Tue Jan  4 15:34:36 1994  Stu Grossman  (grossman@cygnus.com)

	* config/alpha/alpha-netware.mt:  New target support for Alpha
	running Netware.
	* configure.in:  Add alpha-*-netware* target.

Tue Jan  4 14:51:35 1994  Stan Shebs  (shebs@andros.cygnus.com)

	* remote-mips.c (mips_wait): Fix ref to TARGET_WAITKIND_STOPPED.

Tue Jan  4 09:47:14 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* target.h: Add enum target_waitkind, enum target_signal, and
	struct target_waitstatus.  Change status argument to target_wait to
	be struct target_waitstatus * instead of int *.
	* target.h, infrun.c, all targets: Change type of signal arguments
	to resume(), proceed(), and target_resume() from int to enum
	target_signal.
	* All targets (*_wait, *_resume): Change accordingly.
	* infcmd.c (program_info, signal_command), throughout infrun.c, 
	* fork-child.c, solib.c, hppa-tdep.c, osfsolib.c: Use this stuff.
	* convex-xdep.c, convex-tdep.c: Add FIXME's (getting the Convex
	signal code stuff right with the new signals would be non-trivial).
	* inferior.h (stop_signal): Make it enum target_signal not int.
	* target.c, target.h (target_signal_to_string, target_signal_to_name,
	target_signal_from_name): New functions.
	* inftarg.c, target.h (target_signal_to_host, target_signal_from_host,
	store_waitstatus): New functions.
	* procfs.c (procfs_notice_signals): Use them.
	* i960-tdep.c (i960_fault_to_signal): New function, to replace
	print_fault.
	* config/i960/tm-i960.h: Don't define PRINT_RANDOM_SIGNAL.

	* objfiles.c (build_objfile_section_table): Don't abort() if
	objfile->sections is already set.

	* objfiles.c (add_to_objfile_sections): Check SEC_ALLOC not SEC_LOAD
	to match recent change to exec.c.

	* Version 4.11.3.

	* main.c (print_gdb_version): Change year to 1994.

	* ChangeLog, ChangeLog-93: Split ChangeLog at 1994.
	* Makefile.in (NONSRC): Add ChangeLog-93.

Mon Jan  3 11:57:29 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* stabsread.c (read_type): Allow defining several type numbers
	at once (e.g. "(1,2)=(3,4)="...).

	* stabsread.c (read_enum_type): Use TARGET_INT_BIT not sizeof (int).

	* breakpoint.c (frame_in_dummy): Check PC as well as frame.

Mon Jan  3 02:47:03 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (psymtab_to_symtab_1):  Only pass N_STAB symbols
	to process_one_symbol.
	* symtab.c (find_pc_psymbol):  Search global_psymbols as well to
	avoid caching a bad endaddr in find_pc_partial_function.

Sun Jan  2 21:41:17 1994  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/tm-sun3.h: Don't define BELIEVE_PCC_PROMOTION.

Sat Jan  1 04:35:23 1994  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* infrun.c (wait_for_inferior):  Do not step or step resume past
	the end of a one-line function we just stepped into.

For older changes see ChangeLog-93

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
