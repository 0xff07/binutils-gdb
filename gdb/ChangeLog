Mon May  8 12:11:38 1995  J.T. Conklin  <jtc@rtl.cygnus.com>

	* config/m68k/monitor.mt (TDEPFILES): Added cpu32bug-rom.o.

Wed May  3 17:54:47 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* monitor.c (monitor_command): Don't use PROMPT until monitor
	target is known to be open.
	(monitor_make_srec): Don't define size of hextab.

Tue May  2 18:32:24 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* configure.in (--enable-netrom): New configuration option.
	* Makefile.in (REMOTE_OBS): Rename from REMOTE_O, append
	value of NETROM_OBS.
	(NETROM_OBS): New variable.
	* remote-nrom.c: New file, NetROM target support.
	* config/a29k/a29k-udi.mt, config/i960/vxworks960.mt: Use
	REMOTE_OBS instead of REMOTE_O.
start-sanitize-arc
	* config/arc/arc.mt: Ditto.
end-sanitize-arc	

Fri Apr 28 23:30:00 1995  Stu Grossman  (grossman@cygnus.com)

	* array-rom.c (_initialize_array array_open):  Move baud_rate
	initialization from _initxxx to array_open to fix bug with
	overriding -b command line option.

Thu Apr 27 20:29:34 1995  Doug Evans  <dje@canuck.cygnus.com>

	* Makefile.in (RUNTEST): Fix reference of `srcdir'.

Wed Apr 26 19:01:08 1995  Steve Chamberlain  <sac@slash.cygnus.com>
 
 	* remote-hms.c: Rewrite to use new monitor conventions.

Tue Apr 25 11:27:14 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dbxread.c: Add comment explaining lowest_text_address.
	Add comment regarding stringtab_global and psymtabs.

Sat Apr 22 01:26:29 1995  Jeff Law  (law@snake.cs.utah.edu)

	* config/pa/tm-hppa.h (EXTRACT_STRUCT_VALUE_ADDRESS): Fix.

	* config/pa/tm-hppa.h (EXTRACT_RETURN_VALUE): Rewrite to correctly
	handle "short", "int" and small structures returned in registers. 

Fri Apr 21 12:57:53 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* minsyms.c: add new function lookup_minimal_symbol_text, to look
	for text symbol only.
	* breakpoint.c (create_longjmp_breakpoint): call
	lookup_minimal_symbol_text instead of lookup_minimal_symbol.
	* symtab.h: add lookup_minimal_symbol_text prototype.

Fri Apr 21 12:03:44 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* sh-tdep.c (sh-opc.h): Don't include.
	(gdbcore.h): Include.
	(frame_find_saved_regs): Remove unused local.

Thu Apr 20 10:12:21 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* dwarfread.c (struct dwfinfo), dbxread.c (struct symloc),
	mdebugread.c (struct symloc), hpread.c (struct symloc): Clean
	up comments.

Wed Apr 19 16:58:11 1995  Stu Grossman  (grossman@andros.cygnus.com)

	* hppa-tdep.c (deposit_17):  New routine to deposit 17 bit
	constants into PA instructions.
	* Put #ifdefs around all signal handling code.  Not generally
	needed for embedded boards.
	* (hppa_fix_call_dummy):  Parameterize offsets into call dummy to
	allow different dummys to be used by this code.  Use
	INSTRUCTION_SIZE instead of REGISTER_SIZE for things.
	Conditionalize setup of _sr4export fixup.  Improve comments.
	* config/pa/tm-hppa.h:  Define INSTRUCTION_SIZE.  Use a different
	call dummy if PA_LEVEL_0 is defined.  Better comments for call
	dummys.  Define offsets for LDIL/LDO instructions which load
	function addresses.
	* config/pa/tm-pro.h:  Get rid of signal handling stuff.  Define
	PA_LEVEL_0 to disable mucking with space regs and such.

Mon Apr 17 15:37:08 1995  Stu Grossman  (grossman@andros.cygnus.com)

	* cpu32bug-rom.c monitor.h op50-rom.c remote-est.c rom68k-rom.c
	w89k-rom.c:  Remove loadtypes, loadprotos and baudrates.
	* op50-rom.c:  Fix copyrights and add load routine to op50n_cmds.
	* rom68k-rom.c (_initialize_rom68k):  Don't set baud rate.
	* w89k-rom.c:  Fix copyrights.

Sun Apr 16 14:00:55 1995  Stu Grossman  (grossman@andros.cygnus.com)

	* monitor.c:  Move all xmodem stuff into xmodem.[ch].  Remove
	unnecessary remoteloadprotocol and remoteloadtype support.
	* (expect expect_prompt):  Change names to monitor_expect and
	monitor_expect_prompt.  Make them global.
	* (printf_monitor):  Change name to monitor_printf.  Make global.
	* (monitor_read_memory):  Flush command echo to avoid parsing
	ambiguity with CPU32Bug monitor.
	* (monitor_load):  Remove remoteloadprotocol and remoteloadtype
	support.  Call target_ops->load_routine, default to
	monitor_load_srec.
	* (monitor_load_srec):  Remove everything but S-record support.
	* monitor.h (monitor_ops):  Add load_routine to provide monitor
	specific download capability.
	* remote-est.c:  Clean up copyrights and comments.
	* w89k-rom.c:  Use new xmodem support.
	* xmodem.c xmodem.h:  New files to support xmodem downloads.
	* rom68k-rom.c remote-est.c:  Fix copyrights, add load_routine
	entry to monitor_ops.
	* cpu32bug-rom.c:  New file to support Moto BCC debuggers.
	* config/m68k/est.mt (TDEPFILES):  Add cpu32bug.o.
	* config/pa/hppapro.mt (TDEPFILES):  Add xmodem.o.

Sat Apr 15 18:00:15 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* rem-multi.shar: Removed; superceded by gdbserver.

Fri Apr 14 12:10:24 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* xcoffread.c (xcoff_sym_fns): Revise comment about merging this
	with coffread.c.

	* breakpoint.c (fixup_breakpoints): Removed.
	* rs6000-nat.c (vmap_symtab): Don't call fixup_breakpoints.
	(vmap_ldinfo, xcoff_relocate_core): Call breakpoint_re_set.

	* coffread.c (coff_symfile_offsets): Allocate SECT_OFF_MAX
	sections, not just SECT_OFF_MAX-1.

	* rs6000-nat.c (vmap_symtab), xcoffread.c: Re-do section offsets
	to be indexed by SECT_OFF_* instead of xcoff section numbers.
	* objfiles.c, remote.c: Remove comments regarding SECT_OFF_*.
	* symtab.h: Revise comment about block_line_section.
	* rs6000-nat.c (vmap_symtab): Don't relocate objfile->sections.

Sat Apr 15 14:15:14 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* mpw-make.in (init.c): Don't try to do symbolic {o} in sed
	command, not allowed by some version of MPW Make.
	* ser-mac.c (mac-setbaudrate): Make it actually set baud rates.

Sat Apr 15 14:05:09 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* alpha-tdep.c (alpha_push_arguments): Fix typo (TYPE_VALUE ->
	VALUE_TYPE).  Do the cast for TYPE_CODE_BOOL, TYPE_CODE_CHAR,
	TYPE_CODE_ENUM, and TYPE_CODE_RANGE as well as TYPE_CODE_INT.

Sat Apr 15 14:04:32 1995  Per Bothner  <bothner@cygnus.com>

	* alpha-tdep.c (alpha_push_arguments): Only cast to long for
	TYPE_CODE_INT.

start-sanitize-gdbtk
Sat Apr 15 13:52:24 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* gdbtk.c (gdb_disassemble): Read from inferior if connected
	to a VxWorks target.

Fri Apr 14 10:18:20 1995  Stu Grossman  (grossman@cygnus.com)

	* README.GDBTK:  New file.  Contains the obvious.
end-sanitize-gdbtk

Thu Apr 13 16:17:04 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* remote-array.c: New file for Array Tech LSI33k based controller
	board.

Thu Apr 13 12:23:31 1995  Kung Hsu  <kung@rtl.cygnus.com>

	* a29k-tdep.c (get_longjmp_target): Replace SWAP_TARGET_AND_HOST with
	extract_address.
	* remote-vxsparc.c: New file, preliminary check in, this configuration
	not supported yet. 
	* remote-vxmips.c: ditto.

Thu Apr 13 12:10:14 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* rs6000-tdep.c (xcoff_add_toc_to_loadinfo): Don't use a prototype
	to declare the function.

Wed Apr 12 16:40:20 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* monitor.h (init_monitor_ops): Declare.
	* rom68k-rom.c: Clarify some comments.
	(rom68k_open): Define as static, to match decl.

Wed Apr 12 16:36:44 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* gdb.gdb: New file.
	* .gdbinit: Move list-objfiles to gdb.gdb.

	* values.c (set_internalvar): Set modifiable flag of newval.

Wed Apr 12 14:34:31 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* xcoffread.c: Call complain() rather than error() or printing a
	warning.

start-sanitize-arc
Wed Apr 12 08:15:27 1995  Doug Evans  <dje@canuck.cygnus.com>

	* arc-tdep.c: #include "gdbcmd.h".
	(codestream_seek): Pass CORE_ADDR.
	(arc_cpu_type, tmp_arc_cpu_type, arc_cpu_type_table): New globals.
	(debug_pipeline_p): Likewise.
	(X_...): Instruction field access macros.
	(BUILD_INSN): Define.
	(codestream_tell): Allow for stream elements > 1 byte.
	(codestream_fill): Likewise.
	(setup_prologue_scan): New function.
	(arc_get_frame_setup): Call it.  Update to current spec
	regarding prologues.  Use BUILD_INSN.
	(skip_prologue): New argument `frameless_p'.  Use BUILD_INSN.
	(arc_frame_saved_pc): New function.
	(frame_find_saved_regs): Use BUILD_INSN.
	(get_insn_type, single_step): New functions.
	(one_stepped): New global.
	(arc_set_cpu_type_command, arc_show_cpu_type_command): New functions.
	(arc_set_cpu_type): New function.
	(_initialize_arc_tdep): Define new `set' commands `cpu',
	`displaypipeline', and `debugpipeline'.
	* remote-arc.c (break_insn): Add bi-endian support.
	(arc_insert_breakpoint): Likewise.
	(arc_remove_breakpoint): Likewise.
	(switch_command): Delete.
	* arc/tm-arc.h (TARGET_BYTE_ORDER): Delete.
	(TARGET_BYTE_ORDER_SELECTABLE): Define.
	(DEFAULT_ARC_CPU_TYPE): Define.
	(SKIP_PROLOGUE_FRAMELESS_P): Define.
	(BREAKPOINT): Delete.
	(BIG_BREAKPOINT, LITTLE_BREAKPOINT): Define.
	(DECR_PC_AFTER_BREAK): Change to 8.
	(NO_SINGLE_STEP): Define.
	(ARC_PC_TO_REAL_ADDRESS): Define.
	(SAVED_PC_AFTER_CALL): Use it.
	(NUM_REGS, REGISTER_BYTES): Fix.
	(FRAME_SAVED_PC): Call arc_frame_saved_pc.
	(FRAME_LOCALS_ADDRESS): Fix.
end-sanitize-arc

Tue Apr 11 16:42:37 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* top.c, utils.c, defs.h: Remove error_hook.  It is currently
	unused and would need to hook into error_begin()/return_to_top_level(),
	instead of error(), if it were to be used.

Tue Apr 11 13:46:25 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* utils.c, defs.h (warning_begin): Renamed from warning_setup, for
	consistency with error_begin.  Also print warning_pre_print.
	Document it better.
	* utils.c (warning): Use it.
	* utils.c (error_begin): Doc fix.
	* rs6000-nat.c (vmap_ldinfo): If we don't find ldinfo for the
	symfile_objfile, nuke it.

Tue Apr 11 09:35:20 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* printcmd.c (print_address_numeric): Pass use_local to
	print_longest, rather than always passing 1.

	* nlm/Makefile.in: Remove comments discussing munch.

start-sanitize-gdbtk
Tue Apr 11 11:07:12 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* gdbtk.c (gdbtk_init): If SIOCSPGRP is not available, but
	F_SETOWN is, use that.
end-sanitize-gdbtk

Mon Apr 10 18:31:57 1995  Stan Shebs  <shebs@andros.cygnus.com>
	
	Merge in support for Mac MPW as a host.
	(Old change descriptions retained for informational value.)

	* mpw-config.in (i386-unknown-go32): Change from aout.
	(sh-hitachi-hms): New target.
	* mpw-make.in (BISON): Use byacc instead of bison.
	(VERSION): Bump to 4.14.1.
	(*-pinsn.*): Remove mentions everywhere.
	(all): Don't build MacGDB.
	(gdb, SiowGDB): Depend on Version.r.
	(Version.r): Generate from version info.
	* main.c (main): Pass program name to START_PROGRESS, END_PROGRESS.
	(main) [MPW]: Remove debugging hook.
	* mac-xdep.c (debug_openp): New flag.
	(mac_init): Set flag if env variable defined.
	* ser-mac.c (mac_open): Clarify error message.
	(mac_readchar): Call PROGRESS while looping.
	(mac_write): Call sleep instead of sec_sleep.
	(sec_sleep): Remove.
	* source.c (openp) [MPW]: Only print debugging info if debugging.
	* utils.c (query) [MPW]: Clarify that behavior is a bug.

	* mpw-make.in (init.c): Use open-brace instead of mpw-open-brace.

	* main.c, source.c: Remove hacks that replace long strings
	with shorter ones, now solved portably.

	* config/m68k/xm-mpw.h (spin.h): Include.
	(ALMOST_STDC): Only define if MPW_C.
	* config/m68k/tm-mac.h: New file, Mac target definitions.

	* mpw-config.in (m68k-apple-macos, ppc-apple-macos,
        i386-unknown-aout): New targets.
	(mk.tmp): Add *DEPFILES definitions.
	* mpw-make.in: Remove gC rules, clean up definitions for other
        include files, bump version, fix bogus \ that should be \Option-d.
	(init.c): Build correctly.

	* mpw-make.in (HFILES_NO_SRCDIR): Add somsolib.h
	(ALLDEPFILES): Add somsolib.c.
	(somsolib.o): Add some dependencies.

	* mpw-config.in: Use nm-empty.h if host is not target.
	(xdepfiles): Add mac-xdep.c.o.
	(xm_file): Remove.
	* mpw-make.in: Add Fortran files.
	(XDEPFILES): Remove.

	* mpw-config.in (MacSerial.h): Duplicate from standard Serial.h.
	* ser-mac.c (MacSerial.h): Include instead of Serial.h.

	* mpw-make.in: Use {s} instead of {srcdir} everywhere.
	(bindir, libdir): Remove extra colon.
	(source.c): Compile with C instead of gC.
	(c-exp.tab.c, ch-exp.tab.c, m2-exp.tab.c): Add {o}.
	(install-only): Don't install MacGDB.
	* source.c (openp) [MPW]: Add a debugging display.
	(open_source_file) [MPW]: Use MPW basename finders.
	[MPW_C]: Briefer versions of help for line and list commands.

	* mpw-make.in: Change references from paread.c to somread.c

	* mpw-make.in (VERSION): Update to 4.12.3.
	(SiowGDB): New target, GDB using SIOW library.
	(init-new.c): New target, attempt to generate init.c from sources.
	(main.c.o, top.c.o): Put each in its own segment.
	* main.c (main) [MPW]: Always call mac_init.
	* utils.c (query) [MPW]: Always return "yes" if in MacGDB, output
	an extra newline otherwise.
	* mac-xdep.c: More comments in various places, remove junk.
	(mac_init): Add tests for MPW and SIOW.
	(use_wne, has_color_qd): Renamed.
	(use_color_qd): New variable.
	(grow_window): Only do console resizing to console window,
	call resize_console_window.
	(zoom_window): Call resize_console_window.
	(resize_console_window, scroll_text): New functions.
	(adjust_console_sizes): Always align viewrect to even multiples of
	text lines.
	(adjust_console_text): Always scroll by whole lines.
	(hacked_vfprintf, hacked_puts, hacked_fputc, hacked_putc): Force a
	recalculation of scroll positions if a newline was output.
	(hacked_fflush): Similarly, for flushing.
	(hacked_fgetc): New function, aborts if called in MacGDB.
	* ser-mac.c (mac_readchar): Rename starttime to start_time,
	remove debugging printf.
	(mac_write): Sleep on first 4 writes.
	(sec_sleep): New function, works like standard sleep.
	* macgdb.r: Adjust positioning and contents of About box.
	Set minimum size to 2000K, preferred size to 5000K.
	* config/m68k/xm-mpw.h (fgetc): Define as a macro.

	* mpw-make.in (.c.o, .gc.o): Prefix segment names with gdb_.
	(top.c.o, annotate.c.o): Add build rules.
	* macgdb.r (SysTypes.r): Include.
	('vers'): New resource, version info.
	(mFile, mEdit, mDebug): Enable all menu items.
	(mDebug): Add key equivalents for continue, step, next.
	(wConsole): Add zoom and close boxes to window.
	* mac-xdep.c (new_console_window): New function, code taken from
	mac_init.
	(mac_command_loop): Use GetCaretTime for wait interval, call
	do_idle on null events.
	(do_idle): New function.
	(zoom_window): Implement zooming.
	(v_scroll_proc): New function, handles vertical scrolling.
	(activate_window): Do activation of console window.
	(do_menu_command): Implement items of file, edit, and debug menus.
	(do_keyboard_command): Fix command extraction.
	(adjust_console_sizes, adjust_console_text): New functions.
	(hacked_fprintf, hacked_vfprintf, hacked_fputs, hacked_fputc,
	hacked_putc): Don't call draw_console.
	* ser-mac.c (mac_open): Add an error message for invalid ports.
	(first_mac_write): New global.
	(mac_write): Use first_mac_write to sleep on first several writes.

	* mpw-make.in (INCLUDE_CFLAGS): Add readline source dir.
	(READLINE_CFLAGS, READLINE_SRC, READLINE_DIR): Uncomment.
	(TSOBS): Don't compile inflow.c.
	(all, install): Add MacGDB.
	* main.c (main): Do Mac-specific init and command loop if a
	standalone app, skip full option help message if compiling
	with MPW C.
	(gdb_readline): If MPW, add a newline after the (gdb) prompt.
	* utils.c (_initialize_utils): If MPW, don't try to use termcap to
	compute the window size.
	* config/m68k/xm-mpw.h (printf, fprintf, fputs, fputc, putc,
	fflush): Define as macros that expand into hacked_... versions.
	(StandAlone, mac_app): Declare.
	* macgdb.r (SIZE): Set the default partition to 4000K.
	* mac-xdep.c (readline.h, history.h): Include.
	(terminal.h): Don't include.
	(mac_app): Define.
	(gdb_has_a_terminal): Define Mac-specific version.
	(do_keyboard_command): Simplify search for command string.
	(readline): Define as gdb_readline.
	Add other history/readline stubs to make main gdb link.
	(hacked_fprintf, hacked_printf, hacked_vfprintf, hacked_fputs,
	hacked_fputc, hacked_fflush): New functions, intercept output to
	stdout and stderr, send to console window.

	* mpw-make.in (MacGDB): New target, standalone Mac-hosted gdb.
	(XDEPFILES): Define.
	(main.c.o): Compile with gC instead of C.
	* mac-defs.h: New file, menu etc definitions shared between
	C and Rez files.
	* macgdb.r: New file, Rez (resource compiler) resource
	definitions.
	* mac-xdep.c: New file, Mac host interface code.
	* config/m68k/xm-mpw.h (PATHNAME_SEPARATOR): Rename to
	DIRNAME_SEPARATOR.
	(PATHNAME_SEPARATOR_STRING): Remove.
	(SIGQUIT, SIGHUP): Define.
	(fileno, R_OK): Define.

	* mpw-config.in: New file, MPW configuration fragment.
	* mpw-make.in: New file, MPW makefile fragment.
	* config/m68k/xm-mpw.h: New file, MPW host definitions.
	* ser-mac.c: New file, Mac serial interface.

Mon Apr 10 16:47:57 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* valprint.c (print_longest): Fix a syntax error in #ifdef 
	PRINTF_HAS_LONG_LONG.

	* config/mips/xm-irix5.h: turn on CC_HAS_LONG_LONG and 
	PRINTF_HAS_LONG_LONG.
	* config/mips/tm-irix5.h: turn on FORCE_LONG_LONG.

Sat Apr  8 02:47:45 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_symbol):  Use new variable 
	nodebug_var_symbol_type as type of variables which don't have any
	ecoff debug info associated with them.
	(parse_symbol, parse_procedure):  Use heuristics to determine if
	functions were compiled without debugging info and change their
	type to nodebug_function_symbol_type.
	(_initialize_mdebugread):  Initialize nodebug_*_symbol_type.

	* source.c (line_info):  Clear sal.pc for `info line' without
	arguments.

Fri Apr  7 17:43:01 1995  Stu Grossman  (grossman@andros.cygnus.com)

	* monitor.c:  make_xmodem_packet and print_xmodem_packet go away.
	send_xmodem_packet shows up to do the obvious.  Lots of fixes to
	xmodem downloads including resetting of block number at start of
	new transfers, fix for buffer overrun problem, addition of CRC
	generation code.
	* (monitor_open):  loadtype_str and loadproto_str now default to
	first entry in monitor_ops->loadtypes.
	* (monitor_wait):  Lengthen register dump buf, because of verbose
	Winbond monitor.
	* (monitor_fetch_register):  Report unimplemented registers as 0.
	* (monitor_read_memory):  Only do 16 byte aligned transfers
	because of formatting weirdness with the Winbond monitor.  Also,
	ignore non-hex, non-whitespace formatting between bytes (same
	monitor).
	* (monitor_load):  Clean up logic.
	* (monitor_load_srec):  Re-do xmodem support.  Move lots of it
	into send_xmodem_packet.
	* (getacknak):  Get rid of polls and timeouts.  Handle CRC
	requests from receiver.
	* (monitor_make_srec):  Efficiency improvements.  Don't call
	sprintf to output two digit hex numbers.
	* (crcinit, docrc):  New, CRC-16 support routines.
	* (send_xmodem_packet):  New routine to generate either CRC-16 or
	checksummed xmodem packets.

	* remote-est.c (est_loadtypes), rom68k-rom.c (rom68k_loadtypes):
	Reduce tables down to only the load types supported by each
	monitor.

	* w89k-rom.c  (w89k_supply_register):  Parses output of Winbond
	register dumps.
	* (w89k_loadtypes, w89k_loadprotos):  Reduce to just srec/xmodem.
	* (w89k_cmds):  Add clear all breakpoints, memory fill, and dump
	registers commands.

	* config/pa/tm-hppa.h:  Define lots register offsets needed by
	w89k-rom.c.


Thu Apr  6 17:00:46 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* Makefile.in (X11_INCLUDES): Define as empty.
	(X11_CFLAGS): Define as including $(X11_INCLUDES).
	(X11_LIB_SWITCHES): Define as empty.
	(X11_LIBS): Define as -lX11.

start-sanitize-gdbtk
	* configure.in (enable_gdbtk): If gdbtk, support the --x-includes
	and --x-libraries switches, setting the X11_INCLUDES and
	X11_LIB_SWITCHES respectively.  Instead of using a hardcoded -lX11
	in ENABLE_CLIBS, use the X11_LIB_SWITCHES and X11_LIBS variables.

	* gdbtk.c (gdbtk_init): If SIOCSPGRP is not available, don't use
	it.  This means that the stop button doesn't work, but is better
	than nothing.
end-sanitize-gdbtk

Wed Apr  5 19:57:38 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* mips-tdep.c (mips_print_register): Remove unused variable
	our_type and call to init_type.  Fixes memory leak.  Reindent function.

	* mips-tdep.c (mips_print_register), findvar.c
	(write_register_bytes): Make buffer char[] instead of unsigned
	char[].

Mon Apr  3 19:28:14 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* top.c, utils.c, main.c, defs.h: Replace error_pre_print with two
	variables: error_pre_print (for RETURN_ERROR) and quit_pre_print
	(for RETURN_QUIT).  Fixes a bug whereby typing ^C (e.g. in "maint
	print sym") could output extraneous stuff.
	* objfiles.c: Don't declare error_pre_print; defs.h does it.

Mon Apr  3 13:48:28 1995  Stu Grossman  (grossman@andros.cygnus.com)

	* monitor.h:  Add MO_GETMEM_NEEDS_RANGE flag.
	* monitor.c (monitor_read_memory):  Use previously mentioned flag
	to send proper format memory examine commands to the w89k monitor.
	Also, try to handle bizarre format of memory dump...

	* op50-rom.c w89k-rom.c:  Update to new monitor.[ch] conventions.

Sat Apr  1 03:22:20 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dbxread.c (process_one_symbol) [SOFUN_ADDRESS_MAYBE_MISSING]:
	Handle relocated symbol address.
	* partial-stab.h, case N_SO, SOFUN_ADDRESS_MAYBE_MISSING:
	Do not relocate a zero address.

Thu Mar 30 19:46:36 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/a29k/tm-a29k.h: Nuke obsolete define CONTROL_END_ADDR; it
	is nowhere used.

	* stabsread.c (read_range_type): Remove FIXME comment about
	type-id (I presume this meant a number followed by = followed by a
	type) versus type number; Per fixed it.

Wed Mar 29 09:56:04 1995  Jason Molenda  (crash@phydeaux.cygnus.com)

	* configure.in: sparc-*-sunos5* is same as sparc-*-solaris2*.

Wed Mar 29 18:30:03 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-e7000.c (why_stop): Add new kinds of strings to expect
	from the emulator.
	(e7000_wait): Add interpretations for more stop reasons,
	including warnings for write protect and cycle address errors.

Wed Mar 29 17:09:29 1995  Stu Grossman  (grossman@cygnus.com)

start-sanitize-gdbtk
	* Makefile.in (gdbtk.o):  Use X11_CFLAGS to provide alternate
	locations (per-host) for X11 include files.
	* config/pa/hppahpux.mh (XM_CLIBS):  Add -L/usr/lib/X11R5 to force
	the use of R5 libs.  (X11_CFLAGS):  Add this to indicate the locs
	of the R5 include files.
end-sanitize-gdbtk
	* monitor.c monitor.h remote-est.c rom68k-rom.c:  Add start of
	support for interrupting target.
	* monitor.c (monitor_open):  Send stop command before doing
	anything else.
	* (monitor_load_srec):  Fix record size calculation to prevent end
	of segment from getting trashed.
	* rom68k-rom.c:  Update to latest version of struct monitor_ops.
	* config/sparc/tm-sparc.h (FIX_CALL_DUMMY):  Fix byte-order
	problems.  Makes DOS hosted function calling work.
	* sparclite/crt0.s:  Define _start to make COFF happy.

Wed Mar 29 09:11:51 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* defs.h (atof): Don't provide an external declaration if atof is
	a macro.

Wed Mar 29 00:01:07 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* rs6000-tdep.c (skip_prologue):  Skip saving of LR and CR in
	the stack frame, fix typos in `st rx,NUM(r1)' and `stu r1,NUM(r1)'
	tests.

Tue Mar 28 17:04:04 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* gdbtypes.c (create_range_type):  If indextype has TYPE_FLAG_STUB
	set, set TYPE_FLAG_TARGET_STUB.
	(check_stub_type):  Recalculate TYPE_LENGTH for range type.
	* stabsread.c (read_range_type):  If index type number is followed
	by '=', back up, call read_type. and assume we have a true range.
	* gdbtypes.h (TYPE_FLAG_TARGET_STUB):  Update comment.

Mon Mar 27 22:51:54 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* alpha-nat.c, irix4-nat.c, irix5-nat.c, mipsv4-nat.c,
	sparc-tdep.c (supply_gregset, supply_fpregset):  Fill inaccessible
	registers with zero to handle recent read_register_bytes change.
	* irix4-nat.c, irix5-nat.c, mipsv4-nat.c (supply_gregset,
	fill_gregset):  Fix handling of CAUSE_REGNUM.
	* mips-nat.c (store_inferior_registers):  Handle unwritable
	registers when storing a single register.
	* config/mips/tm-irix3.h (CAUSE_REGNUM, BADVADDR_REGNUM):
	Fix definitions.

	* mdebugread.c (parse_symbol, psymtab_to_symtab_1):  Clear
	allocated mips_extra_func_info, if the debug info is corrupt,
	the PDR to fill it in might be missing.

Mon Mar 27 14:43:00 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* vx-share/regPacket.h: a new file interfacing with vxworks.

Sun Mar 26 13:22:47 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* breakpoint.c (bpstat_do_actions): Once we've executed the
	commands, set bs->commands to NULL.

Sat Mar 25 01:16:10 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* buildsym.c (patch_subfile_name):  Update last_source_file
	with the real source file name.
	* dbxread.c (end_psymtab):  Handle static functions in the
	SOFUN_ADDRESS_MAYBE_MISSING case by passing pst->filename
	to lookup_minimal_symbol.
	(process_one_symbol):  Ignore extra outermost context from
	SunPRO cc and acc.
	* stabsread.c (define_symbol):  Do not complain for SunPRO
	static variable encoding if STATIC_TRANSFORM_NAME is defined.
	* sparc-tdep.c, config/sparc/tm-sun4sol2.h
	(sunpro_static_transform_name):  Renamed from
	solaris_static_transform_name.
	* config/sparc/tm-sun4os4.h (STATIC_TRANSFORM_NAME):
	Define to sunpro_static_transform_name for acc 3.0 compiled
	executables.
	* procfs.c, config/alpha/nm-osf2.h (PROCFS_DONT_TRACE_FAULTS):
	Renamed from PROCFS_DONT_TRACE_IFAULT, don't trace any faults
	if defined.
	* procfs.c (info_proc_siginfo):  Cast sip->si_addr to
	`unsigned long' and use `lx' format for printing it.

Fri Mar 24 15:45:42 1995  Stu Grossman  (grossman@cygnus.com)

	* configure.in:  Move test for m68*-est-* before m68*-*-coff*.
	* findvar.c:  Move default def of CANNOT_STORE_REGISTER closer to
	the beginning of the code.
	* (write_register_gen):  New routine.  Analogous to
	read_register_gen.
	* (write_register_bytes):  Another rewrite!  Make it smarter about
	not updating regs with the same value.
	* monitor.c (printf_monitor readchar):  Use stderr instead of
	stdout to output debug info.  Also cleanup readchar a little.
	* (expect):  Make sure that excessive responses are null
	terminated.
	* (monitor_open):  Check for magic number in monitor_ops struct.
	Allow multiple commands as init strings.  Also, clear all
	breakpoints.
	* (monitor_resume monitor_wait):  Send a command to dump all the
	regs for those targets which don't do so when waking up after a
	continue command.
	* (monitor_wait):  Handle excessive response output better.
	* (monitor_write_memory):  Use block fill, word, and long word
	commands (if they exist) to write memory more efficiently.
	* General cleanups to use flag bits instead of individual flag
	words in monitor_ops struct.
	* (monitor_command):  Return output from command.
	* (monitor_load_srec):  Allocate buffer only once.  Use alloca.
	Wait for load response string instead of using a timeout to start
	sending S-records.  Fix bug where value of srec_frame shrinks.  If
	hashmark is set, print `-' for retransmissions.  General cleanups.
	* (monitor_make_srec):  Get rid of S-record default type kludge.
	* monitor.h:  Use seperate struct for memory and register
	read/write commands.  Memory commands can come in byte, word,
	long, and longlong forms.
	* (monitor_ops):  Change lots of fields.  Generalize some stuff.
	Put all flags into flags word.  Allow init to be a list of commands.
	Add command for clearing all breakpoints, block fill, dumping all
	registers.
	* remote-est.c:  Rewrite to use new monitor conventions.
	* config/m68k/est.mt (TDEPFILES):  Add monitor.o.
	* config/m68k/tm-est.h:  Set NUM_REGS to 18.
	* testsuite/gdb.base/break.exp:  Lots of cleanups.  Use gdb_test
	more thoroughly.

Thu Mar 23 23:20:00 1995  Jeff Law  (law@snake.cs.utah.edu)

        * somsolib.c (som_solib_add): Handle case where a shared library
        referenced by a core file has sections without the SEC_ALLOC bit
        set (eg stabs sections).

Thu Mar 23 15:07:08 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* breakpoint.c (bpstat_do_actions): For each element in the bpstat
	chain, do all the commands regardless of whether they run the
	inferior.

Wed Mar 22 19:17:06 1995  Doug Evans  <dje@cygnus.com>

	* mem-break.c (LITTLE_BREAKPOINT, BIG_BREAKPOINT): Define as
	BREAKPOINT if mono-endian.
	(break_insn): Deleted.
	(big_break_insn, little_break_insn): Define.
	(memory_insert_breakpoint): Handle bi-endian cpus.
	(BREAKPOINT_LEN): Define.
	(memory_remove_breakpoint): Use it.
	(memory_breakpoint_size): Likewise.

Tue Mar 21 17:03:17 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* sparc-stub.c: add nop after 'bg good_wim'.
	* sparcl-stub.c: ditto.

Tue Mar 21 13:34:12 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c (handle_command): Don't print TARGET_SIGNAL_0,
	TARGET_SIGNAL_UNKNOWN, or TARGET_SIGNAL_DEFAULT.

Mon Mar 20 10:09:59 1995  Jeff Law  (law@snake.cs.utah.edu)

	* hppab-nat.c (store_inferior_registers): Sync with HPUX version.

Mon Mar 20 07:34:48 1995  Stu Grossman  (grossman@cygnus.com)

	* hppah-nat.c (store_inferior_registers):  Move check for
	CANNOT_STORE_REGISTER to a better place.  Fixes ptrace I/O errors
	found by test suite during function calls, which attempts to write
	unwritable registers.

Sat Mar 18 02:02:24 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* mdebugread.c (parse_symbol):  If finishing a function without
	known parameter type info, set that from parameter symbols.
	Remove commented-out add_param_to_type support.

Thu Mar 16 16:38:03 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (process_linenos): Make sure filename we pass to
	start_subfile will cause deduce_language_from_filename to return
	the correct thing.  Reindent function to GNU standards.

Thu Mar 16 15:54:00 1995  J.T. Conklin  <jtc@rtl.cygnus.com>

	* nlm/gdbserve.c (handle_exception): #if out call to StopBell,
	  as it is not available on NetWare 3 or PIN.
	* nlm/ppc.c (StopBell): Removed.

Thu Mar 16 12:14:41 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (read_xcoff_symtab): When creating a dummy parameter
	inferred from the traceback tags, give its type the name
	"<non-float parameter>".

	* stabsread.c (rs6000_builtin_type): Recognize types -31 to -34.

Wed Mar 15 15:09:29 1995  Stu Grossman  (grossman@cygnus.com)

	* findvar.c (read_register_bytes write_register_bytes):  Make
	these routines much smarter about updating registers from the
	target, only doing so when absolutely necessary.  This really
	speeds up register modification on some remote targets.

	* monitor.c:  More cleanups.  Get rid of monitor_load_ascii_srec.
	BFD makes this unnecessary.  Lots of debugging speedups.
	* (expect):  NULL terminate return string.
	* (monitor_open	monitor_supply_register parse_register_dump
	monitor_wait monitor_fetch_register):  Switch to using GNU regexp
	library to parse multi-register displays.
	* (monitor_read_memory): Read multiple bytes (up to 16) at once.
	* (monitor_create_inferior):  Call clear_proceed_status to make run
	command notice first breakpoint.
	* (monitor_load):  Clean up.  Reset inferior_pid, set pc to start
	address and reset symbol table stuff to make loads put things into
	a fresh state.
	* (monitor_load_srec):  Lower sleep time to 1 second.

	* monitor.h (struct monitor_ops):  Add register_pattern and
	supply_register to monitor_ops.

	* rom68k-rom.c:  Add new support for handling register dumps.
	* config/m68k/tm-m68k.h:  Define D0_REGNUM and A0_REGNUM for register
	dump handling.

Wed Mar 15 15:18:27 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* utils.c, defs.h (putchar_unfiltered, fputc_unfiltered): Make
	argument be an int, not a char.  Using a prototype followed by an
	old-style function definition in a case where an argument is
	widened is a GCC-ism not supported by the native AIX compiler.

Wed Mar 15 12:22:35 1995  J.T. Conklin  <jtc@rtl.cygnus.com>

	* nlmstub.def: Removed, this was moved to nlm/gdbserve.def 
	  long ago.

	* configure.in (alpha-*-netware*): Removed configuration.
	* config/alpha/{alpha-nw.mt, gdbserve.mt, tm-alphanw.h}: Removed.
	* nlm/{README-ALPHA-NETWARE, aio.h, alpha-io.S, alpha-regdef.h,
	  alpha.c, alpha.h, altdebug.h}: Removed.

	* nlm/gdbserve.c (main): Add support for processing BOARD=
	  argument, deprecate NODE=.

Wed Mar 15 10:58:26 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* c-exp.y (yylex): Make an empty character constant an error.

Tue Mar 14 15:00:54 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* valops.c (value_arg_coerce):  Do possible value_coerce_array
	before determining type argument to value_cast.

Tue Mar 14 10:41:41 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* remote-es.c: Replace ignore with 0.

Tue Mar 14 05:52:36 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* valops.c (value_repeat), eval.c (evaluate_subexp_standard):
	If VALUE_REPEATED is already set, just error out.

	* valops.c (value_cast, value_slice), parse.c (follow_types): Add
	FIXME-type-allocation comments.

	* gdbtypes.h (struct type): Fix comment about what units the
	TYPE_LENGTH is in.

Mon Mar 13 18:27:25 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* ch-valprint.c (annotate.h): Include.
	* eval.c (evaluate_subexp_standard): Remove unused variable.
	(calc_f77_array_dims): Add parens to expression.
	* f-exp.y (yylex): Add parens to expression, remove unused label.
	* f-lang.h (calc_f77_array_dims): Declare.
	* f-valprint.c (f_val_print): Remove unused variables.

Mon Mar 13 15:25:47 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* alpha-tdep.c (find_proc_desc): If pdr.framereg field is -1, don't
	use the PDR, just examine prologues instead.

start-sanitize-arc
Fri Mar 10 16:13:18 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* config/tm-arc.h: Change arc register names.
end-sanitize-arc

Fri Mar 10 02:49:40 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	Fix problems with infinite recursion when printing a class
	that contains a static instance of the class.
	* cp-valprint.c (dont_print_vb_obstack):  Renamed from
	dont_print_obstack, made static.
	(dont_print_statmem_obstack):  New obstack, controls printing
	of static member classes.
	(_initialize_cp_valprint):  Initialize it.
	(cp_print_static_field):  New function, handles printing of
	static members.
	(cp_print_value_fields):  New parameter dont_print_statmem to
	handle recursive printing of static member classes, use
	cp_print_static_field to handle printing of static members.
	* c-valprint.c (cp_print_value_fields):  Update prototype and
	call to include additional dont_print_statmem parameter.
	* c-valprint.c, f-valprint.c (dont_print_obstack):  Remove unused
	extern declaration.

	* alpha-tdep.c, findvar.c, infptrace.c:  Include <string.h>.

	* config/alpha/tm-alpha.h (FRAME_FIND_SAVED_REGS):  Call
	alpha_find_saved_regs if fi->saved_regs is still NULL.

	* elfread.c (elf_symtab_read):  Ensure that the filename field
	of a minsym is nonempty. Ignore solib trampoline symbols from
	the main symbol table, they might have a bogus value.

	* procfs.c (set_proc_siginfo), config/alpha/alpha-osf2.mh:
	Fix typos in comments.

Thu Mar  9 17:19:47 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* mdebugread.c (parse_symbol, psymtab_to_symtab_1): Initialize
	pdr.framereg field of MIPS_EFI_SYMBOL_NAME symbol to -1.  That way
	we know whether the PDR ever got set.
	* mips-tdep.c (find_proc_desc): If pdr.framereg field is -1, don't
	use the PDR, just examine prologues instead.

Wed Mar  8 23:35:10 1995  Jeff Law  (law@snake.cs.utah.edu)

	* somsolib.c (som_solib_section_offsets): Get offset of text
	section right. 

Wed Mar  8 16:12:21 1995  Stu Grossman  (grossman@cygnus.com)

start-sanitize-gdbtk
	* gdbtk.c (gdb_get_breakpoint_info):  Return error if breakpoint
	type is not bp_breakpoint.
end-sanitize-gdbtk

	* source.c (forward_search_command reverse_search_command):  Set
	convenience variable $_ to be the line # of the match.
	* symtab.c (decode_line_1):  Allow convenience variables to be
	used in line specs (for breakpoints and such).

Wed Mar  8 12:51:00 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* Makefile.in (VERSION): Bump to 4.14.1.
	* NEWS, README: Update for 4.14.
	* i386v-nat.c (i386_insert_aligned_watchpoint): Fix declaration.
	(i386_insert_nonaligned_watchpoint): Call aligned instead of
	generic watchpoint insertion.

Tue Mar  7 19:26:10 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* valops.c (value_slice):  Do COERCE_VARYING_ARRAY.

Tue Mar  7 00:23:47 1995  Stu Grossman  (grossman@cygnus.com)

	* monitor.c, array-rom.c, monitor.h, rom68k-rom.c:  Move target_ops
	into monitor.c.
	* monitor.c (monitor_create_inferior):  Allow run command to start
	program.

	* monitor.c (monitor_load):  Set PC to start address when done
	loading.

	* array-rom.c, monitor.h, rom68k-rom.c:  Clean up target_ops.
	Remove ref to monitor_create_inferior.

	* monitor.c:  More general cleanups.  Add prototypes, remove
	unused routines.  Fix bug with wrong number of args to error().

	* main.c (main):  Don't start up GUI when running under gdb mode
	in emacs.

	* Makefile.in:  Add rules for monitor.o and rom68k-rom.o to make
	Sun make (with VPATH) work...

	* monitor.c, monitor.h, rom68k-rom.c:  Serious cleanup to make IDP
	(rom68k) target work right.
	* array-rom.c, op50-rom.c, w89k-rom.c:  Partial updates to new
	monitor.c interface.  More work needs to be done here.
	* config/m68k/tm-monitor.h:  Change DECR_PC_AFTER_BREAK to 0 to
	match the IDP monitor.  Also, set NUM_REGS to 18 cuz there's no
	floating-point for this card.

	* serial.h, ser-go32.c, ser-go32-para.c, ser-mac.c, ser-tcp.c,
	ser-unix.c:  Add SERIAL_SETSTOPBITS to set the number of stopbits
	(needed for IDP board?!?!?).

	* defs.h, utils.c, remote-hms.c, remote-pa.c, remote.c:  Fix defs
	and usage of fputc_unfiltered and putchar_unfiltered.  Eliminate
	putc_unfiltered (it's superfluous).

	* command.h, command.c, top.c:  Add var_enum command type.  It's
	like var_string but allows only only one of the specified strings.

Mon Mar  6 15:03:59 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* valops.c (value_cast): Don't use backslash newline--pre-ANSI
	compilers (such as SunOS4 /bin/cc) don't generally support it
	except in some contexts.

Fri Mar  3 17:42:48 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* valops.c (value_cast):  Check for cast to array type *before*
	we coerce array to pointer (in case arg2 is already array).

	* valops.c (call_function_by_hand):  Set using_gcc to 2 if using
	gcc2.  Needed for REG_STRUCT_HAS_ADDR to work on sparc.
	Also check REG_STRUCT_HAS_ADDR for union, array and string types.

	* valops.c (call_function_by_hand):  Re-arrange code for pushing
	paramaters on the stack so we can do better STACK_ALIGN.

	* valops.c (call_function_by_hand):  Call error if the number
	of arguments is fewer than parameter types in function type.

Fri Mar  3 17:13:05 1995  Doug Evans  <dje@canuck.cygnus.com>

	* sparc-tdep.c (sparc_extract_struct_value_address): Move
	sparc64 support to here.
	(sparc64_extract_struct_value_address): Deleted.
	(dump_ccreg): Add a prototype so long long arg -> int.
	* sparc/tm-sp64.h (USE_STRUCT_CONVENTION): Define.
	(EXTRACT_STRUCT_VALUE_ADDRESS): Delete.

Fri Mar  3 15:12:12 1995  Jeff Law  (law@snake.cs.utah.edu)

	* hpread.c (hpread_record_lines): New argument "offset".  All
	callers changed.  Use it to handle dynamic address relocation.
	(hpread_build_psymtabs): Adjust texthigh as we read each function
	debug symbol.  Fix computation of texthigh.
	(hpread_read_subrange_type): Work around macro bugs in HP's
	compilers.
	(hpread_process_one_debug_symbol): Correctly map source lines.

	* somread.c (check_strange_names): Filter names emitted by the HP
	compiler when generating PIC code.

	* valops.c (value_struct_elt_for_reference): Work around macro
	bugs in HP's compilers.
	* c-exp.y (block): Likewise.

Fri Mar  3 12:27:28 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* rs6000-tdep.c (push_dummy_frame): Fix order of arguments to
	store_address.

	* utils.c [_AIX]: Include stddef.h instead of #defining size_t.

Fri Mar  3 12:33:24 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* rs6000-tdep.c (skip_prologue): Skip multiple stores of the saved
	registers that GCC emits on the PowerPC by default in addition to
	the store multiple instruction used on the Power series.

Fri Mar  3 00:54:58 1995  Doug Evans  <dje@canuck.cygnus.com>

	* sparc-tdep.c (decode_asi): New function.
	(sparc_print_register_hook): Pretty print more v9 registers.
	* sparc/tm-sp64.h (REGISTER_NAMES): Fix some typos.

Thu Mar  2 22:20:22 1995  Doug Evans  <dje@canuck.cygnus.com>

	* dwarfread.c (struct dieinfo): Use CORE_ADDR for at_{low,high}_pc.
	(target_to_host): Change result type to CORE_ADDR.

Thu Mar  2 15:13:04 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* rs6000-tdep.c: Fix byte-swapping sins.

Thu Mar  2 16:48:45 1995  Michael Meissner  <meissner@cygnus.com>

	* rs6000-tdep.c (branch_dest): Minor code cleanup, don't share
	code between branch unconditional and branch conditional cases.

Wed Mar  1 09:41:26 1995  Doug Evans  <dje@canuck.cygnus.com>

	Various changes for sparc64.
	* sparc-tdep.c (NUM_SPARC_FPREGS): Define.
	(SPARC_INTREG_SIZE): Define.
	(*): Use SPARC_INTREG_SIZE instead of REGISTER_RAW_SIZE (intreg)
	where appropriate.
	(enum branch_type): New value `done_retry'.
	(isbranch): Renamed from isannulled.  All callers changed.
	Support new sparc64 branch insns.
	(single_step): Handle done_retry.
	(sparc_extract_struct_value_address): Don't assume 4 byte regs.
	(get_saved_register): Likewise.
	(sparc_push_dummy_frame): Likewise.
	(sparc_frame_find_saved_regs): Likewise.
	(sparc_pop_frame): Likewise.  Don't refer to FPS_REGNUM, CPS_REGNUM,
	or PS_REGNUM if not sparc64.  sparc64 has 64 fp regs.
	(sparc64_extract_struct_value_address): New function.
	(dump_ccreg, sparc_print_register_hook): Likewise.
	* sp64-tdep.c: Deleted.
	* sparc/tm-sp64.h (GDB_TARGET_IS_SPARC64): Define.
	(NUM_REGS): Reduce by 2, cle/tle are in the pstate reg.
	(CC_HAS_LONG_LONG): Define.
	(REGISTER_NAMES): Delete cle/tle and reorganize.
	(PS_REGNUM, FPS_REGNUM, CPS_REGNUM): Delete, they're ifdef'd out of
	sparc-tdep.c now.
	(REGISTER_BYTES): Update.
	(REGISTER_CONVERT_TO_VIRTUAL, REGISTER_CONVERT_TO_RAW): Delete.
	(EXTRACT_RETURN_VALUE): Delete.  Use definition in tm-sparc.h.
	(NO_SINGLE_STEP): Likewise.
	* sparc/tm-sparc.h (EXTRACT_VALUE_RETURN): Don't assume 4 byte regs.
	* sparc/sp64.mt: Move simulator support ...
	* sparc/sp64sim.mt: ... to here.

Wed Mar  1 13:14:42 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* remote-vx960.c: new file for target specific register packaging.
	* remote-vx68.c: ditto.
	* config/i960/vxworks960.mt: add remote-vx960.o.
	* config/m68k/vxworks68.mt: add remote-vx68.o.

Wed Mar  1 13:42:49 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* remote.c (remote_wait): Make calls to strtol be type correct by
	passing the address of a char * pointer instead of an unsigned
	char *.

	* rs6000-tdep.c (push_dummy_frame): Cast sp to char * when calling
	write_memory to make things type correct.

Wed Mar  1 12:17:31 1995  Michael Meissner  <meissner@cygnus.com>

	* ch-exp.y, c-exp.y, f-exp.y, m2-exp.y (yy defines): Support the
	standard Linux yacc by adding more names to be redefined with a
	prefix.

Tue Feb 28 22:55:47 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* hppa-tdep.c (pa_print_registers), monitor.c: Use
	extract_unsigned_integer and friends, not SWAP_TARGET_AND_HOST.
	* defs.h, findvar.c: Move SWAP_TARGET_AND_HOST back to findvar.c.
	Rename it to SWAP_FLOATING to make it clear it is no longer for
	integers.

Tue Feb 28 14:38:39 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* defs.h (SWAP_TARGET_AND_HOST): check endianess at runtime not
	compile time.

start-sanitize-arc
	* arc-tdep.c (_initialize_arc_tdep): set tm_print_insn according to 
	processor.
	* remote-arc.c (arc_wait): when a processor stops, stop other two
	processors too.
	* remote-arc.c (switch_command): switch tm_print_insn.
end-sanitize-arc

	* vx-share/ptrace.h: merge in WRS new ptrace requests.

	* defs.h: fix a syntax error.

	* a29k-tdep.c (get_longjmp_target): add this function, from WRS.
	* remote-vx.c: move read_register and write_register out to 
	target specific files.
	* remote-vx29k.c (get_fp_contnets): add this function, from WRS.

	* defs.h: define SWAP_TARGET_AND_HOST macro.
	* findvar.c, monitor.c, hppa-tdep.c: remove definition of
	SWAP_TARGET_AND_HOST.

Tue Feb 28 08:31:40 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* alpha-tdep.c (find_proc_desc): Only attempt to set
	PROC_LOCALOFF (found_heuristic) if found_heuristic is non-NULL.

Mon Feb 27 11:56:32 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* monitor.c: General gcc -Wall lint cleanup and reformat.
	(monitor_command): If no args, send an empty command.

Thu Feb 23 21:07:25 1995  Stu Grossman  (grossman@cygnus.com)

	* monitor.c (monitor_load_ascii_srec):  Add a one second sleep
	after send LOAD_CMD to prevent loss of first S-record.

Tue Feb 21 20:48:42 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* valops.c (call_function_by_hand):  Set using_gcc to 2 if gcc-2.
	Call error if too few arguments.
	If REG_STRUCT_HAS_ADDR (structs passed by invisible reference),
	copy and convert to reference *before* we calculate alignment.
	Also, make sure structs allocated for return values and invisible
	reference don't violate STACK_ALIGN.

Tue Feb 21 23:29:59 1995  Per Bothner  <bothner@rtl.cygnus.com>

	* ch-exp.y (expression_conversion):  Recognize 'ARRAY () TYPE (EXPR)'
	(same as C's '(TYPE[])EXPR')

Tue Feb 21 11:47:26 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* top.c (print_gdb_version): Update the year.

Sun Feb 19 14:31:57 1995  Jim Kingdon  <kingdon@rtl.cygnus.com>

	* Makefile.in (CC_FOR_TARGET, CXX_FOR_TARGET): Look for newlib in
	`..' not in `../..'.

Sun Feb 19 11:05:28 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* procfs.c (unconditionally_kill_inferior):  Don't issue a PIOCKILL
	in addition to a PIOCSSIG to kill the inferior.

Thu Feb 16 15:06:12 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* parse.c (follow_types):  Given (TYPE[]) (i.e. with no length),
	create a 0-length array type, and set BOUND_CANNOT_BE_DETERMINED.
	* valops.c (value_cast):  If a cast like (TYPE[])VALUE (i.e. array
	of unknown length) use sizeof(VALUE)/sizeof(TYPE) as the length.
	* c-typeprint.c (c_type_print_varspec_suffix):  If array length
	is 0, print it, but not if upper_bound is BOUND_CANNOT_BE_DETERMINED.

Thu Feb 16 16:06:50 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* dcache.c (insque, remque): Rewrite Linux support.

Wed Feb 15 12:33:20 1995  Michael Meissner  <meissner@tiktok.cygnus.com>

	* config/powerpc/tm-ppc-eabi.h (TEXT_SEGMENT_BASE): Define as 1.

	* dcache.c (insque, remque): If compiling in standard C on Linux,
	protect insque and remque with macros to cast the pointer
	arguments to the proper type.

Tue Feb 14 17:16:41 1995  Stu Grossman  (grossman@cygnus.com)

	* annotate.c, breakpoint.c, defs.h, top.c:  Replace
	enable/disable_breakpoint_hook with modify_breakpoint_hook.
start-sanitize-gdbtk
	* gdbtk.c: Ditto.
	* gdbtk.c: General cleanups, get rid of unused variables.  Redo
	handling of stdout/stderr to just return output as the result of
	the tcl command that caused the output.  Cleanup -Wall stuff.
	* (breakpoint_notify):  Now returns just action and breakpoint
	number.
	* (gdb_get_breakpoint_list):  New routine.  Does the obvious.
	* (gdb_get_breakpoint_info):  Mostly derived from the old
	breakpoint_notify, but returns lots more info.
	* (dsprintf_append_element):  Helper routine, works like printf,
	but appends a tcl element onto the specified DString.  Good for
	building up lists as return values.
	* (gdbtk_enable/disable_breakpoint):  Go away.  Replaced with
	gdbtk_modify_breakpoint.
	* (*many routines*):  Use new result protocol.
	* (call_wrapper):  Make sure that recursive calls don't trash results.
	* gdbtk.tcl:  New windows, autocmd, and breakpoints.
	* (gdbtk_tcl_fputs):  Don't use $current_output_win redirection
	anymore.  It's not needed (in fact, this routine may not be needed
	anymore).
	* (gdbtk_tcl_breakpoint):  Change to reflect new breakpoint
	notification protocol.
	* (gdbtk_tcl_busy gdbtk_tcl_idle):  Straighten out buttons, remove
	catches.
	* (interactive_cmd):  Use this wrapper around button invocations
	of many commands.  This will catch errors and put the results into
	the command window.  It also updates all the other windows.
	* Also, change reliefs of most things to sunken.  This actually
	looks better.
	* (create_file_win):  Fix margin binding to allow breakpoints to
	work again.
	* (create_asm_win):  Use return value of gdb_disassemble instead
	of implicit I/O to the command window.	
	* (create_command_window):  Use new result protocol to get output
	from commands.
end-sanitize-gdbtk

Tue Feb 14 16:58:07 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* expression.h: Move declaration of evaluate_subexp_with_coercion
	from here...
	* value.h: ...to here.
	* expression.h: Don't include value.h

Tue Feb 14 11:46:07 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* expression.h: Move include of value.h until after declaration of
	enum exp_opcode.

Sun Feb 12 13:47:30 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-e7000.c: Comprehensive cleanup; removal of dead code,
	simplify code, declare things, format to standards.
	(inferior.h, value.h, command.h, remote-utils.h): Include.
	(e7000_login): Rename to e7000_login_command.
	(e7000_ftp): Rename to e7000_ftp_command.
	(e7000_drain): Rename to e7000_drain_command.

	* irix5-nat.c (string.h): Include near beginning of file.

Sun Feb 12 12:36:38 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* valops.c (value_arg_coerce): Use VALUE_TYPE not SYMBOL_TYPE on
	arg, it is a value not a symbol.

	gcc -Wall lint:
	* eval.c: Move declaration of evaluate_subexp_with_coercion from here..
	* expression.h: ..to here.
	* expression.h: Include value.h.
	* ch-lang.c (evaluate_subexp_chill): Add default case in switch.

Sun Feb 12 11:03:47 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* language.h (struct language_defn):  New field evaluate_exp.
	* c-lang.c (c_language_defn, cplus_language_defn, asm_langauge_defn),
	f-lang.c (f_language_defn), language.c (unknown_language_defn,
	auto_language_defn, local_language_defn), m2-lang.c (m2_language_defn):
	Set evaluate_exp to evaluate_subexp_standard.
	* ch-lang.c (evaluate_subexp_chill):  New function.  Chill-specific
	support for MULTI_SUBSCRIPT.
	(chill_language_defn):  Set evaluate_exp to evaluate_subexp_chill.
	* eval.c (enum noside):  Move from here ....
	* expression.h (enum noside):  ... to here.
	(evaluate_subexp_standard):  New prototype.
	* eval.c (evaluate_subexp):  Renamed to evaluate_subexp_standard.
	Removed lo-longer-needed test for chill_varying_type.
	(evaluate_subexp):  New.  Calls exp->language_defn->evaluate_exp.

	* ch-exp.y (maybe_expression_list):  New non-terminal.
	(primitive_value):  Allow empty parameter list.

Sun Feb 12 10:02:16 1995  Per Bothner  <bothner@cygnus.com>

	* buildsym.c (finish_block):  If finishing a function without known
	parameter type info, set that from parameter symbols.
	* c-typeprint.c (c_type_print_varspec_suffix):  For TYPE_CODE_FUNC,
	print parameter types, if available.
	* ch-typeprint.c (chill_type_print_base):  Likewise.

	* gdbtypes.h (struct type):  Remove function type field.
	(TYPE_FUNCTION_TYPE):  Remove macro.  We can't as simply re-use
	function types now that we're also storing parameter types.
	And the payoff is much less.
	* gdbtypes.c (make_function_type):  Don't use/set TYPE_FUNCTION_TYPE.
	(recursive_dump_type):  Don't print TYPE_FUNCTION_TYPE.
	* dwarfread.c (read_subroutine_type):  Don't set TYPE_FUNCTION_TYPE.

	* valops.c (value_arg_coerce):  Now takes param_type argument.
	(call_function_by_hand):  Convert arguments with value_arg_coerce
	early, and overwrite original args with converted args.
	No longer need multiple calls to value_arg_coerce.
	(value_arg_push):  Removed.
	* hppa-tdep.c (hppa_push_arguments):  No longer call value_arg_coerce.
	* mips-tdep.c (mips_push_arguments):  Likewise.
	* alpha-tdep.c (alpha_push_arguments):  Likewise.
	* rs6000-tdep.c (push_arguments, ran_out_of_registers_for_arguments):
	Likewise.
	* value.h (value_arg_coerce):  Remove declaration.  (It's now static.)

	* valops.c (value_cast):  Do COERCE_VARYING_ARRAY after COERCE_REF.

	* symtab.c (add_param_to_type):  Remove (commented-out) function,
	since that functionality has been re-written.
	* coffread.c:  Remove commented-out add_param_to_type support.
	* mdebugread.c (parse_symbol):  Likewise.
	* stabsread.c (define_symbol):  Likewise.

Sun Feb 12 09:03:47 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* buildsym.c (start_subfile): Set language for f2c like for cfront.

Thu Feb  9 20:20:11 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* op50n-rom.c: Add the control registers.

Thu Feb  9 15:46:39 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* Makefile.in (CLIBS): Add $(LIBIBERTY) before, in addition to
	after, any host/target/native libraries.
	* dcache.c (insque, remque): Remove declarations.
	* gdbtypes.h (type_code): Remove trailing comma.

	From Peter Schauer:
	* xcoffread.c (read_xcoff_symtab) [C_HIDEXT]: Move #ifdef
	STATIC_NODEBUG_VARS inside case.

Thu Feb  9 07:43:41 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* config/sparc/tm-sun4sol2.h: Define STATIC_TRANSFORM_NAME.
	* partial-stab.h: Call it.
	* stabsread.c (define_symbol) [STATIC_TRANSFORM_NAME]: Call
	STATIC_TRANSFORM_NAME to get the name and use minimal symbols to
	get the address.
	* sparc-tdep.c (solaris_static_transform_name): New function.

Thu Feb  9 12:09:09 1995  Jeff Law  (law@snake.cs.utah.edu)

	* somread.c (som_symtab_read): Handle dynamic relocation for both
	text and data symbols.
	(som_symfile_offsets): If objfile is a shared library, then get
	text and data offsets from the shared library structures.
	* somsolib.c (som_solib_add): Copy the bfd pointer from the
	objfile rather than reopening the file again.
	(som_solib_section_offsets): New function.
	* somsolib.h (som_solib_section_offsets): Declare.

Wed Feb  8 20:32:18 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* config/sparc/tm-sun4sol2.h, dbxread.c: Rename
	N_SO_ADDRESS_MAYBE_MISSING to SOFUN_ADDRESS_MAYBE_MISSING.
	* symtab.h (minimal_symbol) [SOFUN_ADDRESS_MAYBE_MISSING]: Add
	filename field.
	* elfread.c (record_minimal_symbol_and_info),
	minsyms.c, symtab.h (prim_record_minimal_symbol_and_info): Return
	newly created symbol.
	* elfread.c (elf_symtab_read) [SOFUN_ADDRESS_MAYBE_MISSING]:
	Set filename field of minimal symbol.
	* symmisc.c (dump_msymbols) [SOFUN_ADDRESS_MAYBE_MISSING]:
	Print filename field.
	* minsyms.c, symtab.h (lookup_minimal_symbol): New arg sfile.
	* symm-tdep.c, somsolib.c, hppa-tdep.c, c-exp.y, f-exp.y,
	m2-exp.y, nindy-tdep.c, m3-nat.c, irix5-nat.c, hpread.c,
	os9kread.c, breakpoint.c, alpha-tdep.c, valops.c, symtab.c,
	printcmd.c, dbxread.c: Change callers to pass NULL for sfile.
	* dbxread.c (process_one_symbol) [SOFUN_ADDRESS_MAYBE_MISSING]:
	Find address of function from minimal symbols.
	* partial-stab.h, case 'f', 'F': Call find_stab_function_addr
	instead of getting pst->textlow from the stab.
	* minsyms.c (find_stab_function_addr): New function.

Wed Feb  8 19:19:56 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* monitor.c: Fix so all the output shows up in the GUI command
	window.

Mon Feb  6 18:50:59 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* i386-tdep.c (_initialize_i386_tdep): Put void decl on separate
        line, so init.c generation works correctly.
start-sanitize-arc
	* arc-tdep.c (_initialize_arc_tdep): Ditto.
end-sanitize-arc

Mon Feb  6 14:44:36 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* config/mips/idt.mt: Add support for the lsi33k target.
	* config/sparc/sun4sol2.mh: Add support for ser-tcp.
	* array-rom.c: Finish the rest of the support commands needed by
	GDB.
	* mips-tdep.c: Add LSI33k register names and processor type.

start-sanitize-gdbtk
Sun Feb  5 20:32:44 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* gdbtk.c (gdb_disassemble): Deference pointer to function before
	calling it (pre-ANSI compilers generally require this).

end-sanitize-gdbtk
Sat Feb  4 13:29:52 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* config/m68k/est.mt (TDEPFILES): Remove m68k-pinsn.o.

Fri Feb  3 16:47:31 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* ser-go32-para.c (dos_read): fix syntax errors.

Fri Feb  3 11:19:20 1995  Stu Grossman  (grossman@cygnus.com)

	* core.c (dis_asm_read_memory), defs.h, top.c: Get rid of
	dis_asm_read_memory_hook.  We can now call the disassemblers
	directly and have no need for this hook anymore.
start-sanitize-gdbtk
	* gdbtk.c (gdb_disassemble): Ditto.
end-sanitize-gdbtk
	* defs.h, printcmd.c: Make print_insn be static.

	* ser-go32.c (dos_comisr):  Make this 8 bit clean.
	* (dos_open dos_close):  Allow multiple opens to the same device.
	Use a ref count to prevent unwanted deallocations.
	* sparcl-tdep.c:  Put #ifdefs around all socket stuff to make GO32
	happy.
	* (sparclite_ops):  Switch to download_stratum.
	* target.h (enum strata):  Move download_stratum before
	process_stratum so that executable targets get pushed on top of
	download targets.

Thu Feb  2 19:02:45 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* array-rom.c: Remove the non GDB remote protocol config stuff.

	* monitor.c: All reading/writing functions for memory and
	registers work.

Thu Feb  2 16:11:04 1995  Kung Hsu  <kung@mexican.cygnus.com>

start-sanitize-arc
	* config/arc/arc.mt: new target makefile for arc processor.
	* config/arc/tm-arc.h: new target header for arc processor.
	* config/arc/go32.mh: new go32 host makefile for arc processor.
	* config/arc/xm-go32.h: new go32 host header for arc processor.
	* arc-tdep.c: new target dependent codes for arc processor.
	* remote-arc.c: new file for arc-specific protocol through
	parallel line.
end-sanitize-arc
	* ser-go32-para.c: new file for go32 parallel port communication.

Thu Feb  2 13:58:40 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* Makefile.in (VERSION): Bump to 4.13.2.

Thu Feb  2 07:27:56 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	Fix compiler warnings:
	* remote-e7000.c (printf_e7000debug): Rename to puts_e7000debug
	and have the caller do the sprintf.  Saves us from varargs hell.
	(normal): Define before use.
	* remote-e7000.c: Reindent a few things.

Wed Feb  1 21:16:42 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* f-typeprint.c (f_type_print_varspec_suffix):  Print array index
	ranges in reverse order.
	* f-valprint.c (f77_create_arrayprint_offset_tbl):  Fix calculation.

	* eval.c (evaluate_subscript):  Don't call value_subscript, since
	it adjusts for lower bound and enforces ranges.

	* expression.h (exp_code):  Remove MULTI_F77_SUBSCRIPT, OP_F77_SUBSTR.
	* eval.c, parse.c:  Removed uses of removed opcodes.
	* eval.c (evaluate_subexp):  Clean up handling of
	OP_UNDETERMINED_ARGLIST (no backtracking, more general).

	* f-valprint.c (f_val_print):  Print TYPE_CODE_STRING using
	LA_PRINT_STRING, and not val_print_string (which reads from inferior).

	* ch-lang.c (chill_is_varying_struct), ch-lang.h:  Remve function
	duplicate function made redundant by chill_varying_type.

	Re-write of f77 string and complex number support:

	* language.h (struct language_defn):  New fields string_lower_bound
	and string_char_type.
	* c-lang.c (c_language_defn, cplus_language_defn, asm_language_defn),
	language.c (unknown_language_defn, auto_language_defn,
	local_language_defn), m2-lang.c (m2_language_defn), f-lang.c
	(f_language_defn), ch-lang.c (chill_language_defn):  Set new fields.
	* gdbtypes.c (create_string_type):  Use new string_char_type field.
	* valops.c (value_string):  Use new string_lower_bound field.

	* defs.h (TARGET_COMPLEX_BIT, TARGET_DOUBLE_COMPLEX_BIT):  Removed.
	* f-lang.c (f_create_fundamental_type, _initialize_f_language),
	m2-lang.c (m2_create_fundamental_type),
	gdbtypes.c (_initialize_gdbtypes):  Set TYPE_TARGET_TYPE of complex
	types.  Set their TYPE_CODEs to TYPE_CODE_COMPLEX.
	* mdebugread.c (mdebug_type_complex, mdebug_type_double_complex):
	Removed.  Use builtin_type_complex and builtin_type_double_complex.

	* gdbtypes.h (enum type_code):  Removed TYPE_CODE_LITERAL_STRING
	and TYPE_CODE_LITERAL_COMPLEX.
	* c-typeprint.c, f-typeprint.c, f-valprint.c, eval.c:  Removed uses of
	TYPE_CODE_LITERAL_STRING and TYPE_CODE_LITERAL_COMPLEX.
	* gdbtypes.c, gdbtypes.h (f77_create_literal_complex_type,
	f77_create_literal_string_type):  Removed.
	* value.h (VALUE_LITERAL_DATA, VALUE_SUBSTRING_MEMADDR,
	VALUE_SUBSTRING_MYADDR):  Removed.

	* expression.h (enum exp_opcode):  Rename OP_F77_LITERAL_COMPLEX to
	OP_COMPLEX.
	* parse.c:  Update accordingly.

	* f-valprint.c (f77_print_cmplx):  Removed.
	(f_val_print case TYPE_CODE_COMPLEX):  Re-write to use print_floating.

	* f-exp.y (STRING_LITERAL):  Use OP_STRING instead of OP_ARRAY.
	* eval.c (evaluate_subexp):  For case OP_ARRAY, don't call
	f77_value_literal_string.
	* valops.c, value.h (f77_value_literal_string, f77_value_substring,
	f77_assign_from_literal_string, f77_assign_from_literal_complex):
	Removed.
	(value_assign):  No longer need to handle literal types.
	* valops.c (f77_value_literal_complex), value.h:  Re-written and
	renamed to value_literal_complex.  Last arg is now a (complex) type.
	* valops.c (f77_cast_into_complex):  Re-written and renamed to
	cast_into_complex.
	* eval.c (evaluate_subexp):  Update accordingly.

	* ch-valprint.c (chill_val_print):  On TYPE_CODE_STRING, don't
	print address for non-'s'-formats.
	* ch-typeprint.c, ch-valprint.c:  Use chill_varying_type instead
	of chill_is_varying_struct.

Wed Feb  1 13:27:33 1995  Stan Shebs  <shebs@andros.cygnus.com>

	gcc -Wall lint.
	* alpha-tdep.c (alpha_in_lenient_prologue): Comment out.
	(after_prologue): Remove unused local b.
	* procfs.c (thread.h): Include.
	(pr_flag_table, pr_why_table, faults_table, siginfo_table): Use
	nested braces in initializer.
	* top.c (initialize_targets, initialize_utils): Declare.
	(locate_arg, insert_args): Add parens around tested assignments.
	* remote-utils.c (sr_scan_args): Remove decl of strtol.
	* remote.c (thread.h): Include.
	(remote_wait): Remove unused local p2.
	* sparc-tdep.c (fill_gregset, fill_fpregset): Remove decls of
	registers array.

	defs.h (stdlib.h): Include.
	(exit, perror, atoi, qsort, memcpy, memcmp): Don't declare.
	(fclose, atof, malloc, realloc, free, strchr, strrchr, strstr,
	strtok,	strerror): Don't specify parameter types in declaration.

Wed Feb  1 12:23:57 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* ch-exp.y (value_string_element, string_primitive_value,
	start_element, left_element, right_element, slice_size,
	lower_element, upper_element, first_element):  Removed.
	(value_string_slice, value_array_slice):  Replaced by ...
	(slice):  New non-terminal, with working slice support.
	(primitive_value_lparen, rparen):  New non-terminals.
	(maybe_tuple_elements):  New non-terminal, to allow empty tuples.
	(idtokentab):  Added "up".

	* value.h (COERCE_VARYING_ARRAY):  New macro.
	* valarith.c (value_subscript):  Use it.
	* valops.c (value_cast):  Likewise.  Also, do nothing if already
	correct type, and allow converting from/to range to/from scalar.

	* valops.c, value.h (varying_to_slice, value_slice):  New functions.
	* eval.c (OP_ARRAY):  Add cast for array element.
	* expression.h (TERNOP_SLICE, TERNOP_SLICE_COUNT):  New exp_opcodes.
	* valops.c (chill_varying_type):  Moved function frp, here ...
	* gdbtypes.c (chill_varying_type), gdbtypes.h: ... to here.
	* parse.c (length_of_subexp, prefixify_subexp):  Add support
	for TERNOP_SLICE, TERNOP_SLICE_COUNT.
	* expprint.c (print_subexp, dump_expression):  Likewise.
	* eval.c (evaluate_subexp):  Likewise.

	* eval.c (evaluate_subexp case MULTI_SUBSCRIPT):  Don't call
	value_x_binop on a Chill varying string.

Tue Jan 31 13:51:53 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* config/m68k/monitor.mt,
	config/pa/{hppabsd.mt,hppahpux.mt,hppaosf.mt,hppapro.mt}: Put
	depfiles in TDEPFILES not REMOTE_O.

Tue Jan 31 11:14:44 1995  Steve Chamberlain  <sac@splat>

	From nigel@algor.co.uk.
	* ser-go32.c (dos_close): Don't crash if scb null.
	(dos_sendbreak): New function.
	(dos_ops): Point to dos_sendbreak.
	(dos_info): Calculate COM number correctly.

Tue Jan 31 09:40:11 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* xcoffread.c (process_xcoff_symbol): Use new variables
	func_symbol_type and var_symbol_type as type of functions and
	variables which don't have any stabs associated with them.
	Reindent most of function.
	(_initialize_xcoffread): Initialize *_symbol_type.

	* xcoffread.c (read_xcoff_symtab): Reindent most of function.
	Put C_HIDEXT symbols in the minimal symbols, rather than ignoring
	them (this part commented out as I didn't quite get it to work).
	(cs_to_section, find_targ_sec): New functions, to support above code.
	* xcoffread.c (RECORD_MINIMAL_SYMBOL): Only skip '.' if it is
	actually present.

Mon Jan 30 17:34:24 1995  Stu Grossman  (grossman@cygnus.com)
start-sanitize-gdbtk
	* gdbtk.tcl (create_file_win):  Disable old popup menu for source
	window.
end-sanitize-gdbtk
	* sparcl-tdep.c:  Add `sparclite' target for doing serial and udp
	downloads to SPARClite demo boards.

Sun Jan 29 09:43:22 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* remote.c, remote-pa.c: Remove #if 0'd icache code.  It has had
	no hope of working as is for a long time (in particular, shebs' 27
	Jan 95 change confuses the issue further--target_read_memory and
	xfer_core_file do *not* do the same thing in this context).
	Revise comment.

Sat Jan 28 13:40:46 1995 Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* elfread.c (elf_symtab_read):  Do not test BSF_GLOBAL for
	procedure linkage table symbols, it is no longer set due to the
	Jan 6 BFD change in bfd/elfcode.h.

Fri Jan 27 17:08:06 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* top.c (use_windows): Clarify comments.

	* convex-tdep.c (xfer_core_file): Comment out.
	* config/convex/tm-convex.h (XFER_CORE_FILE): Remove.
	* remote.c, remote-pa.c (remote_fetch_word): Change xfer_core_file
        references to target_read_memory.
	* gdbcore.h (xfer_core_file, core_open, core_detach): Remove
	declarations.
	* corelow.c (core_open, core_detach): Make static.

	* arm-tdep.c: Make it compile.
	(exec_file_command, xfer_core_file): Comment out.
	(arm_print_insn): Remove, now in libopcodes.
	(skip_prologue): Comment out most of body.
	(arm_frame_find_saved_regs): Move here from tm-arm.h.
	(_initialize_arm_tdep): Set tm_print_insn.
	* config/arm/tm-arm.h: Remove old refs to first_object_file_end.
	(XFER_CORE_FILE): Remove.
	(FRAME_FIND_SAVED_REGS): Call arm_frame_find_saved_regs.
	
Fri Jan 27 08:48:28 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (CHILL_LIB): Define as in testsuite/Makefile.in.

Thu Jan 26 18:24:41 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* symtab.c (find_pc_line): When subtracting one to get a line
	number, make sure not to end up with zero.

	* remote-vx.c: Revert all of Kung's changes of 16 Jan.  The
	problems with those changes were (a) the file didn't compile, (b)
	they changed memset to bzero--memset is correct, (c) they took out
	code to deal with boards lacking floating point, (d) who knows
	what I didn't discover in a quick read.

Thu Jan 26 17:32:54 1995  Stu Grossman  (grossman@cygnus.com)

	* sparcl-tdep.c:  Clean up formatting and indentation.

Thu Jan 26 10:49:59 1995  Steve Chamberlain  <sac@splat>

	* remote-hms.c (hms_ops): Change ref of hr_load_image
	to gr_load_image.
	(dcache_flush, dcache_hit, dcache_value, dcache_fetch,
	dcache_poke, dcache_init):  Deleted.
	(hms_open, hms_resume, hms_fetch_word, hms_store_word):
	Use dcache routines provided by remote-util.h

Thu Jan 26 12:08:31 1995  Michael Meissner  <meissner@cygnus.com>

	* configure.in: Add support for powerpc-*-eabi.

	* powerpc/tm-ppc-eabi.h, powerpc/pcc-eabi.mt: New files for
	PowerPC support.

Wed Jan 25 18:13:14 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* language.h (struct language_defn):  New field c_style_arrays.
	* language.c (unknown_language_defn, auto_language_defn,
	local_language_defn), c-lang.c (c_language_defn, cplus_language_defn,
	asm_language_defn):  Set c_style_arrays to true.
	* m2-lang.c (m2_language_defn), ch-lang.c (chill_language_defn),
	f-lang.c (f_language_defn):  Set c_style_arrays to false.
	* valops.c (value_string):  If c_style_array is not set,
	allocate string in gdb (not inferior) using allocate_value.

	* value.h (COERCE_ARRAY), valops.c (value_addr, value_arg_coerce):
	Only call value_coerce_array if current_language->c_style_arrays.
	* values.c:  Add #include "language.h".  (Needed for COERCE_ARRAY.)

	* valops.c (chill_varying_type):  New predicate.
	* valops.c (value_cast):  Support assigning a fixed string or array
	to a variable string/array structure.

	* valarith.c (value_subscripted_rvalue):  Extra parameter lowerbound.
	Check index>=lowerbound, and then add lowerbound to index here,
	instead of in caller.  Generalize to arbitrary lval_types.
	(value_subscript):  Use enhanced value_subscripted_rvalue if
	c_style_arrays is false (and index is in range).

start-sanitize-gdbtk
Wed Jan 25 18:23:46 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.c (gdbtk_init):  Prevent segfault when gdbtk.tcl can't be
	found.
	* gdbtk.tcl:  Initialize expr_update_list() to prevent errors when
	popping up expression window for the first time.
end-sanitize-gdbtk

Wed Jan 25 18:13:14 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* eval.c (evaluate_subexp case OP_ARRAY):  Fix calls to memset:
	TYPE_LENGTH is length in bytes, not bits.

Wed Jan 25 08:19:35 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* infrun.c (proceed): Flush stdout before resuming inferior.
	* infcmd.c (step_1), annotate.c (annotate_starting):
	Don't bother to flush here.

Wed Jan 25 01:11:21 1995  Jeff Law  (law@snake.cs.utah.edu)

	* hpread.c (hpread_process_one_debug_symbol): Fix lines garbled
	by an ill-advised global search and replace.

Tue Jan 24 12:10:28 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.tcl (create_registers_window):  Work around a radiobutton
	widget bug to make Options|Natural button work.

	* gdbtk.c (gdb_disassemble):  Fix problem with source+assembly and
	g++ caused by out-of-order pc's.
	* gdbtk.tcl (files_command):  Remove duplicate file names.  Also,
	add scrollbar.

Mon Jan 23 17:21:09 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.tcl:  Take .gdbtkinit if it exists.  Makes gdbtk match the
	doc!

Mon Jan 23 13:11:46 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	Add support for Chill bitstring literals (e.h. H'FF00').
	* ch-exp.y (match_bitstring_literal):  Fix for proper endianness.
	* expprint.c (print_subexp):  Don't call error on OP_BITSTRING,
	just print B'<unimlemented>'.
	* gdbtypes.c (create_set_type):  Fix bug in length calculation.
	* valops.c, value.h (value_bitstring):  New function.
	* eval.c (evaluate_subexp):  Implement support for OP_BITSTRING.

	* ch-typeprint.c (chill_type_print_base): For TYPE_CODE_FUNC,
	check that return type is non-void, and print in proper Chill syntax.

Mon Jan 23 12:20:34 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* Makefile.in: Remove references to remote-mon.c.
	* remote-mon.c: remove. Replaced by rom68k-rom.c.
	* rom68k-rom.c: Support for Rom68k monitor.

Mon Jan 23 10:50:57 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (CHILL_FOR_TARGET): Update -L argument to point to
	gcc/ch/runtime not chillrt, since that is where the chill runtime
	lives now.

Mon Jan 23 00:06:57 1995  Steve Chamberlain  <sac@splat>

	* remote-hms.c (hms_load): Delete.
	(target_ops): Use hr_load_image.

	* remote-e7000.c, remote-z8k.c, remote-nindy.c (target_ops):
        Define memory_insert/remove_breakpoint.
	* xm-go32.h: Remove redundant SIGs.
	
Thu Jan 19 20:26:58 1995  Steve Chamberlain  <sac@splat>

	* ser-go32.c: Rewritten by nigel@algor.co.uk.

Fri Jan 20 15:23:55 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* expression.h (OP_LABELED):  New operator, for Chill
	labeled structre tuples.
	* ch-exp.y (tuple_element, named_record_element, tuple_elements):
	New non-terminals, to handle labeled structure tuples.
	(tuple):  Re-define using tuple_elements.
	* eval.c (evaluate_labeled_field_init):  New function, to handle
	initialization of structure fields, possibly using OP_LABELED.
	(evaluate_subexp):  Use it.
	* expprint.c (print_subexp case):  For OP_ARRAY, use Chill syntax
	for Chill.  Handled OP_LABELED.
	* parse.c (length_of_subexp, prefixify_subexp):  Handle OP_LABELED.

	* eval.c (evaluate_subexp):  Handle Chill Powerset tuples.
	* valarith.c (value_bit_index):  Just treat bitstring as represented
	by an array of bytes.  Alignment is handled by compiler. 

Wed Jan 18 19:00:29 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* h8300-tdep.c (gdb_print_insn_h8300): Fix typo (&info -> info).
	* sh-tdep.c (gdb_print_insn_sh): Ditto.

Wed Jan 18 11:25:43 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* remote-os9k.c (rombug_open): Fix a bug in exception handling
	command.
	* remote-os9k.c (rombug_write_inferior_memory): reset buffer after
	write.

Tue Jan 17 09:48:38 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* parse.c (_initialize_parse): Improve wording of names of
	msym_*_symbol_type.

Tue Jan 17 14:00:58 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/mips/tm-mips.h (enum mips_fpu_type): New enum.
	(mips_fpu): Change type to enum mips_fpu_type.
	(FIX_CALL_DUMMY): Handle mips_fpu == MIPS_FPU_SINGLE.
	* mips-tdep.c (mips_fpu): Change type to enum mips_fpu_type.
	Don't initialize.
	(mips_fpu_string): New static variable.
	(mips_push_dummy_frame): Handle mips_fpu == MIPS_FPU_SINGLE.
	(mips_pop_frame): Likewise.
	(mips_extract_return_value): Likewise.
	(mips_store_return_value): Likewise.
	(mips_set_fpu_command): New static function.
	(mips_show_fpu_command): New static function.
	(_initialize_mips_tdep): Change handling of set/show mipsfpu.

Tue Jan 17 09:48:38 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* a29k-tdep.c (gdb_print_insn_a29k): Fix typo (&info -> info).

	* parse.c (write_exp_msymbol): Use new variables
	msym_*_symbol_type as type of msymbol expression.
	(_initialize_parse): Initialize them.

Mon Jan 16 18:11:03 1995  Stan Shebs  <shebs@andros.cygnus.com>

	General cleanup and simplication of disassembler interface.
	* a29k-pinsn.c, arm-pinsn.c, convex-pinsn.c, gould-pinsn.c,
        hppa-pinsn.c, i386-pinsn.c, i960-pinsn.c, m68k-pinsn.c,
        m88k-pinsn.c, mips-pinsn.c, ns32k-pinsn.c, pyr-pinsn.c,
        rs6000-pinsn.c, sparc-pinsn.c, tahoe-pinsn.c, vax-pinsn.c: Remove.
	* gould-tdep.c, ns32k-tdep.c, tahoe-tdep.c, vax-tdep.c: New files,
	had been -pinsn.c files.
	* Makefile.in (ALLDEPFILES): Remove removed files.
	(a29k-pinsn.o, arm-pinsn.o, convex-pinsn.o, gould-pinsn.o,
        hppa-pinsn.o, i386-pinsn.o, i960-pinsn.o, m68k-pinsn.o,
        m88k-pinsn.o, mips-pinsn.o, ns32k-pinsn.o, pyr-pinsn.o,
        rs6000-pinsn.o, sparc-pinsn.o, tahoe-pinsn.o, vax-pinsn.o):
        Remove compile actions.
	* arm-tdep.o, gould-tdep.o, ns32k-tdep.o, tahoe-tdep.o,
	vax-tdep.o: Add compile actions.
	* defs.h (tm_print_insn): New global.
	* a29k-tdep.c (gdb_print_insn_a29k): New function.
	(_initialize_a29k_tdep): Rename from _initialize_29k,
	set tm_print_insn.
	* alpha-tdep.c (print_insn): Remove.
	(_initialize_alpha_tdep): Set tm_print_insn.
	* arm-tdep.c (arm_print_insn): New function, was print_insn
	in arm-pinsn.c.
	* convex-tdep.c (convex_print_insn): New function, was print_insn
	in convex-pinsn.c.
	* h8300-tdep.c (print_insn): Remove.
	(gdb_print_insn_h8300): New function.
	(_initialize_h8300_tdep): New function.
	* h8500-tdep.c (print_insn): Remove.
	(_initialize_h8500_tdep): New function.
	* hppa-tdep.c (_initialize_hppa_tdep): Set tm_print_insn.
	* i386-tdep.c (_initialize_i386_tdep): New function.
	* i960-tdep.c (mem, next_insn): New functions, were in
	i960-pinsn.c.
	(_initialize_i960_tdep): Set tm_print_insn.
	* m68k-tdep.c (_initialize_m68k_tdep): New function.
	* m88k-tdep.c (_initialize_m88k_tdep): New function.
	* mips-tdep.c (gdb_print_insn_mips): New function.
	(_initialize_mips_tdep): Set tm_print_insn.
	* pyr-tdep.c (pyr_print_insn): New function, was print_insn
	in pyr-pinsn.c.
	* rs6000-tdep.c (_initialize_rs6000_tdep): New function.
	* sh-tdep.c (print_insn): Remove.
	(gdb_print_insn_sh): New function.
	(_initialize_sh_tdep): Set tm_print_insn.
	* sparc-tdep.c (_initialize_sparc_tdep): New function.
	* w65-tdep.c (print_insn): Remove.
	(_initialize_w65_tdep): New function.
	* z8k-tdep.c (print_insn): Remove.
	(gdb_print_insn_z8k): New function.
	(_initialize_z8k_tdep): Set tm_print_insn.
	* printcmd.c (print_insn): New function, generic disassembler.
	* config/*/*.mt (TDEPFILES): Remove refs to *-pinsn.o.

Mon Jan 16 15:43:29 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* Makefile.in: add new files remote-vx29k.c, config/a29k/tm-vx29k.h,
	and config/a29k/vx29k.mt.
	* configure.in: add new configuration a29k-*-vxworks.
	* remote-vx29k.c: new file merged from WRS.
	* remote-vx.c: merge changes from WRS.
	* config/a29k/vx29k.mt: new file for new configuration.
	* config/a29k/tm-vx29k.h: new header file for newconfiguration.

Sun Jan 15 14:36:19 1995  Steve Chamberlain  <sac@splat>

	* breakpoint.h (disable_breakpoint, enable_breakpoint):
	New declarations.
	(enum bpdisp): Change name of 'delete' member to 'del'.
	(struct bpstat): Changed name to 'bpstats'.
	* breakpoint.c (disable_breakpoint, enable_breakpoint,
	breakpoint_chain): Made globally visible.
	(bpstat_stop_status): Use new name for bpstat.
	(break_command_1, watch_command_1, catch_command_1,
	breakpoint_auto_delete, denable_delete_breakpoint): Use 'del'
	instead of 'delete'.
	(set_breakpoint_sal): New function.
	* defs.h (registers_changed_hook): New declaration.
	* infcmd.c (run_stack_dummy): 'delete' is now 'del'.
	* inflow.c (new_tty): Treat WIN32 in same way as __GO32__	
	* main.c (main): Don't scan options when in WIN32 and exit
	without entering main loop.
	* m2-exp.y (m2_elx): Member 'class' is now 'aclass'.
	* symtab.h (struct symbol, struct partial_symbol): Changed name of
	member 'class' to 'aclass'. 
	(SYMBOL_CLASS, PSYMBOL_CLASS): Reflect change.
	* top.c (registers_changed_hook): New definition.
	* utils.c (quit, notice_quit, initialize_utils): Treate WIN32
	in same way as __GO32__.
	* value.h (c_typedef_print): Rename 'new' argument.

	* w65-tdep.c, config/tm-w65.h, config/w65.mt: New files.
	* configure.in: Suppprt for w65,


Sat Jan 14 11:18:11 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* infcmd.c (signal_command): For "signal 0", pass (CORE_ADDR)-1,
	not stop_pc, to proceed.

	* eval.c (evaluate_subexp): Clear expect_type except for C++ and CHILL.

Fri Jan 13 17:52:57 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* infcmd.c (signal_command): Accept "signal 0"; the change to not
	accept it was accidental.  "handle 0" and "info signal 0" remain
	illegal, though.

Fri Jan 13 15:19:01 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* Makefile.in (all): Don't make libgdb-files.
	(libgdb): New action, makes libgdb-files.

Thu Jan 12 21:23:25 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* stabsread.c (read_enum_type):  When pending enum symbols are
	put into the enum type, they must be inserted in "backwards
	order, in case we've overflowed a struct pending buffer.

start-sanitize-gdbtk
Thu Jan 12 15:02:40 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.c, gdbtk.tcl:  Update/add copyright.
	* gdbtk.tcl (build_framework):  Several fixes for filespec widget,
	including dismiss button, and better error handling.
	* (create_command_win):  Bind button 2 to retrieve selection.
end-sanitize-gdbtk

Thu Jan 12 09:33:24 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* README:  Add note about SPARCworks cc release 3.0 and higher.

	Add procfs support for Alpha OSF/1-2.x.
	* config/alpha/nm-osf.h:  Renamed from nm-alpha.h, generic
	OSF/1 native support.
	* config/alpha/alpha-osf1.mh (NAT_FILE):  Changed accordingly.
	(MUNCH_DEFINE):  Removed.
	* config/alpha/alpha-osf2.mh, config/alpha/nm-osf2.h:  New files
	for procfs support.
	* configure.in (alpha-dec-osf*):  Use alpha-osf2.mh for OSF/1
	release 2.x and higher, else alpha-osf1.mh, as the procfs support
	in release 1.x is incomplete.
	* Makefile.in (ALLCONFIG):  Add config/alpha/alpha-osf2.mh.
	* alpha-nat.c (supply_gregset, fill_gregset, supply_fpgregset,
	fill_fpgregset):  New routines for procfs support.
	* inftarg.c (_initialize_inftarg):  Don't add ptrace support
	if we have an optional procfs and /proc is accessible.
	* procfs.c:  Include sys/fault.h and sys/syscall.h before
	including sys/procfs.h.
	(unconditionally_kill_inferior):  If PROCFS_NEED_PIOCSSIG_FOR_KILL
	is defined, additionally perform a PIOCSSIG to really terminate
	the inferior.
	(create_procinfo):  Always return a result.
	(create_procinfo, do_attach):  Don't trace T_IFAULT faults if
	PROCFS_DONT_TRACE_IFAULT is defined.
	(procfs_init_inferior):  Use START_INFERIOR_TRAPS_EXPECTED as
	argument to startup_inferior if it is defined.
	(proc_set_exec_trap):  If PIOCSSPCACT is defined, use it instead
	of tracing exits from exec system calls. Needed for the user level
	loader under Alpha OSF/1.
	(do_detach):  Clear any pending signal if we want to detach from
	a process without a signal.
	(set_proc_siginfo):  If PROCFS_DONT_PIOCSSIG_CURSIG is defined,
	don't issue a PIOCSSIG if pr_cursig already contains the signal we
	intend to set.
	(info_proc_signals):  If PROCFS_SIGPEND_OFFSET is defined, the
	pending signals are numbered from 1 instead of 0.
	(info_proc_mappings):  Increase size of output format for addresses
	if BFD_HOST_64_BIT is defined.
	(procfs_stop):  Renamed from child_stop.
	(_initialize_procfs):  Don't add procfs support if we have an
	optional procfs and /proc is not accessible.

start-sanitize-gdbtk
Wed Jan 11 17:06:55 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.tcl:  Add button to control mixed source disassembly.
	Use text widgets in expr window.  The give me more control over
	layout.
	Add auto-updating of exprs in expression window.
	Handle expressions out of scope a bit better.
	Make selected window pop up to the top when invoked via the
	menubar.
	Make copyright message have raised relief.

	* gdbtk.c (gdbtk_init):  Improve handling for errors in gdbtk.tcl
	during startup.
end-sanitize-gdbtk

Wed Jan 11 17:53:26 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* array-rom.c: Add support for most commands.
	
	* monitor.c: Add GDB remote protocol for the hybrid environment on
	the Array board. 

Wed Jan 11 00:44:01 1995  Jeff Law  (law@snake.cs.utah.edu)

	* command.c (show_user_1): Use print_command_line to show a user
	defined command (including control structures).

	* top.c (init_main): Change documentation for user defined
	commands to indicate they may accept up to ten arguments.

Tue Jan 10 16:22:41 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* mips-tdep.c (mips_skip_prologue): Accept or as well as addu for
	`move $s8, $sp' instruction.

Sun Jan  8 12:45:34 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* target.c, target.h (target_signal_from_command): New function.
	* infrun.c (handle_command, signals_info), infcmd.c
	(signal_command): Use it.
	* infrun.c, infcmd.c: Update docstrings for these commands.

	* target.h (enum target_signal), target.c (signals), target.c
	(target_signal_from_host, target_signal_to_host): Add
	TARGET_SIGNAL_REALTIME_* and TARGET_SIGNAL_PRIO for lynx.
	* config/tm-lynx.h: Define signal numbers for realtime events.

Sat Jan  7 07:23:53 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dbxread.c (process_one_symbol):  Handle N_FUN symbols
	for Sun acc 3.0 under SunOS4.

	Changes to improve handling of runtime common symbols
	under SunOS4.
	* minsyms.c (get_symbol_leading_char):  New routine to determine
	the leading symbol character for an objfile.
	(prim_record_minimal_symbol_and_info, install_minimal_symbols):
	Use it.
	* objfiles.h (rt_common_objfile):  New global, points to objfile
	containing the runtime common minimal symbols.
	* objfiles.c (free_objfile):  Mark rt_common_objfile as
	unallocated before freeing it.
	* solib.c (allocate_rt_common_objfile):  New routine to allocate
	an objfile for the runtime common minimal symbols.
	(solib_add_common_symbols):  Allocate an objfile for the runtime
	common symbols if necessary and put common symbols into it.
	Clean up code and comments.
	(solib_add, special_symbol_handling):  Cleanup comments regarding
	runtime common symbols.
	* stabsread.c (scan_file_globals_1):  New routine, contains
	old scan_file_globals code. Checks if there are any unresolved
	global symbols before starting the expensive minimal symbol table
	search.
	(scan_file_globals):  Now calls scan_file_globals_1 for the passed
	objfile and eventually for the runtime common objfile. Complains
	about any unresolved global symbols and removes them from the
	global symbol chain to avoid dangling pointers into the symbol
	table if the symbol table is reread.

Thu Jan  5 17:38:29 1995  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in (install_only uninstall):  Indent for clarity.

	* core.c (dis_asm_read_memory):  Add call to
	dis_asm_read_memory_hook to provide alternate way for disassembler
	to read memory.

	* defs.h:  Protect from multiple inclusion.  Add decl for
	dis_asm_read_memory_hook.

	* top.c:  Make window startup be the default.
	* Add dis_asm_read_memory_hook.

start-sanitize-gdbtk
	* gdbtk.c (finish_saving_output):  Don't do anything if not saving
	output.
	* (breakpoint_notify):  Don't send null filename to tcl.
	* (gdb_eval):  New tcl command to eval an expression.
	* (gdb_disassemble):  New tcl command to do disassembly.  This
	allows tcl code to choose between exec file and target memeory,
	and can also do mixed source and assembly.
	* (gdbtk_init):  Move reading of gdbtk.tcl to the end to make sure
	that more of the environment is set up.  Also, create link between
	gdb and tcl vars disassemble{-_}from{-_}exec.

	* gdbtk.tcl:  New expression window support.
	* Make assembly window be 80 columns wide.
	* Use new disassembly method.  Add menu items to select
	disassembly from exec file or target.
	* Change View menubar item to Options.

	* Get rid of Stack, Breakpoints, Signals, and Variables Windows,
	since they don't exist yet.

	* Pop up a copyright window on startup.
end-sanitize-gdbtk

Thu Jan  5 01:16:40 1995  Jeff Law  (law@snake.cs.utah.edu)

	* stabsread.c (define_symbol): Handle `a' symbol type used for
	reference parameter passed in a register.

start-sanitize-gdbtk
Wed Jan  4 19:49:10 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* gdbtk.tcl (build_framework): Add standard commands menu, more
	windows to standard windows menu.
	(not_implemented_yet): Clarify message.
end-sanitize-gdbtk

Wed Jan  4 12:27:29 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* defs.h: move include tm.h up, so that the type LONGEST can
	also based on the target requirement to determine. In this case
	target mips64.

	* remote-os9k.c (rombug_open): catch exception e in rombug.
	* remote-os9k.c (rombug_wait): print message before register display
	from rombug.

Wed Jan  4 09:18:27 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* top.c (locate_arg): Call strchr not index.

Tue Jan  3 16:52:03 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* ch-exp.y (literal):  Recognize NULL.
	(tuple):  Parse simple unlabelled tuples.
	* eval.c (evaluate_subexp case OP_ARRAY):  Use expect_type to
	evaluate brace-initializer-expressions depending on context.
	(evaluate_subexp case UNOP_CAST):  Pass the target type as
	expected type when evaluating the expression.

	* ch-typeprint.c (chill_type_print_base):  Get names of PTR and
	BOOL from TYPE_NAME.
	* ch-valprint.c (chill_print_type_scalar):  New function, to handle
	TYPE_CODE_RANGE better than print_type_scalar does.
	(chill_val_print_array_elements):  Use above new function.

Mon Jan  2 15:02:51 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-udi.c (udi_load): Tell symbol_file_add that the
	program being loaded is the main program.

For older changes see ChangeLog-94

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
