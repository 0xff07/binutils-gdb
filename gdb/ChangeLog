Wed Jan 25 01:11:21 1995  Jeff Law  (law@snake.cs.utah.edu)

	* hpread.c (hpread_process_one_debug_symbol): Fix lines garbled
	by an ill-advised global search and replace.

Tue Jan 24 12:10:28 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.tcl (create_registers_window):  Work around a radiobutton
	widget bug to make Options|Natural button work.

	* gdbtk.c (gdb_disassemble):  Fix problem with source+assembly and
	g++ caused by out-of-order pc's.
	* gdbtk.tcl (files_command):  Remove duplicate file names.  Also,
	add scrollbar.

Mon Jan 23 17:21:09 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.tcl:  Take .gdbtkinit if it exists.  Makes gdbtk match the
	doc!

Mon Jan 23 13:11:46 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	Add support for Chill bitstring literals (e.h. H'FF00').
	* ch-exp.y (match_bitstring_literal):  Fix for proper endianness.
	* expprint.c (print_subexp):  Don't call error on OP_BITSTRING,
	just print B'<unimlemented>'.
	* gdbtypes.c (create_set_type):  Fix bug in length calculation.
	* valops.c, value.h (value_bitstring):  New function.
	* eval.c (evaluate_subexp):  Implement support for OP_BITSTRING.

	* ch-typeprint.c (chill_type_print_base): For TYPE_CODE_FUNC,
	check that return type is non-void, and print in proper Chill syntax.

Mon Jan 23 12:20:34 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* Makefile.in: Remove references to remote-mon.c.
	* remote-mon.c: remove. Replaced by rom68k-rom.c.
	* rom68k-rom.c: Support for Rom68k monitor.

Mon Jan 23 10:50:57 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* Makefile.in (CHILL_FOR_TARGET): Update -L argument to point to
	gcc/ch/runtime not chillrt, since that is where the chill runtime
	lives now.

Mon Jan 23 00:06:57 1995  Steve Chamberlain  <sac@splat>

	* remote-hms.c (hms_load): Delete.
	(target_ops): Use hr_load_image.

	* remote-e7000.c, remote-z8k.c, remote-nindy.c (target_ops):
        Define memory_insert/remove_breakpoint.
	* xm-go32.h: Remove redundant SIGs.
	
Thu Jan 19 20:26:58 1995  Steve Chamberlain  <sac@splat>

	* ser-go32.c: Rewritten by nigel@algor.co.uk.

Fri Jan 20 15:23:55 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* expression.h (OP_LABELED):  New operator, for Chill
	labeled structre tuples.
	* ch-exp.y (tuple_element, named_record_element, tuple_elements):
	New non-terminals, to handle labeled structure tuples.
	(tuple):  Re-define using tuple_elements.
	* eval.c (evaluate_labeled_field_init):  New function, to handle
	initialization of structure fields, possibly using OP_LABELED.
	(evaluate_subexp):  Use it.
	* expprint.c (print_subexp case):  For OP_ARRAY, use Chill syntax
	for Chill.  Handled OP_LABELED.
	* parse.c (length_of_subexp, prefixify_subexp):  Handle OP_LABELED.

	* eval.c (evaluate_subexp):  Handle Chill Powerset tuples.
	* valarith.c (value_bit_index):  Just treat bitstring as represented
	by an array of bytes.  Alignment is handled by compiler. 

Wed Jan 18 19:00:29 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* h8300-tdep.c (gdb_print_insn_h8300): Fix typo (&info -> info).
	* sh-tdep.c (gdb_print_insn_sh): Ditto.

Wed Jan 18 11:25:43 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* remote-os9k.c (rombug_open): Fix a bug in exception handling
	command.
	* remote-os9k.c (rombug_write_inferior_memory): reset buffer after
	write.

Tue Jan 17 09:48:38 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* parse.c (_initialize_parse): Improve wording of names of
	msym_*_symbol_type.

Tue Jan 17 14:00:58 1995  Ian Lance Taylor  <ian@sanguine.cygnus.com>

	* config/mips/tm-mips.h (enum mips_fpu_type): New enum.
	(mips_fpu): Change type to enum mips_fpu_type.
	(FIX_CALL_DUMMY): Handle mips_fpu == MIPS_FPU_SINGLE.
	* mips-tdep.c (mips_fpu): Change type to enum mips_fpu_type.
	Don't initialize.
	(mips_fpu_string): New static variable.
	(mips_push_dummy_frame): Handle mips_fpu == MIPS_FPU_SINGLE.
	(mips_pop_frame): Likewise.
	(mips_extract_return_value): Likewise.
	(mips_store_return_value): Likewise.
	(mips_set_fpu_command): New static function.
	(mips_show_fpu_command): New static function.
	(_initialize_mips_tdep): Change handling of set/show mipsfpu.

Tue Jan 17 09:48:38 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* a29k-tdep.c (gdb_print_insn_a29k): Fix typo (&info -> info).

	* parse.c (write_exp_msymbol): Use new variables
	msym_*_symbol_type as type of msymbol expression.
	(_initialize_parse): Initialize them.

Mon Jan 16 18:11:03 1995  Stan Shebs  <shebs@andros.cygnus.com>

	General cleanup and simplication of disassembler interface.
	* a29k-pinsn.c, arm-pinsn.c, convex-pinsn.c, gould-pinsn.c,
        hppa-pinsn.c, i386-pinsn.c, i960-pinsn.c, m68k-pinsn.c,
        m88k-pinsn.c, mips-pinsn.c, ns32k-pinsn.c, pyr-pinsn.c,
        rs6000-pinsn.c, sparc-pinsn.c, tahoe-pinsn.c, vax-pinsn.c: Remove.
	* gould-tdep.c, ns32k-tdep.c, tahoe-tdep.c, vax-tdep.c: New files,
	had been -pinsn.c files.
	* Makefile.in (ALLDEPFILES): Remove removed files.
	(a29k-pinsn.o, arm-pinsn.o, convex-pinsn.o, gould-pinsn.o,
        hppa-pinsn.o, i386-pinsn.o, i960-pinsn.o, m68k-pinsn.o,
        m88k-pinsn.o, mips-pinsn.o, ns32k-pinsn.o, pyr-pinsn.o,
        rs6000-pinsn.o, sparc-pinsn.o, tahoe-pinsn.o, vax-pinsn.o):
        Remove compile actions.
	* arm-tdep.o, gould-tdep.o, ns32k-tdep.o, tahoe-tdep.o,
	vax-tdep.o: Add compile actions.
	* defs.h (tm_print_insn): New global.
	* a29k-tdep.c (gdb_print_insn_a29k): New function.
	(_initialize_a29k_tdep): Rename from _initialize_29k,
	set tm_print_insn.
	* alpha-tdep.c (print_insn): Remove.
	(_initialize_alpha_tdep): Set tm_print_insn.
	* arm-tdep.c (arm_print_insn): New function, was print_insn
	in arm-pinsn.c.
	* convex-tdep.c (convex_print_insn): New function, was print_insn
	in convex-pinsn.c.
	* h8300-tdep.c (print_insn): Remove.
	(gdb_print_insn_h8300): New function.
	(_initialize_h8300_tdep): New function.
	* h8500-tdep.c (print_insn): Remove.
	(_initialize_h8500_tdep): New function.
	* hppa-tdep.c (_initialize_hppa_tdep): Set tm_print_insn.
	* i386-tdep.c (_initialize_i386_tdep): New function.
	* i960-tdep.c (mem, next_insn): New functions, were in
	i960-pinsn.c.
	(_initialize_i960_tdep): Set tm_print_insn.
	* m68k-tdep.c (_initialize_m68k_tdep): New function.
	* m88k-tdep.c (_initialize_m88k_tdep): New function.
	* mips-tdep.c (gdb_print_insn_mips): New function.
	(_initialize_mips_tdep): Set tm_print_insn.
	* pyr-tdep.c (pyr_print_insn): New function, was print_insn
	in pyr-pinsn.c.
	* rs6000-tdep.c (_initialize_rs6000_tdep): New function.
	* sh-tdep.c (print_insn): Remove.
	(gdb_print_insn_sh): New function.
	(_initialize_sh_tdep): Set tm_print_insn.
	* sparc-tdep.c (_initialize_sparc_tdep): New function.
	* w65-tdep.c (print_insn): Remove.
	(_initialize_w65_tdep): New function.
	* z8k-tdep.c (print_insn): Remove.
	(gdb_print_insn_z8k): New function.
	(_initialize_z8k_tdep): Set tm_print_insn.
	* printcmd.c (print_insn): New function, generic disassembler.
	* config/*/*.mt (TDEPFILES): Remove refs to *-pinsn.o.

Mon Jan 16 15:43:29 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* Makefile.in: add new files remote-vx29k.c, config/a29k/tm-vx29k.h,
	and config/a29k/vx29k.mt.
	* configure.in: add new configuration a29k-*-vxworks.
	* remote-vx29k.c: new file merged from WRS.
	* remote-vx.c: merge changes from WRS.
	* config/a29k/vx29k.mt: new file for new configuration.
	* config/a29k/tm-vx29k.h: new header file for newconfiguration.

Sun Jan 15 14:36:19 1995  Steve Chamberlain  <sac@splat>

	* breakpoint.h (disable_breakpoint, enable_breakpoint):
	New declarations.
	(enum bpdisp): Change name of 'delete' member to 'del'.
	(struct bpstat): Changed name to 'bpstats'.
	* breakpoint.c (disable_breakpoint, enable_breakpoint,
	breakpoint_chain): Made globally visible.
	(bpstat_stop_status): Use new name for bpstat.
	(break_command_1, watch_command_1, catch_command_1,
	breakpoint_auto_delete, denable_delete_breakpoint): Use 'del'
	instead of 'delete'.
	(set_breakpoint_sal): New function.
	* defs.h (registers_changed_hook): New declaration.
	* infcmd.c (run_stack_dummy): 'delete' is now 'del'.
	* inflow.c (new_tty): Treat WIN32 in same way as __GO32__	
	* main.c (main): Don't scan options when in WIN32 and exit
	without entering main loop.
	* m2-exp.y (m2_elx): Member 'class' is now 'aclass'.
	* symtab.h (struct symbol, struct partial_symbol): Changed name of
	member 'class' to 'aclass'. 
	(SYMBOL_CLASS, PSYMBOL_CLASS): Reflect change.
	* top.c (registers_changed_hook): New definition.
	* utils.c (quit, notice_quit, initialize_utils): Treate WIN32
	in same way as __GO32__.
	* value.h (c_typedef_print): Rename 'new' argument.

	* w65-tdep.c, config/tm-w65.h, config/w65.mt: New files.
	* configure.in: Suppprt for w65,


Sat Jan 14 11:18:11 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* infcmd.c (signal_command): For "signal 0", pass (CORE_ADDR)-1,
	not stop_pc, to proceed.

	* eval.c (evaluate_subexp): Clear expect_type except for C++ and CHILL.

Fri Jan 13 17:52:57 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* infcmd.c (signal_command): Accept "signal 0"; the change to not
	accept it was accidental.  "handle 0" and "info signal 0" remain
	illegal, though.

Fri Jan 13 15:19:01 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* Makefile.in (all): Don't make libgdb-files.
	(libgdb): New action, makes libgdb-files.

Thu Jan 12 21:23:25 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* stabsread.c (read_enum_type):  When pending enum symbols are
	put into the enum type, they must be inserted in "backwards
	order, in case we've overflowed a struct pending buffer.

start-sanitize-gdbtk
Thu Jan 12 15:02:40 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.c, gdbtk.tcl:  Update/add copyright.
	* gdbtk.tcl (build_framework):  Several fixes for filespec widget,
	including dismiss button, and better error handling.
	* (create_command_win):  Bind button 2 to retrieve selection.
end-sanitize-gdbtk

Thu Jan 12 09:33:24 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* README:  Add note about SPARCworks cc release 3.0 and higher.

	Add procfs support for Alpha OSF/1-2.x.
	* config/alpha/nm-osf.h:  Renamed from nm-alpha.h, generic
	OSF/1 native support.
	* config/alpha/alpha-osf1.mh (NAT_FILE):  Changed accordingly.
	(MUNCH_DEFINE):  Removed.
	* config/alpha/alpha-osf2.mh, config/alpha/nm-osf2.h:  New files
	for procfs support.
	* configure.in (alpha-dec-osf*):  Use alpha-osf2.mh for OSF/1
	release 2.x and higher, else alpha-osf1.mh, as the procfs support
	in release 1.x is incomplete.
	* Makefile.in (ALLCONFIG):  Add config/alpha/alpha-osf2.mh.
	* alpha-nat.c (supply_gregset, fill_gregset, supply_fpgregset,
	fill_fpgregset):  New routines for procfs support.
	* inftarg.c (_initialize_inftarg):  Don't add ptrace support
	if we have an optional procfs and /proc is accessible.
	* procfs.c:  Include sys/fault.h and sys/syscall.h before
	including sys/procfs.h.
	(unconditionally_kill_inferior):  If PROCFS_NEED_PIOCSSIG_FOR_KILL
	is defined, additionally perform a PIOCSSIG to really terminate
	the inferior.
	(create_procinfo):  Always return a result.
	(create_procinfo, do_attach):  Don't trace T_IFAULT faults if
	PROCFS_DONT_TRACE_IFAULT is defined.
	(procfs_init_inferior):  Use START_INFERIOR_TRAPS_EXPECTED as
	argument to startup_inferior if it is defined.
	(proc_set_exec_trap):  If PIOCSSPCACT is defined, use it instead
	of tracing exits from exec system calls. Needed for the user level
	loader under Alpha OSF/1.
	(do_detach):  Clear any pending signal if we want to detach from
	a process without a signal.
	(set_proc_siginfo):  If PROCFS_DONT_PIOCSSIG_CURSIG is defined,
	don't issue a PIOCSSIG if pr_cursig already contains the signal we
	intend to set.
	(info_proc_signals):  If PROCFS_SIGPEND_OFFSET is defined, the
	pending signals are numbered from 1 instead of 0.
	(info_proc_mappings):  Increase size of output format for addresses
	if BFD_HOST_64_BIT is defined.
	(procfs_stop):  Renamed from child_stop.
	(_initialize_procfs):  Don't add procfs support if we have an
	optional procfs and /proc is not accessible.

start-sanitize-gdbtk
Wed Jan 11 17:06:55 1995  Stu Grossman  (grossman@cygnus.com)

	* gdbtk.tcl:  Add button to control mixed source disassembly.
	Use text widgets in expr window.  The give me more control over
	layout.
	Add auto-updating of exprs in expression window.
	Handle expressions out of scope a bit better.
	Make selected window pop up to the top when invoked via the
	menubar.
	Make copyright message have raised relief.

	* gdbtk.c (gdbtk_init):  Improve handling for errors in gdbtk.tcl
	during startup.
end-sanitize-gdbtk

Wed Jan 11 17:53:26 1995  Rob Savoye  <rob@darkstar.cygnus.com>

	* array-rom.c: Add support for most commands.
	
	* monitor.c: Add GDB remote protocol for the hybrid environment on
	the Array board. 

Wed Jan 11 00:44:01 1995  Jeff Law  (law@snake.cs.utah.edu)

	* command.c (show_user_1): Use print_command_line to show a user
	defined command (including control structures).

	* top.c (init_main): Change documentation for user defined
	commands to indicate they may accept up to ten arguments.

Tue Jan 10 16:22:41 1995  Jim Kingdon  <kingdon@lioth.cygnus.com>

	* mips-tdep.c (mips_skip_prologue): Accept or as well as addu for
	`move $s8, $sp' instruction.

Sun Jan  8 12:45:34 1995  Jim Kingdon  <kingdon@deneb.cygnus.com>

	* target.c, target.h (target_signal_from_command): New function.
	* infrun.c (handle_command, signals_info), infcmd.c
	(signal_command): Use it.
	* infrun.c, infcmd.c: Update docstrings for these commands.

	* target.h (enum target_signal), target.c (signals), target.c
	(target_signal_from_host, target_signal_to_host): Add
	TARGET_SIGNAL_REALTIME_* and TARGET_SIGNAL_PRIO for lynx.
	* config/tm-lynx.h: Define signal numbers for realtime events.

Sat Jan  7 07:23:53 1995  Peter Schauer  (pes@regent.e-technik.tu-muenchen.de)

	* dbxread.c (process_one_symbol):  Handle N_FUN symbols
	for Sun acc 3.0 under SunOS4.

	Changes to improve handling of runtime common symbols
	under SunOS4.
	* minsyms.c (get_symbol_leading_char):  New routine to determine
	the leading symbol character for an objfile.
	(prim_record_minimal_symbol_and_info, install_minimal_symbols):
	Use it.
	* objfiles.h (rt_common_objfile):  New global, points to objfile
	containing the runtime common minimal symbols.
	* objfiles.c (free_objfile):  Mark rt_common_objfile as
	unallocated before freeing it.
	* solib.c (allocate_rt_common_objfile):  New routine to allocate
	an objfile for the runtime common minimal symbols.
	(solib_add_common_symbols):  Allocate an objfile for the runtime
	common symbols if necessary and put common symbols into it.
	Clean up code and comments.
	(solib_add, special_symbol_handling):  Cleanup comments regarding
	runtime common symbols.
	* stabsread.c (scan_file_globals_1):  New routine, contains
	old scan_file_globals code. Checks if there are any unresolved
	global symbols before starting the expensive minimal symbol table
	search.
	(scan_file_globals):  Now calls scan_file_globals_1 for the passed
	objfile and eventually for the runtime common objfile. Complains
	about any unresolved global symbols and removes them from the
	global symbol chain to avoid dangling pointers into the symbol
	table if the symbol table is reread.

Thu Jan  5 17:38:29 1995  Stu Grossman  (grossman@cygnus.com)

	* Makefile.in (install_only uninstall):  Indent for clarity.

	* core.c (dis_asm_read_memory):  Add call to
	dis_asm_read_memory_hook to provide alternate way for disassembler
	to read memory.

	* defs.h:  Protect from multiple inclusion.  Add decl for
	dis_asm_read_memory_hook.

	* top.c:  Make window startup be the default.
	* Add dis_asm_read_memory_hook.

start-sanitize-gdbtk
	* gdbtk.c (finish_saving_output):  Don't do anything if not saving
	output.
	* (breakpoint_notify):  Don't send null filename to tcl.
	* (gdb_eval):  New tcl command to eval an expression.
	* (gdb_disassemble):  New tcl command to do disassembly.  This
	allows tcl code to choose between exec file and target memeory,
	and can also do mixed source and assembly.
	* (gdbtk_init):  Move reading of gdbtk.tcl to the end to make sure
	that more of the environment is set up.  Also, create link between
	gdb and tcl vars disassemble{-_}from{-_}exec.

	* gdbtk.tcl:  New expression window support.
	* Make assembly window be 80 columns wide.
	* Use new disassembly method.  Add menu items to select
	disassembly from exec file or target.
	* Change View menubar item to Options.

	* Get rid of Stack, Breakpoints, Signals, and Variables Windows,
	since they don't exist yet.

	* Pop up a copyright window on startup.
end-sanitize-gdbtk

Thu Jan  5 01:16:40 1995  Jeff Law  (law@snake.cs.utah.edu)

	* stabsread.c (define_symbol): Handle `a' symbol type used for
	reference parameter passed in a register.

start-sanitize-gdbtk
Wed Jan  4 19:49:10 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* gdbtk.tcl (build_framework): Add standard commands menu, more
	windows to standard windows menu.
	(not_implemented_yet): Clarify message.
end-sanitize-gdbtk

Wed Jan  4 12:27:29 1995  Kung Hsu  <kung@mexican.cygnus.com>

	* defs.h: move include tm.h up, so that the type LONGEST can
	also based on the target requirement to determine. In this case
	target mips64.

	* remote-os9k.c (rombug_open): catch exception e in rombug.
	* remote-os9k.c (rombug_wait): print message before register display
	from rombug.

Wed Jan  4 09:18:27 1995  Jim Kingdon  (kingdon@lioth.cygnus.com)

	* top.c (locate_arg): Call strchr not index.

Tue Jan  3 16:52:03 1995  Per Bothner  <bothner@kalessin.cygnus.com>

	* ch-exp.y (literal):  Recognize NULL.
	(tuple):  Parse simple unlabelled tuples.
	* eval.c (evaluate_subexp case OP_ARRAY):  Use expect_type to
	evaluate brace-initializer-expressions depending on context.
	(evaluate_subexp case UNOP_CAST):  Pass the target type as
	expected type when evaluating the expression.

	* ch-typeprint.c (chill_type_print_base):  Get names of PTR and
	BOOL from TYPE_NAME.
	* ch-valprint.c (chill_print_type_scalar):  New function, to handle
	TYPE_CODE_RANGE better than print_type_scalar does.
	(chill_val_print_array_elements):  Use above new function.

Mon Jan  2 15:02:51 1995  Stan Shebs  <shebs@andros.cygnus.com>

	* remote-udi.c (udi_load): Tell symbol_file_add that the
	program being loaded is the main program.

For older changes see ChangeLog-94

Local Variables:
mode: indented-text
left-margin: 8
fill-column: 74
version-control: never
End:
